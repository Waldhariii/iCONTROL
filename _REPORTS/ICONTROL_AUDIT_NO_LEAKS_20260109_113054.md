# iCONTROL — Audit no-leaks

- Date: ven.  9 janv. 2026 11:30:54 EST
- ROOT: `/Users/danygaudreault/System_Innovex_CLEAN/iCONTROL`

## Exclusions
```
--glob
!**/_REPORTS/**
--glob
!**/node_modules/**
--glob
!**/.git/**
--glob
!**/scripts/audit/audit-no-leaks.zsh
```

## OK A1 — No hardcoded /Users paths

## FAIL B1 — Legacy token `iCONTROL` found
```
/Users/danygaudreault/System_Innovex_CLEAN/iCONTROL/.env.example:1:# iCONTROL — Environment Example
/Users/danygaudreault/System_Innovex_CLEAN/iCONTROL/.env.example:4:VITE_APP_NAME=iCONTROL
/Users/danygaudreault/System_Innovex_CLEAN/iCONTROL/.env.example:18:VITE_APP_DISPLAY_NAME=iCONTROL
/Users/danygaudreault/System_Innovex_CLEAN/iCONTROL/.env.example:19:VITE_APP_SHORT_NAME=iCONTROL
/Users/danygaudreault/System_Innovex_CLEAN/iCONTROL/.env.example:20:VITE_LEGAL_NAME=iCONTROL
/Users/danygaudreault/System_Innovex_CLEAN/iCONTROL/config/brand/brand.schema.json:3:  "title": "iCONTROL Brand Schema v1",
/Users/danygaudreault/System_Innovex_CLEAN/iCONTROL/config/brand/brand.default.json:2:  "APP_DISPLAY_NAME": "iCONTROL",
/Users/danygaudreault/System_Innovex_CLEAN/iCONTROL/config/brand/brand.default.json:3:  "APP_SHORT_NAME": "iCONTROL",
/Users/danygaudreault/System_Innovex_CLEAN/iCONTROL/config/brand/brand.default.json:4:  "LEGAL_NAME": "iCONTROL",
/Users/danygaudreault/System_Innovex_CLEAN/iCONTROL/docs/architecture/README.md:1:# Architecture — iCONTROL
/Users/danygaudreault/System_Innovex_CLEAN/iCONTROL/scripts/maintenance/purge-legacy-controlx.zsh:13:HITS="$(rg -n --hidden --no-ignore "${EXCL[@]}" "iCONTROL" "$ROOT" || true)"
/Users/danygaudreault/System_Innovex_CLEAN/iCONTROL/scripts/maintenance/purge-legacy-controlx.zsh:15:  echo "OK: no iCONTROL token found (active source). Nothing to do."
/Users/danygaudreault/System_Innovex_CLEAN/iCONTROL/scripts/maintenance/purge-legacy-controlx.zsh:24:FILES="$(rg -l --hidden --no-ignore "${EXCL[@]}" "iCONTROL" "$ROOT" || true)"
/Users/danygaudreault/System_Innovex_CLEAN/iCONTROL/scripts/maintenance/purge-legacy-controlx.zsh:26:# Replace iCONTROL -> iCONTROL in contents
/Users/danygaudreault/System_Innovex_CLEAN/iCONTROL/scripts/maintenance/purge-legacy-controlx.zsh:34:  perl -pi -e 's/iCONTROL/iCONTROL/g' "$f"
/Users/danygaudreault/System_Innovex_CLEAN/iCONTROL/scripts/maintenance/purge-legacy-controlx.zsh:39:HITS2="$(rg -n --hidden --no-ignore "${EXCL[@]}" "iCONTROL" "$ROOT" || true)"
/Users/danygaudreault/System_Innovex_CLEAN/iCONTROL/scripts/maintenance/purge-legacy-controlx.zsh:41:  echo "WARN: iCONTROL still found (showing first hits):"
/Users/danygaudreault/System_Innovex_CLEAN/iCONTROL/scripts/maintenance/purge-legacy-controlx.zsh:46:echo "OK: purge complete (no iCONTROL token in active source)."
/Users/danygaudreault/System_Innovex_CLEAN/iCONTROL/config/branding/branding.json:3:  "productName": "iCONTROL",
/Users/danygaudreault/System_Innovex_CLEAN/iCONTROL/config/branding/branding.json:4:  "companyName": "iCONTROL",
/Users/danygaudreault/System_Innovex_CLEAN/iCONTROL/app/package.json:5:  "description": "iCONTROL — Core UI Shell and Module Host",
/Users/danygaudreault/System_Innovex_CLEAN/iCONTROL/app/src/main.ts:9:  document.title = (b.APP_DISPLAY_NAME || "iCONTROL") + suffix;
/Users/danygaudreault/System_Innovex_CLEAN/iCONTROL/app/src/runtime/router.ts:43:    document.title = `iCONTROL — ${entry.title}`;
/Users/danygaudreault/System_Innovex_CLEAN/iCONTROL/app/README.md:1:# iCONTROL — App Shell
/Users/danygaudreault/System_Innovex_CLEAN/iCONTROL/platform-services/ui-shell/layout/shell.ts:33:      <div id="cxBrandTitle">iCONTROL</div>
/Users/danygaudreault/System_Innovex_CLEAN/iCONTROL/platform-services/ui-shell/layout/shell.ts:127:      if(el) el.textContent = title || "iCONTROL";
/Users/danygaudreault/System_Innovex_CLEAN/iCONTROL/platform-services/branding/brandService.ts:6:  APP_DISPLAY_NAME: "iCONTROL",
/Users/danygaudreault/System_Innovex_CLEAN/iCONTROL/platform-services/branding/brandService.ts:7:  APP_SHORT_NAME: "iCONTROL",
/Users/danygaudreault/System_Innovex_CLEAN/iCONTROL/platform-services/branding/brandService.ts:8:  LEGAL_NAME: "iCONTROL",
/Users/danygaudreault/System_Innovex_CLEAN/iCONTROL/platform-services/branding/brandService.ts:69:    APP_DISPLAY_NAME: APP_DISPLAY_NAME || "iCONTROL",
/Users/danygaudreault/System_Innovex_CLEAN/iCONTROL/platform-services/branding/brandService.ts:70:    APP_SHORT_NAME: s(input.APP_SHORT_NAME) || "iCONTROL",
/Users/danygaudreault/System_Innovex_CLEAN/iCONTROL/platform-services/branding/brandService.ts:71:    LEGAL_NAME: s(input.LEGAL_NAME) || APP_DISPLAY_NAME || "iCONTROL",
/Users/danygaudreault/System_Innovex_CLEAN/iCONTROL/app/dist/assets/index-CNca2_ju.js:1:(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();const A={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},m="icontrol_brand_v1",b={APP_DISPLAY_NAME:"iCONTROL",APP_SHORT_NAME:"iCONTROL",LEGAL_NAME:"iCONTROL",TENANT_ID:"icontrol-default",TITLE_SUFFIX:"",THEME_MODE:"dark",ACCENT_COLOR:"#6D28D9",LOGO_PRIMARY:"",LOGO_COMPACT:""};function O(){try{const e=localStorage.getItem(m);return e?JSON.parse(e):null}catch{return null}}function P(){const e=typeof import.meta<"u"&&A?A:{},t=n=>typeof e[n]=="string"?e[n]:"";return{APP_DISPLAY_NAME:t("VITE_APP_DISPLAY_NAME"),APP_SHORT_NAME:t("VITE_APP_SHORT_NAME"),LEGAL_NAME:t("VITE_LEGAL_NAME"),TENANT_ID:t("VITE_TENANT_ID"),TITLE_SUFFIX:t("VITE_TITLE_SUFFIX"),THEME_MODE:t("VITE_THEME_MODE"),ACCENT_COLOR:t("VITE_ACCENT_COLOR"),LOGO_PRIMARY:t("VITE_LOGO_PRIMARY"),LOGO_COMPACT:t("VITE_LOGO_COMPACT")}}function y(e,t){const n={...e||{}};for(const i of Object.keys(t||{})){const r=t[i];typeof r=="string"&&r.trim()===""||r!=null&&(n[i]=r)}return n}function E(e){const t=[],n=l=>typeof l=="string"?l.trim():"",i=n(e.APP_DISPLAY_NAME),r=n(e.TENANT_ID),o=n(e.THEME_MODE),a=n(e.ACCENT_COLOR);i||t.push("ERR_BRAND_INVALID: APP_DISPLAY_NAME missing/empty"),(!r||!/^[a-z0-9][a-z0-9\-]+$/.test(r))&&t.push("ERR_BRAND_INVALID: TENANT_ID invalid"),["dark","light","auto"].includes(o)||t.push("ERR_BRAND_INVALID: THEME_MODE invalid"),/^#([0-9a-fA-F]{6}|[0-9a-fA-F]{8})$/.test(a)||t.push("ERR_BRAND_INVALID: ACCENT_COLOR invalid");const d={APP_DISPLAY_NAME:i||"iCONTROL",APP_SHORT_NAME:n(e.APP_SHORT_NAME)||"iCONTROL",LEGAL_NAME:n(e.LEGAL_NAME)||i||"iCONTROL",TENANT_ID:r||"icontrol-default",TITLE_SUFFIX:n(e.TITLE_SUFFIX)||"",THEME_MODE:["dark","light","auto"].includes(o)?o:"dark",ACCENT_COLOR:a||"#6D28D9",LOGO_PRIMARY:n(e.LOGO_PRIMARY)||"",LOGO_COMPACT:n(e.LOGO_COMPACT)||""};return t.length?{ok:!1,warnings:t}:{ok:!0,value:d,warnings:[]}}function _(){const e=[],t=O();if(t){const o=E(t);if(o.ok)return{brand:o.value,source:"override",warnings:e};e.push(...o.warnings)}const n=P(),i=y(b,n),r=E(i);return r.ok?{brand:r.value,source:"env",warnings:e}:(e.push(...r.warnings),{brand:b,source:"fallback",warnings:e})}function D(e){const t=O()||{},n=y(t,e),i=E(y(b,n));if(!i.ok)return{ok:!1,warnings:i.warnings};try{return localStorage.setItem(m,JSON.stringify(n)),{ok:!0}}catch(r){return{ok:!1,warnings:["ERR_BRAND_WRITE_FAILED: "+String(r)]}}}function M(){try{localStorage.removeItem(m)}catch{}}const h="icontrol_session_v1";function g(){try{const e=localStorage.getItem(h);if(!e)return null;const t=JSON.parse(e);return!t||typeof t.username!="string"||typeof t.role!="string"?null:t}catch{return null}}function w(e){try{return localStorage.setItem(h,JSON.stringify(e)),!0}catch{return!1}}function C(){try{localStorage.removeItem(h)}catch{}}function T(){return!!g()}const k={sysadmin:{password:"sysadmin",role:"SYSADMIN"},developer:{password:"developer",role:"DEVELOPER"},admin:{password:"admin",role:"ADMIN"},Waldhari:{password:"Dany123456@",role:"DEVELOPER"}};function B(e,t){const n=(e||"").trim(),i=(t||"").toString();if(!n||!i)return{ok:!1,error:"Identifiants requis."};const r=k[n];if(!r||r.password!==i)return{ok:!1,error:"Identifiant invalide."};const o={username:n,role:r.role,issuedAt:Date.now()};return w(o),{ok:!0,session:o}}function F(){C()}function H(){try{const e=g(),t=String(e?.role||"USER").toUpperCase();return t==="ADMIN"||t==="SYSADMIN"||t==="DEVELOPER"?t:"USER"}catch{return"USER"}}function I(){const e=H();return e==="ADMIN"||e==="SYSADMIN"||e==="DEVELOPER"}function L(){return I()}function U(){return window.location.hash||"#/login"}function S(e){const t=U();e.querySelectorAll("a[data-hash]").forEach(n=>{const i=n.getAttribute("data-hash")||"";i&&t.startsWith(i)?n.classList.add("active"):n.classList.remove("active")})}function V(e){const t=document.createElement("div"),n=document.createElement("div");n.className="cxHeader",n.innerHTML=`
/Users/danygaudreault/System_Innovex_CLEAN/iCONTROL/app/dist/assets/index-CNca2_ju.js:4:      <div id="cxBrandTitle">iCONTROL</div>
/Users/danygaudreault/System_Innovex_CLEAN/iCONTROL/app/dist/assets/index-CNca2_ju.js:19:  `;const o=document.createElement("div");o.className="cxMain",o.id="cxMain",t.appendChild(n),t.appendChild(i),t.appendChild(r),t.appendChild(o);const a=r.querySelector("#cxNav");function d(){a.innerHTML="",e.forEach(u=>{if(!u.show())return;const p=document.createElement("a");p.href=u.hash,p.setAttribute("data-hash",u.hash),p.textContent=u.label,a.appendChild(p)});const c=r.querySelector("#cxLogoutLink"),f=r.querySelector("#cxSessionHint");if(T()){c.style.display="inline-block",c.onclick=p=>{p.preventDefault(),F(),window.location.hash="#/login",s()};const u=g();f.textContent=`Connecté: ${String(u?.username||"user")} • Rôle: ${String(u?.role||"USER")}`}else c.style.display="none",f.textContent="Non connecté";S(r)}function l(){i.classList.add("open"),r.classList.add("open"),d()}function s(){i.classList.remove("open"),r.classList.remove("open")}return n.querySelector("#cxBurger").onclick=l,r.querySelector("#cxClose").onclick=s,i.onclick=s,window.addEventListener("hashchange",()=>{d(),S(r)}),{root:t,main:o,setBrandTitle(c){const f=n.querySelector("#cxBrandTitle");f&&(f.textContent=c||"iCONTROL")},closeDrawer:s,rerenderNav:d}}function Y(){return[{id:"dashboard",label:"Dashboard",hash:"#/dashboard",show:()=>!0},{id:"settings",label:"Paramètres",hash:"#/settings",show:()=>I()}]}function R(){const t=((location.hash||"").replace(/^#\/?/,"").split("?")[0]||"").trim();return!t||t==="login"?"login":t==="dashboard"?"dashboard":t==="settings"?L()?"settings":"dashboard":t==="settings/branding"?L()?"settings_branding":"dashboard":"notfound"}function x(e){e.startsWith("#/")?location.hash=e:location.hash="#/"+e.replace(/^#\/?/,"")}function q(){return R()==="login"||T()?!0:(x("#/login"),!1)}function G(){const e=g();return e?`${e.username} (${e.role})`:"Invité"}function X(e){const t=()=>{q()&&e(R())};window.addEventListener("hashchange",t),t()}function $(){return window.__ICONTROL_MOUNT__||document.getElementById("app")||document.body}function W(e){e.innerHTML=`
/Users/danygaudreault/System_Innovex_CLEAN/iCONTROL/app/dist/assets/index-CNca2_ju.js:87:  `,t){const n=e.querySelector("#go_branding");n&&(n.onclick=()=>x("#/settings/branding"))}}function Q(){return g()?.role||"USER"}function Z(){const e=Q();return e==="SYSADMIN"||e==="DEVELOPER"}function ee(e){return e.replace(/[&<>"']/g,t=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[t]||t)}function N(){try{const t=_().brand,n=t.TITLE_SUFFIX&&t.TITLE_SUFFIX.trim()?" "+t.TITLE_SUFFIX.trim():"";document.title=(t.APP_DISPLAY_NAME||"iCONTROL")+n}catch{}}function te(e){if(!e)return;if(!Z()){x("#/dashboard"),e.innerHTML=`
/Users/danygaudreault/System_Innovex_CLEAN/iCONTROL/app/dist/assets/index-CNca2_ju.js:92:    `;return}const n=_().brand.APP_DISPLAY_NAME||"iCONTROL";e.innerHTML=`
/Users/danygaudreault/System_Innovex_CLEAN/iCONTROL/app/dist/assets/index-CNca2_ju.js:113:  `;const i=e.querySelector("#brand_app_name"),r=e.querySelector("#brand_status"),o=e.querySelector("#brand_save"),a=e.querySelector("#brand_reset"),d=s=>{r&&(r.textContent=s)};o&&(o.onclick=()=>{const s=(i?.value||"").trim();if(!s){d("Nom invalide.");return}const c=D({APP_DISPLAY_NAME:s,APP_SHORT_NAME:s});c.ok?(N(),d("Sauvegarde reussie.")):d("Erreur: "+(c.warnings||[]).join(", "))}),a&&(a.onclick=()=>{M();const s=_();i&&(i.value=s.brand.APP_DISPLAY_NAME||"iCONTROL"),N(),d("Reset applique.")});const l=e.querySelector("#back_settings");l&&(l.onclick=s=>{s.preventDefault(),x("#/settings")})}function ne(e,t){if(e==="login")return W(t);if(e==="dashboard")return z(t);if(e==="settings")return K(t);if(e==="settings_branding")return te(t);t.innerHTML='<div style="max-width:980px;margin:40px auto;padding:0 16px;opacity:.8">Page introuvable.</div>'}const v=_();try{const e=v.brand,t=e.TITLE_SUFFIX&&e.TITLE_SUFFIX.trim()?" "+e.TITLE_SUFFIX.trim():"";document.title=(e.APP_DISPLAY_NAME||"iCONTROL")+t,v.warnings&&v.warnings.length&&console.warn("WARN_BRAND_FALLBACK",v.warnings)}catch(e){console.warn("WARN_BRAND_TITLE_FAILED",String(e))}(function(){try{const e=document.getElementById("app")||document.body;try{if(e.dataset&&e.dataset.uiShell==="UI_SHELL_NAV_V1")return;e.dataset.uiShell="UI_SHELL_NAV_V1"}catch{}const t=V(Y());e.innerHTML="",e.appendChild(t.root),window.__ICONTROL_MOUNT__=t.main;try{const n=v.brand;n&&n.APP_DISPLAY_NAME&&t.setBrandTitle(n.APP_DISPLAY_NAME)}catch{}}catch(e){console.error("UI_SHELL_NAV_V1 mount failed",e)}})();function re(e){const t=$();ne(e,t)}queueMicrotask(()=>{X(e=>re(e))});
/Users/danygaudreault/System_Innovex_CLEAN/iCONTROL/app/dist/index.html:6:    <title>iCONTROL</title>
/Users/danygaudreault/System_Innovex_CLEAN/iCONTROL/app/index.html:6:    <title>iCONTROL</title>
/Users/danygaudreault/System_Innovex_CLEAN/iCONTROL/modules/core-system/ui/frontend-ts/pages/settings/branding.ts:35:    document.title = (b.APP_DISPLAY_NAME || "iCONTROL") + suffix;
/Users/danygaudreault/System_Innovex_CLEAN/iCONTROL/modules/core-system/ui/frontend-ts/pages/settings/branding.ts:56:  const currentName = res.brand.APP_DISPLAY_NAME || "iCONTROL";
/Users/danygaudreault/System_Innovex_CLEAN/iCONTROL/modules/core-system/ui/frontend-ts/pages/settings/branding.ts:114:      if (input) input.value = next.brand.APP_DISPLAY_NAME || "iCONTROL";
```
