diff --git a/_RELEASE_NOTES_v0.2.0-rc1.md b/_RELEASE_NOTES_v0.2.0-rc1.md
deleted file mode 100644
index f7150cf..0000000
--- a/_RELEASE_NOTES_v0.2.0-rc1.md
+++ /dev/null
@@ -1,21 +0,0 @@
-# v0.2.0-rc1 ‚Äî Release Candidate
-
-## Scope
-- Subscription: dual-runtime store wiring (Node via import.meta.url; Browser store separate)
-- Vite/Vitest compatibility: prevent Node store from leaking into client build graph
-- Audits: client-surface scan excludes tests/specs; stable exit codes
-
-## Gates (expected GREEN)
-- npm test (app)
-- audit-subscription-no-ui-coupling
-- audit-no-node-builtins-in-app
-- audit-no-node-builtins-in-client-surface
-- npm run build (app)
-- dist/assets: no FileSubscriptionStore* chunks
-
-## Risk / Follow-ups
-- Provider adapter (Stripe/others) to be isolated behind interface; keep enterprise_free fallback
-- Observability: structured logs + metrics around entitlements/registry
-
-## Commit
-- 7829c98
diff --git a/_RELEASE_NOTES_v0.2.0-rc3.md b/_RELEASE_NOTES_v0.2.0-rc3.md
deleted file mode 100644
index 6906863..0000000
--- a/_RELEASE_NOTES_v0.2.0-rc3.md
+++ /dev/null
@@ -1,21 +0,0 @@
-# v0.2.0-rc3-rc3 ‚Äî Release
-
-## Scope
-- Subscription: dual-runtime store wiring (Node via import.meta.url; Browser store separate)
-- Vite/Vitest compatibility: prevent Node store from leaking into client build graph
-- Audits: client-surface scan excludes tests/specs; stable exit codes
-
-## Gates (expected GREEN)
-- npm test (app)
-- audit-subscription-no-ui-coupling
-- audit-no-node-builtins-in-app
-- audit-no-node-builtins-in-client-surface
-- npm run build (app)
-- dist/assets: no FileSubscriptionStore* chunks
-
-## Risk / Follow-ups
-- Provider adapter (Stripe/others) to be isolated behind interface; keep enterprise_free fallback
-- Observability: structured logs + metrics around entitlements/registry
-
-## Commit
-- 1de35cd
diff --git a/_RELEASE_NOTES_v0.2.0-tools1.md b/_RELEASE_NOTES_v0.2.0-tools1.md
deleted file mode 100644
index 935683e..0000000
--- a/_RELEASE_NOTES_v0.2.0-tools1.md
+++ /dev/null
@@ -1,18 +0,0 @@
-# v0.2.0-tools1 ‚Äî ReleaseOps Tooling
-
-## Scope
-- ReleaseOps: add close-the-loop gate script
-- Notes hygiene: normalized commit pointer formatting
-- Release workflow hardening: tag integrity, dist leak check, gh release publish
-
-## Gates
-- TAG integrity (tag -> HEAD)
-- npm test (app)
-- audit-subscription-no-ui-coupling
-- audit-no-node-builtins-in-app
-- audit-no-node-builtins-in-client-surface
-- npm run build (app)
-- dist/assets: no FileSubscriptionStore* chunks
-
-## Commit
-- 04e3743
diff --git a/_RELEASE_NOTES_v0.2.0-tools2.md b/_RELEASE_NOTES_v0.2.0-tools2.md
deleted file mode 100644
index f0256e1..0000000
--- a/_RELEASE_NOTES_v0.2.0-tools2.md
+++ /dev/null
@@ -1,19 +0,0 @@
-# v0.2.0-tools2 ‚Äî ReleaseOps Tooling
-
-## Scope
-- (TODO) Describe scope succinctly (what changed, why it matters)
-
-## Gates (expected GREEN)
-- npm test (app)
-- audit-subscription-no-ui-coupling
-- audit-no-node-builtins-in-app
-- audit-no-node-builtins-in-client-surface
-- npm run build (app)
-- dist/assets: no FileSubscriptionStore* chunks
-
-## Risk / Follow-ups
-- (TODO) Provider adapters isolated behind interface; enterprise_free fallback
-- (TODO) Observability: structured logs + metrics around entitlements/registry
-
-## Commit
-- 2c7484b
diff --git a/_RELEASE_NOTES_v0.2.0-tools3.md b/_RELEASE_NOTES_v0.2.0-tools3.md
deleted file mode 100644
index 56951fd..0000000
--- a/_RELEASE_NOTES_v0.2.0-tools3.md
+++ /dev/null
@@ -1,19 +0,0 @@
-# v0.2.0-tools3 ‚Äî ReleaseOps Tooling
-
-## Scope
-- (TODO) Describe scope succinctly (what changed, why it matters)
-
-## Gates (expected GREEN)
-- npm test (app)
-- audit-subscription-no-ui-coupling
-- audit-no-node-builtins-in-app
-- audit-no-node-builtins-in-client-surface
-- npm run build (app)
-- dist/assets: no FileSubscriptionStore* chunks
-
-## Risk / Follow-ups
-- (TODO) Provider adapters isolated behind interface; enterprise_free fallback
-- (TODO) Observability: structured logs + metrics around entitlements/registry
-
-## Commit
-- 3850438
diff --git a/_RELEASE_NOTES_v0.2.0-tools4.md b/_RELEASE_NOTES_v0.2.0-tools4.md
deleted file mode 100644
index 793b2f9..0000000
--- a/_RELEASE_NOTES_v0.2.0-tools4.md
+++ /dev/null
@@ -1,19 +0,0 @@
-# v0.2.0-tools4 ‚Äî ReleaseOps Tooling
-
-## Scope
-- (TODO) Describe scope succinctly (what changed, why it matters)
-
-## Gates (expected GREEN)
-- npm test (app)
-- audit-subscription-no-ui-coupling
-- audit-no-node-builtins-in-app
-- audit-no-node-builtins-in-client-surface
-- npm run build (app)
-- dist/assets: no FileSubscriptionStore* chunks
-
-## Risk / Follow-ups
-- (TODO) Provider adapters isolated behind interface; enterprise_free fallback
-- (TODO) Observability: structured logs + metrics around entitlements/registry
-
-## Commit
-- eb99f7e
diff --git a/_RELEASE_NOTES_v0.2.0-tools5.md b/_RELEASE_NOTES_v0.2.0-tools5.md
deleted file mode 100644
index 94a822c..0000000
--- a/_RELEASE_NOTES_v0.2.0-tools5.md
+++ /dev/null
@@ -1,19 +0,0 @@
-# v0.2.0-tools5 ‚Äî ReleaseOps Tooling
-
-## Scope
-- (TODO) Describe scope succinctly (what changed, why it matters)
-
-## Gates (expected GREEN)
-- npm test (app)
-- audit-subscription-no-ui-coupling
-- audit-no-node-builtins-in-app
-- audit-no-node-builtins-in-client-surface
-- npm run build (app)
-- dist/assets: no FileSubscriptionStore* chunks
-
-## Risk / Follow-ups
-- (TODO) Provider adapters isolated behind interface; enterprise_free fallback
-- (TODO) Observability: structured logs + metrics around entitlements/registry
-
-## Commit
-- 445122d
diff --git a/_RELEASE_NOTES_v0.2.0-tools6.md b/_RELEASE_NOTES_v0.2.0-tools6.md
deleted file mode 100644
index f9beeda..0000000
--- a/_RELEASE_NOTES_v0.2.0-tools6.md
+++ /dev/null
@@ -1,19 +0,0 @@
-# v0.2.0-tools6 ‚Äî ReleaseOps Tooling
-
-## Scope
-- (TODO) Describe scope succinctly (what changed, why it matters)
-
-## Gates (expected GREEN)
-- npm test (app)
-- audit-subscription-no-ui-coupling
-- audit-no-node-builtins-in-app
-- audit-no-node-builtins-in-client-surface
-- npm run build (app)
-- dist/assets: no FileSubscriptionStore* chunks
-
-## Risk / Follow-ups
-- (TODO) Provider adapters isolated behind interface; enterprise_free fallback
-- (TODO) Observability: structured logs + metrics around entitlements/registry
-
-## Commit
-- c8f3b89
diff --git a/_RELEASE_NOTES_v0.2.0-tools7.md b/_RELEASE_NOTES_v0.2.0-tools7.md
deleted file mode 100644
index d34df84..0000000
--- a/_RELEASE_NOTES_v0.2.0-tools7.md
+++ /dev/null
@@ -1,19 +0,0 @@
-# v0.2.0-tools7 ‚Äî ReleaseOps Tooling
-
-## Scope
-- (TODO) Describe scope succinctly (what changed, why it matters)
-
-## Gates (expected GREEN)
-- npm test (app)
-- audit-subscription-no-ui-coupling
-- audit-no-node-builtins-in-app
-- audit-no-node-builtins-in-client-surface
-- npm run build (app)
-- dist/assets: no FileSubscriptionStore* chunks
-
-## Risk / Follow-ups
-- (TODO) Provider adapters isolated behind interface; enterprise_free fallback
-- (TODO) Observability: structured logs + metrics around entitlements/registry
-
-## Commit
-- 85da8e5
diff --git a/_RELEASE_NOTES_v0.2.0-tools8.md b/_RELEASE_NOTES_v0.2.0-tools8.md
deleted file mode 100644
index 9198282..0000000
--- a/_RELEASE_NOTES_v0.2.0-tools8.md
+++ /dev/null
@@ -1,19 +0,0 @@
-# v0.2.0-tools8 ‚Äî ReleaseOps Tooling
-
-## Scope
-- (TODO) Describe scope succinctly (what changed, why it matters)
-
-## Gates (expected GREEN)
-- npm test (app)
-- audit-subscription-no-ui-coupling
-- audit-no-node-builtins-in-app
-- audit-no-node-builtins-in-client-surface
-- npm run build (app)
-- dist/assets: no FileSubscriptionStore* chunks
-
-## Risk / Follow-ups
-- (TODO) Provider adapters isolated behind interface; enterprise_free fallback
-- (TODO) Observability: structured logs + metrics around entitlements/registry
-
-## Commit
-- c75f8ba
diff --git a/_RELEASE_NOTES_v0.2.0-tools9.md b/_RELEASE_NOTES_v0.2.0-tools9.md
deleted file mode 100644
index 795fe97..0000000
--- a/_RELEASE_NOTES_v0.2.0-tools9.md
+++ /dev/null
@@ -1,19 +0,0 @@
-# v0.2.0-tools9 ‚Äî ReleaseOps Tooling
-
-## Scope
-- (TODO) Describe scope succinctly (what changed, why it matters)
-
-## Gates (expected GREEN)
-- npm test (app)
-- audit-subscription-no-ui-coupling
-- audit-no-node-builtins-in-app
-- audit-no-node-builtins-in-client-surface
-- npm run build (app)
-- dist/assets: no FileSubscriptionStore* chunks
-
-## Risk / Follow-ups
-- (TODO) Provider adapters isolated behind interface; enterprise_free fallback
-- (TODO) Observability: structured logs + metrics around entitlements/registry
-
-## Commit
-- a9f04c8
diff --git a/_RELEASE_NOTES_vX.Y.Z.md b/_RELEASE_NOTES_vX.Y.Z.md
deleted file mode 100644
index d783374..0000000
--- a/_RELEASE_NOTES_vX.Y.Z.md
+++ /dev/null
@@ -1,19 +0,0 @@
-# vX.Y.Z ‚Äî ReleaseOps GA
-
-## Scope
-- (TODO) Describe scope succinctly (what changed, why it matters)
-
-## Gates (expected GREEN)
-- npm test (app)
-- audit-subscription-no-ui-coupling
-- audit-no-node-builtins-in-app
-- audit-no-node-builtins-in-client-surface
-- npm run build (app)
-- dist/assets: no FileSubscriptionStore* chunks
-
-## Risk / Follow-ups
-- (TODO) Provider adapters isolated behind interface; enterprise_free fallback
-- (TODO) Observability: structured logs + metrics around entitlements/registry
-
-## Commit
-- d10d384
diff --git a/_REPORTS/ICONTROL_SYSTEM_ANALYSIS_20260109_170342.md b/_REPORTS/ICONTROL_SYSTEM_ANALYSIS_20260109_170342.md
deleted file mode 100644
index 9593d46..0000000
--- a/_REPORTS/ICONTROL_SYSTEM_ANALYSIS_20260109_170342.md
+++ /dev/null
@@ -1,84 +0,0 @@
-# iCONTROL ‚Äî System Analysis & SafeRender Hardening
-
-- Generated: `20260109_170342`
-- Root: `/Users/danygaudreault/System_Innovex_CLEAN/iCONTROL`
-- Scope: SafeRender contract + anti-regression tests + local gates
-
-## Executive Summary
-
-SafeRender is the last-mile HTML safety gate for the studio runtime (compilePlan -> executePlan -> safeRender -> renderRoute). The current guardrail set is intentionally minimal and already includes the canonical inline-handler pattern. The main regression risk is false positives on harmless text or bypass via HTML attributes and URI schemes. The added unit tests lock the contract around those cases, and local gates now enforce audit + build + test. ROI: reduced security regressions (P0) with low maintenance overhead and immediate CI/local confidence.
-
-## Architecture Map (modules + responsibilities)
-
-- App shell (`app/src`): routing, boot, runtime smoke UI, module loader.
-- Core studio runtime (`app/src/core/studio/runtime`): blueprint compile + plan execution, string-based rendering.
-- Engine (`app/src/core/studio/engine`): SafeRender wrapper + HTML guardrails.
-- Registry (`app/src/core/studio/registry`): builtins + registry defaults/adapters.
-- Core kernel (`core-kernel`, `core-kernel-ts`): shared system primitives (outside app runtime scope).
-- Modules (`modules/*`): feature-specific UIs and domain functionality.
-- Shared (`shared/*`, `ui-shell`, `runtime`): design system, shared UI host layers.
-
-## End-to-End Flow (critical path)
-
-1) `compilePlan` maps blueprint blocks into `RenderPlan` (text + component ops).
-2) `executePlan` renders ops to HTML strings (builtins or registry components).
-3) `safeRender` invokes HTML guards and returns safe HTML or a structured error.
-4) `renderRoute` (app routing) places output in the UI shell.
-
-## Critical Contracts
-
-- SafeRender (`app/src/core/studio/engine/internal/html-guards.ts`):
-  - Minimal denylist to avoid false positives.
-  - Canonical inline handler block: `/<[^>]*\bon\w+\s*=/i`.
-  - Blocks `script` tags and unsafe URI schemes (`javascript:`, `data:text/html`).
-- compilePlan (`app/src/core/studio/runtime/plan.ts`):
-  - Converts blueprint blocks to builtin component ids with props.
-  - Must avoid emitting HTML directly (string-based runtime).
-- executePlan (`app/src/core/studio/runtime/execute.ts`):
-  - Renders builtins to HTML fragments and passes registry outputs through.
-  - Must escape text content and keep builtins SafeRender-compliant.
-- Registry (`app/src/core/studio/registry/*`):
-  - Declares builtin component ids and default registry mapping.
-  - Must avoid inline handlers or unsafe URL schemes.
-
-## Builtins Inventory + HTML Attack Surface
-
-- Builtins: `builtin.table`, `builtin.form`.
-- Attack surface: attribute injection (on*), unsafe href/src schemes, embedded script tags.
-- Current scan indicates no inline handler usage in builtins.
-
-## Findings
-
-### P0
-
-- SafeRender contract was untested for false positives in text or unsafe HTML in tags. This is a regression vector for both security and DX.
-
-### P1
-
-- Local runbooks enforced audit + build but did not gate on tests; low confidence in safety regressions when changes land.
-
-### P2
-
-- Minimal guardrails are appropriate, but the absence of a documented gate or test runner behavior can lead to inconsistent local workflows.
-
-## Actions Proposed (with commands)
-
-- Add unit tests for SafeRender (inline handler blocking, javascript: URLs, text false positive).
-  - `cd app && npm run test`
-- Add vitest run + watch scripts in `app/package.json`.
-- Extend runbook gates to include tests.
-  - `./scripts/runbook/doctor.zsh`
-  - `./scripts/runbook/new-feature.zsh <feature-name>`
-
-## Verification
-
-- `./scripts/audit/audit-no-leaks.zsh`
-- `cd app && npm run build`
-- `cd app && npm run test`
-
-## Diff Summary
-
-- Added SafeRender unit tests: `app/src/core/studio/engine/internal/html-guards.test.ts`.
-- Updated app test scripts: `app/package.json`.
-- Added test gate to runbooks: `scripts/runbook/doctor.zsh`, `scripts/runbook/new-feature.zsh`.
-- Documented local gates: `scripts/runbook/README.md`.
diff --git a/_REPORTS/INDEX.md b/_REPORTS/INDEX.md
deleted file mode 100644
index fca9da3..0000000
--- a/_REPORTS/INDEX.md
+++ /dev/null
@@ -1,37 +0,0 @@
-# _REPORTS ‚Äî Index
-
-Ce fichier est la source of truth des audits ex√©cut√©s (hors artefacts volumineux ignor√©s par Git).
-
-## Derniers rapports (tri√©s par nom)
-
-- ICONTROL_AUDIT_NO_LEAKS_20260109_113718.md
-- ICONTROL_AUDIT_NO_LEAKS_20260109_115733.md
-- ICONTROL_AUDIT_NO_LEAKS_20260109_120609.md
-- ICONTROL_AUDIT_NO_LEAKS_20260109_121339.md
-- ICONTROL_AUDIT_NO_LEAKS_20260109_121438.md
-- ICONTROL_AUDIT_NO_LEAKS_20260109_121703.md
-- ICONTROL_AUDIT_NO_LEAKS_20260109_121849.md
-- ICONTROL_AUDIT_NO_LEAKS_20260109_122009.md
-- ICONTROL_AUDIT_NO_LEAKS_20260109_122110.md
-- ICONTROL_AUDIT_NO_LEAKS_20260109_122255.md
-- ICONTROL_AUDIT_NO_LEAKS_20260109_122256.md
-- ICONTROL_AUDIT_NO_LEAKS_20260109_122538.md
-- ICONTROL_AUDIT_NO_LEAKS_20260109_122622.md
-- ICONTROL_AUDIT_NO_LEAKS_20260109_122744.md
-- ICONTROL_AUDIT_NO_LEAKS_20260109_122844.md
-- ICONTROL_AUDIT_NO_LEAKS_20260109_123042.md
-- ICONTROL_AUDIT_NO_LEAKS_20260109_123043.md
-- ICONTROL_AUDIT_NO_LEAKS_20260109_123133.md
-- ICONTROL_AUDIT_NO_LEAKS_20260109_123450.md
-- ICONTROL_AUDIT_NO_LEAKS_20260109_123621.md
-- ICONTROL_AUDIT_NO_LEAKS_20260109_123720.md
-- ICONTROL_AUDIT_NO_LEAKS_20260109_123825.md
-- ICONTROL_AUDIT_NO_LEAKS_20260109_124012.md
-- ICONTROL_AUDIT_NO_LEAKS_20260109_124013.md
-- ICONTROL_AUDIT_NO_LEAKS_20260109_124127.md
-- ICONTROL_AUDIT_NO_LEAKS_20260109_124242.md
-- ICONTROL_AUDIT_NO_LEAKS_20260109_124243.md
-- ICONTROL_AUDIT_NO_REPORTS_20260109_105930.md
-- ICONTROL_AUDIT_NO_SELF_MATCH_20260109_110626.md
-- ICONTROL_AUDIT_POST_20260109_105356.md
-
diff --git a/app/index.html b/app/index.html
index ef52787..ecaa8ef 100644
--- a/app/index.html
+++ b/app/index.html
@@ -3,10 +3,23 @@
   <head>
     <meta charset="UTF-8" />
     <meta name="viewport" content="width=device-width, initial-scale=1.0" />
+    <meta name="description" content="iCONTROL - Application de contr√¥le et administration" />
+    <meta name="theme-color" content="#7b2cff" />
+    <link rel="manifest" href="/manifest.json" />
     <title>iCONTROL</title>
   </head>
   <body>
     <div id="app"></div>
     <script type="module" src="/src/main.ts"></script>
+    <script>
+      // Enregistrer Service Worker pour PWA
+      if ('serviceWorker' in navigator) {
+        window.addEventListener('load', () => {
+          navigator.serviceWorker.register('/sw.js')
+            .then(reg => console.log('Service Worker registered:', reg))
+            .catch(err => console.warn('Service Worker registration failed:', err));
+        });
+      }
+    </script>
   </body>
 </html>
diff --git a/app/package.json b/app/package.json
index 4466446..c6c61d3 100644
--- a/app/package.json
+++ b/app/package.json
@@ -11,12 +11,14 @@
     "lint": "eslint .",
     "test": "vitest run",
     "test:watch": "vitest",
+    "test:coverage": "vitest run --coverage",
     "typecheck": "tsc --noEmit"
   },
   "dependencies": {
     "@icontrol/design-system": "file:../shared/design-system"
   },
   "devDependencies": {
+    "@types/node": "^20.0.0",
     "eslint": "^8.56.0",
     "jsdom": "^27.4.0",
     "typescript": "^5.3.0",
diff --git a/app/src/__tests__/access-guard.contract.test.ts b/app/src/__tests__/access-guard.contract.test.ts
index fcc240f..8b339e8 100644
--- a/app/src/__tests__/access-guard.contract.test.ts
+++ b/app/src/__tests__/access-guard.contract.test.ts
@@ -51,10 +51,16 @@ test("requireEntitlement emits audit WARN when entitlement missing", () => {
 
   const events = readAuditLog();
   expect(events.length).toBe(1);
-  expect(events[0].level).toBe("WARN");
-  expect(events[0].code).toBe("WARN_ACCESS_DENIED_ENTITLEMENT");
-  expect(events[0].meta.entitlement).toBe("recommendations.pro");
-  expect(events[0].meta.page).toBe("/dashboard");
+  const event = events[0];
+  expect(event).toBeDefined();
+  if (event) {
+    expect(event.level).toBe("WARN");
+    expect(event.code).toBe("WARN_ACCESS_DENIED_ENTITLEMENT");
+    if (event.meta) {
+      expect(event.meta.entitlement).toBe("recommendations.pro");
+      expect(event.meta.page).toBe("/dashboard");
+    }
+  }
 });
 
 test("requireEntitlement ok=true when entitlement present", () => {
diff --git a/app/src/__tests__/app-login.session-scope.contract.test.ts b/app/src/__tests__/app-login.session-scope.contract.test.ts
index 9e56598..5b370cb 100644
--- a/app/src/__tests__/app-login.session-scope.contract.test.ts
+++ b/app/src/__tests__/app-login.session-scope.contract.test.ts
@@ -49,8 +49,8 @@ describe("APP login session scope (contract)", () => {
     }
   });
 
-  it("writes only APP session key and Path=/app cookie", () => {
-    const res = authenticate("admin", "admin");
+  it("writes only APP session key and Path=/app cookie", async () => {
+    const res = await authenticate("admin", "admin");
     expect(res.ok).toBe(true);
 
     expect(localStorage.getItem("icontrol_session_v1")).toBeTruthy();
diff --git a/app/src/__tests__/auditlog-entitlements.contract.test.ts b/app/src/__tests__/auditlog-entitlements.contract.test.ts
index 93a6fa9..fde374a 100644
--- a/app/src/__tests__/auditlog-entitlements.contract.test.ts
+++ b/app/src/__tests__/auditlog-entitlements.contract.test.ts
@@ -37,8 +37,13 @@ test("missing PRO entitlement appends WARN audit event", () => {
   const events = readAuditLog();
   expect(events.length).toBeGreaterThan(0);
   const last = events[events.length - 1];
-  expect(last.level).toBe("WARN");
-  expect(last.code).toBe(WARN_ENTITLEMENTS_MISSING_PRO);
-  expect(last.scope).toBe("entitlements");
-  expect(last.meta.route).toBe("/dashboard");
+  expect(last).toBeDefined();
+  if (last) {
+    expect(last.level).toBe("WARN");
+    expect(last.code).toBe(WARN_ENTITLEMENTS_MISSING_PRO);
+    expect(last.scope).toBe("entitlements");
+    if (last.meta) {
+      expect(last.meta.route).toBe("/dashboard");
+    }
+  }
 });
diff --git a/app/src/__tests__/auth-cookie.samesite-strict.contract.test.ts b/app/src/__tests__/auth-cookie.samesite-strict.contract.test.ts
index 865a246..580789b 100644
--- a/app/src/__tests__/auth-cookie.samesite-strict.contract.test.ts
+++ b/app/src/__tests__/auth-cookie.samesite-strict.contract.test.ts
@@ -28,8 +28,8 @@ describe("auth cookies use SameSite=Strict and are scoped by Path", () => {
     });
   });
 
-  it("APP writes cookie with Path=/app and SameSite=Strict", () => {
-    const res = authenticate("admin", "admin", "APP");
+  it("APP writes cookie with Path=/app and SameSite=Strict", async () => {
+    const res = await authenticate("admin", "admin", "APP");
     expect(res.ok).toBe(true);
     expect(document.cookie).toContain("icontrol_session_v1=1");
     expect(document.cookie).toContain("Path=/app");
@@ -40,8 +40,8 @@ describe("auth cookies use SameSite=Strict and are scoped by Path", () => {
     logout("APP");
   });
 
-  it("CP writes cookie with Path=/cp and SameSite=Strict (management key)", () => {
-    const res = authenticateManagement("admin", "admin");
+  it("CP writes cookie with Path=/cp and SameSite=Strict (management key)", async () => {
+    const res = await authenticateManagement("admin", "admin");
     expect(res.ok).toBe(true);
     expect(document.cookie).toContain("icontrol_mgmt_session_v1=1");
     expect(document.cookie).toContain("Path=/cp");
diff --git a/app/src/__tests__/cp-login.session-scope.contract.test.ts b/app/src/__tests__/cp-login.session-scope.contract.test.ts
index 7933407..434751e 100644
--- a/app/src/__tests__/cp-login.session-scope.contract.test.ts
+++ b/app/src/__tests__/cp-login.session-scope.contract.test.ts
@@ -49,8 +49,8 @@ describe("CP login session scope (contract)", () => {
     }
   });
 
-  it("writes only CP session key and Path=/cp cookie", () => {
-    const res = authenticateManagement("admin", "admin");
+  it("writes only CP session key and Path=/cp cookie", async () => {
+    const res = await authenticateManagement("admin", "admin");
     expect(res.ok).toBe(true);
 
     expect(localStorage.getItem("icontrol_mgmt_session_v1")).toBeTruthy();
diff --git a/app/src/localAuth.ts b/app/src/localAuth.ts
index b90e3aa..8ad70ec 100644
--- a/app/src/localAuth.ts
+++ b/app/src/localAuth.ts
@@ -1,10 +1,14 @@
 import { navigate } from "./runtime/navigate";
+import { checkRateLimit, recordFailedAttempt, resetRateLimit } from "./core/security/rateLimiter";
+import { sessionManager } from "./core/session/sessionManager";
+import { isSecureUser, verifySecureUserPassword, getSecureUserData, updateSecureUserData } from "./core/security/userData";
 /**
  * localAuth.ts ‚Äî bootstrap auth for dev/local use
  * - No network
  * - Minimal surface: getSession / setSession / clearSession / isLoggedIn
+ * - ICONTROL_SECURE_AUTH_V1: Int√©gration de la s√©curit√© renforc√©e pour utilisateurs critiques
  */
-export type Role = "USER" | "ADMIN" | "SYSADMIN" | "DEVELOPER";
+export type Role = "USER" | "ADMIN" | "SYSADMIN" | "DEVELOPER" | "MASTER";
 
 export type Session = {
   username: string;
@@ -124,33 +128,182 @@ export function isLoggedIn(scope: AuthScope = resolveAuthScope()): boolean {
 /**
  * Local bootstrap users (temporary).
  * Replace later with platform-services/security/auth.
+ * ICONTROL_USERS_V1: Utilisateurs syst√®me
+ * - Administration (CP): Master, Developpeur, WaldHari (s√©curis√©)
+ * - Client (APP): SYSAdmin, Admin, Utilisateur
+ * 
+ * NOTE: Les utilisateurs critiques (WaldHari, Master) utilisent le syst√®me de hachage s√©curis√©
+ * et sont g√©r√©s via userData.ts. Les autres utilisateurs utilisent des mots de passe simples
+ * pour le d√©veloppement.
  */
 const BOOTSTRAP_USERS: Record<string, { password: string; role: Role }> = {
-  sysadmin: { password: "sysadmin", role: "SYSADMIN" },
-  developer: { password: "developer", role: "DEVELOPER" },
-  admin: { password: "admin", role: "ADMIN" },
-  Waldhari: { password: "Dany123456@", role: "DEVELOPER" },
+  // Utilisateurs Administration (CP)
+  Master: { password: "1234", role: "MASTER" },
+  Developpeur: { password: "1234", role: "DEVELOPER" },
+  // WaldHari est g√©r√© via userData.ts avec s√©curit√© renforc√©e
+  // Utilisateurs Client (APP)
+  SYSAdmin: { password: "1234", role: "SYSADMIN" },
+  Admin: { password: "1234", role: "ADMIN" },
+  Utilisateur: { password: "1234", role: "USER" },
 };
 
-export function authenticate(
+// ICONTROL_USER_INDEX_V1: Index optimis√© pour recherche rapide (insensible √† la casse)
+// Inclut les utilisateurs s√©curis√©s (WaldHari, etc.)
+const USER_INDEX: Map<string, string> = (() => {
+  const index = new Map<string, string>();
+  for (const key of Object.keys(BOOTSTRAP_USERS)) {
+    index.set(key.toLowerCase(), key);
+  }
+  // Ajouter les utilisateurs s√©curis√©s
+  if (isSecureUser("WaldHari")) {
+    index.set("waldhari", "WaldHari");
+  }
+  return index;
+})();
+
+/**
+ * V√©rifie si on est en mode d√©veloppement
+ */
+function isDevMode(): boolean {
+  try {
+    if (typeof import.meta !== "undefined" && (import.meta as any).env?.DEV) {
+      return true;
+    }
+    // eslint-disable-next-line @typescript-eslint/no-explicit-any
+    if (typeof (globalThis as any).process !== "undefined" && (globalThis as any).process?.env?.NODE_ENV !== "production") {
+      return true;
+    }
+    return false;
+  } catch {
+    return false;
+  }
+}
+
+export async function authenticate(
   username: string,
   password: string,
   scope: AuthScope = resolveAuthScope(),
-): { ok: true; session: Session } | { ok: false; error: string } {
+): Promise<{ ok: true; session: Session } | { ok: false; error: string }> {
   const u = (username || "").trim();
-  const p = (password || "").toString();
+  const p = (password || "").toString().trim();
   if (!u || !p) return { ok: false, error: "Identifiants requis." };
 
-  const hit = BOOTSTRAP_USERS[u];
-  if (!hit || hit.password !== p)
-    return { ok: false, error: "Identifiant invalide." };
+  // ICONTROL_RATE_LIMITING_V1: V√©rifier le rate limiting avant l'authentification
+  const rateLimitCheck = checkRateLimit(u);
+  if (!rateLimitCheck.allowed) {
+    return { ok: false, error: rateLimitCheck.error || "Trop de tentatives. Veuillez r√©essayer plus tard." };
+  }
+
+  // ICONTROL_CASE_INSENSITIVE_USERNAME_V1: Username insensible √† la casse
+  // ICONTROL_USER_INDEX_V1: Utiliser l'index pour recherche O(1) au lieu de O(n)
+  const uLower = u.toLowerCase();
+  const matchingKey = USER_INDEX.get(uLower);
+  
+  if (!matchingKey) {
+    // ICONTROL_SECURE_ERROR_MESSAGE_V1: Message d'erreur g√©n√©rique en production
+    const devMode = isDevMode();
+    const errorMsg = devMode
+      ? `Identifiant invalide. Utilisateurs disponibles: ${Array.from(USER_INDEX.values()).join(", ")}`
+      : "Identifiant ou mot de passe incorrect.";
+    recordFailedAttempt(u); // Enregistrer la tentative √©chou√©e
+    return { ok: false, error: errorMsg };
+  }
+
+  // ICONTROL_SECURE_USER_AUTH_V1: V√©rification pour utilisateurs s√©curis√©s (WaldHari, etc.)
+  if (isSecureUser(matchingKey)) {
+    const isValid = await verifySecureUserPassword(matchingKey, p);
+    if (!isValid) {
+      recordFailedAttempt(matchingKey);
+      const userData = getSecureUserData(matchingKey);
+      if (userData) {
+        userData.failedLoginAttempts += 1;
+        updateSecureUserData(matchingKey, userData);
+      }
+      return { ok: false, error: "Identifiant ou mot de passe incorrect." };
+    }
+
+    // Connexion r√©ussie pour utilisateur s√©curis√©
+    resetRateLimit(matchingKey);
+    const userData = getSecureUserData(matchingKey);
+    if (userData) {
+      userData.failedLoginAttempts = 0;
+      userData.lastLogin = new Date().toISOString();
+      updateSecureUserData(matchingKey, userData);
+    }
+
+    // ICONTROL_CP_RESTRICTED_ROLES_V1: V√©rifier l'acc√®s CP
+    if (scope === "CP") {
+      const cpAllowedUsers = ["Master", "Developpeur", "WaldHari"];
+      if (!cpAllowedUsers.includes(matchingKey)) {
+        return { ok: false, error: "Seuls les r√¥les Master et Developpeur peuvent acc√©der √† l'administration." };
+      }
+    }
 
+    const session: Session = {
+      username: matchingKey,
+      role: userData?.role || "MASTER",
+      issuedAt: Date.now(),
+    };
+    setSession(session, scope);
+    // Cr√©er une session active pour le session manager
+    sessionManager.createSession(matchingKey, {
+      ip: (window as any).clientIP || "unknown",
+      userAgent: navigator.userAgent
+    });
+    return { ok: true, session };
+  }
+
+  // Authentification pour utilisateurs bootstrap (non s√©curis√©s)
+  const hit = BOOTSTRAP_USERS[matchingKey];
+  if (!hit) {
+    recordFailedAttempt(matchingKey);
+    return { ok: false, error: "Erreur: utilisateur trouv√© mais donn√©es manquantes." };
+  }
+  
+  if (hit.password !== p) {
+    recordFailedAttempt(matchingKey);
+    // ICONTROL_SECURE_ERROR_MESSAGE_V1: Message g√©n√©rique m√™me en dev pour mot de passe
+    return { ok: false, error: "Identifiant ou mot de passe incorrect." };
+  }
+
+  // Connexion r√©ussie pour utilisateur bootstrap
+  resetRateLimit(matchingKey);
+
+  // ICONTROL_CP_RESTRICTED_ROLES_V1: Restriction CP aux r√¥les Master, Developpeur et WaldHari
+  if (scope === "CP") {
+    const cpAllowedUsers = ["Master", "Developpeur", "WaldHari"];
+    if (!cpAllowedUsers.includes(matchingKey)) {
+      return { ok: false, error: "Seuls les r√¥les Master et Developpeur peuvent acc√©der √† l'administration." };
+    }
+  }
+
+  // ICONTROL_MASTER_ROLE_MAPPING_V1: Mapper MASTER √† SYSADMIN pour compatibilit√© interne
+  // mais garder la trace que c'est Master via le username
+  let sessionRole: Role = hit.role;
+  if (matchingKey === "Master" && hit.role === "MASTER") {
+    sessionRole = "SYSADMIN" as Role; // Mapper √† SYSADMIN pour compatibilit√©
+  }
+  
+  // ICONTROL_MASTER_ROLE_V1: Master garde son r√¥le MASTER dans la session
+  // mais on le mappe √† SYSADMIN pour compatibilit√© avec le syst√®me existant
+  let finalRole: Role = sessionRole;
+  if (matchingKey === "Master" && hit.role === "MASTER") {
+    // Garder MASTER dans la session pour identification, mais utiliser SYSADMIN pour compatibilit√©
+    finalRole = "SYSADMIN" as Role;
+  }
+  
+  // Utiliser le username original (avec la casse de la base de donn√©es)
   const session: Session = {
-    username: u,
-    role: hit.role,
+    username: matchingKey,
+    role: finalRole,
     issuedAt: Date.now(),
   };
   setSession(session, scope);
+  // Cr√©er une session active pour le session manager
+  sessionManager.createSession(matchingKey, {
+    ip: (window as any).clientIP || "unknown",
+    userAgent: navigator.userAgent
+  });
   return { ok: true, session };
 }
 
@@ -158,6 +311,14 @@ export function logout(scope: AuthScope = resolveAuthScope()): void {
   clearSession(scope);
 }
 
+export function requireSession(scope: AuthScope = resolveAuthScope()): Session {
+  const s = getSession(scope);
+  if (!s) {
+    throw new Error("Session requise mais non disponible");
+  }
+  return s;
+}
+
 export function getManagementSession(): Session | null {
   return getSession("CP");
 }
@@ -174,10 +335,10 @@ export function isManagementLoggedIn(): boolean {
   return isLoggedIn("CP");
 }
 
-export function authenticateManagement(
+export async function authenticateManagement(
   username: string,
   password: string,
-): { ok: true; session: Session } | { ok: false; error: string } {
+): Promise<{ ok: true; session: Session } | { ok: false; error: string }> {
   return authenticate(username, password, "CP");
 }
 
diff --git a/app/src/main.ts b/app/src/main.ts
index de943de..9e81f81 100644
--- a/app/src/main.ts
+++ b/app/src/main.ts
@@ -3,8 +3,35 @@ import {
   createShell,
   getDefaultNavItems,
 } from "../../platform-services/ui-shell/layout/shell";
+import { createCPToolboxShell, CPNavTab, CPSidebarSection } from "./core/layout/cpToolboxShell";
+import { getAppKind } from "./pages/appContext";
+import { isLoggedIn, getSession } from "./localAuth";
+import { canAccessPageRoute, getRole } from "./runtime/rbac";
+import { getSafeMode } from "../../modules/core-system/ui/frontend-ts/pages/_shared/safeMode";
+// ICONTROL_SHELL_CSS_IMPORT_V1: Import explicit du CSS du shell pour s'assurer qu'il est charg√©
+import "../../platform-services/ui-shell/layout/shell.css";
+// ICONTROL_CP_TOOLBOX_SHELL_CSS_V1: Import du CSS du nouveau shell Toolbox pour CP
+import "./core/layout/cpToolboxShell.css";
+// ICONTROL_RESPONSIVE_CSS_V1: Import du CSS responsive
+import "./core/responsive/responsive.css";
 import { applyThemeTokensToCSSVars } from "../../modules/core-system/ui/frontend-ts/pages/_shared/themeCssVars";
 import { registerRuntimeConfigEndpoint } from "./core/runtime/runtimeConfigEndpoint";
+import { debugLog, warnLog, errorLog } from "./core/utils/logger";
+import { bootRouter, RouteId, getMountEl } from "./router";
+import { renderRoute } from "./moduleLoader";
+import { updateAllLogos, setupLogoThemeObserver } from "./core/branding/logoManager";
+import { initKeyboardShortcuts } from "./core/ui/keyboardShortcuts";
+import { checkVersionGateAPI } from "./core/release/versionGate";
+import { showUpdateModal } from "./core/ui/updateModal";
+import { themeManager } from "./core/themes/themeManager";
+import { systemMetrics } from "./core/monitoring/systemMetrics";
+import { initAccessibility } from "./core/ui/accessibility";
+import { errorTracker } from "./core/errors/errorTracker";
+import { onboardingManager } from "./core/ui/onboarding";
+import { gracefulDegradation } from "./core/degradation/gracefulDegradation";
+import { performanceBudgetManager } from "./core/performance/performanceBudget";
+import { initializeCommandPalette } from "./core/ui/commandPalette";
+
 /* UI_SHELL_NAV_V1 */
 // ICONTROL_BRAND_TITLE_V1
 const __br = getBrandResolved();
@@ -14,16 +41,13 @@ try {
     b.TITLE_SUFFIX && b.TITLE_SUFFIX.trim() ? " " + b.TITLE_SUFFIX.trim() : "";
   document.title = (b.APP_DISPLAY_NAME || "iCONTROL") + suffix;
   if (__br.warnings && __br.warnings.length) {
-    console.warn("WARN_BRAND_FALLBACK", __br.warnings);
+    warnLog("WARN_BRAND_FALLBACK", __br.warnings);
   }
 } catch (e) {
-  console.warn("WARN_BRAND_TITLE_FAILED", String(e));
+  warnLog("WARN_BRAND_TITLE_FAILED", String(e));
 }
 // END ICONTROL_BRAND_TITLE_V1
 
-import { bootRouter, RouteId, getMountEl } from "./router";
-import { renderRoute } from "./moduleLoader";
-
 /* ICONTROL_APP_CP_GUARD_V1 */
 function __icontrol_resolveAppKind(): "APP" | "CP" {
   // 1) .env build-time (si existant)
@@ -88,6 +112,26 @@ __icontrol_guardAppVsCp();
     // ICONTROL_THEME_CSSVARS_BOOTSTRAP_V1
     // ICONTROL_THEME_CSSVARS_V1: apply tokens before any page render
     applyThemeTokensToCSSVars(document);
+    // ICONTROL_THEME_MANAGER_INIT_V1: Initialiser le gestionnaire de th√®mes
+    themeManager.initialize();
+    // ICONTROL_MONITORING_INIT_V1: D√©marrer la collecte de m√©triques syst√®me
+    systemMetrics.startCollection(5000);
+    // ICONTROL_ACCESSIBILITY_INIT_V1: Initialiser accessibilit√© WCAG 2.1 AA
+    initAccessibility();
+    // ICONTROL_ERROR_TRACKER_INIT_V1: Initialiser error tracking avanc√©
+    errorTracker.init();
+    // ICONTROL_GRACEFUL_DEGRADATION_INIT_V1: Initialiser graceful degradation
+    gracefulDegradation.init();
+    // ICONTROL_PERFORMANCE_BUDGET_INIT_V1: D√©marrer performance budget monitoring
+    setTimeout(() => performanceBudgetManager.collectMetrics(), 3000);
+    // ICONTROL_COMMAND_PALETTE_INIT_V1: Initialiser command palette (‚åòK / Ctrl+K)
+    initializeCommandPalette();
+    // ICONTROL_ONBOARDING_INIT_V1: V√©rifier si tour d'onboarding n√©cessaire
+    if (!onboardingManager.isTourCompleted("welcome")) {
+      setTimeout(() => {
+        onboardingManager.startTour("welcome").catch(console.warn);
+      }, 2000);
+    }
     // ICONTROL_RUNTIME_CONFIG_SHIM_BOOT_GUARD_V1
     try {
       // eslint-disable-next-line @typescript-eslint/no-explicit-any
@@ -113,40 +157,186 @@ __icontrol_guardAppVsCp();
       }
     } catch (_) {}
 
-    const shell = createShell(getDefaultNavItems());
-    appRoot.innerHTML = "";
-    appRoot.appendChild(shell.root);
+    const appKind = getAppKind();
+    let shell: any;
+    let mountEl: HTMLElement;
+
+    // ICONTROL_CP_TOOLBOX_SHELL_V1: Utiliser le nouveau shell style Developer Toolbox pour CP
+    if (appKind === "CP") {
+      // Cr√©er les tabs pour la navigation sup√©rieure (aucun tab pour l'instant)
+      const tabs: CPNavTab[] = [];
+
+      // Sections de la sidebar simplifi√©es (le sidebar utilise maintenant un menu simple)
+      const sidebarSections: CPSidebarSection[] = [];
+
+      // Cr√©er la zone de contenu
+      const contentArea = document.createElement("div");
+      contentArea.id = "cxMain";
+      contentArea.className = "cxMain";
+      contentArea.style.cssText = `
+        flex: 1;
+        overflow: auto;
+        padding: 0;
+        width: 100%;
+        max-width: 100%;
+        height: 100%;
+        margin: 0;
+        background: var(--ic-bg, #0f1112);
+        box-sizing: border-box;
+      `;
+
+      const toolboxShell = createCPToolboxShell({
+        tabs: tabs.filter(t => t.show()),
+        sidebarSections,
+        contentArea,
+      });
+
+      appRoot.innerHTML = "";
+      appRoot.appendChild(toolboxShell);
+
+      mountEl = contentArea;
+      shell = {
+        root: toolboxShell,
+        main: contentArea,
+        setBrandTitle: (title: string) => {
+          const titleEl = toolboxShell.querySelector(".icontrol-cp-brand-title, .icontrol-cp-title");
+          if (titleEl) titleEl.textContent = title || "Console";
+        },
+        closeDrawer: () => {},
+        rerenderNav: () => {},
+      };
+    } else {
+      // APP: utiliser l'ancien shell
+      shell = createShell(getDefaultNavItems());
+      mountEl = shell.main;
+      appRoot.innerHTML = "";
+      appRoot.appendChild(shell.root);
+    }
+
+    debugLog("üü° Shell cr√©√©", { appKind, id: mountEl.id, className: mountEl.className });
 
     // expose mount target for router/pages
-    (window as any).__ICONTROL_MOUNT__ = shell.main;
+    (window as any).__ICONTROL_MOUNT__ = mountEl;
+    debugLog("‚úÖ __ICONTROL_MOUNT__ d√©fini");
 
     try {
       const b = __br.brand;
-      if (b && b.APP_DISPLAY_NAME) shell.setBrandTitle(b.APP_DISPLAY_NAME);
+      if (b && b.APP_DISPLAY_NAME) shell.setBrandTitle("Console");
     } catch (_) {}
+    
+    // ICONTROL_LOGO_INIT_V1: Initialiser les logos apr√®s le montage du shell
+    try {
+      updateAllLogos();
+      setupLogoThemeObserver();
+    } catch (e) {
+      warnLog("WARN_LOGO_INIT_FAILED", String(e));
+    }
+    
+    // ICONTROL_KEYBOARD_SHORTCUTS_V1: Initialiser les raccourcis clavier
+    try {
+      initKeyboardShortcuts();
+      debugLog("‚úÖ Raccourcis clavier initialis√©s");
+    } catch (e) {
+      warnLog("WARN_KEYBOARD_SHORTCUTS_INIT_FAILED", String(e));
+    }
   } catch (e) {
-    console.error("UI_SHELL_NAV_V1 mount failed", e);
+    errorLog("UI_SHELL_NAV_V1 mount failed", e);
   }
 })();
 
 function renderShell(rid: RouteId): void {
   const mount = getMountEl();
+  debugLog("üü¢ renderShell appel√©", { route: rid, mountId: mount?.id });
+  if (!mount) {
+    errorLog("‚ùå ERREUR: √âl√©ment de montage (mount) introuvable");
+    return;
+  }
   renderRoute(rid, mount);
+  debugLog("‚úÖ renderShell termin√©", { length: mount.innerHTML?.length || 0 });
 }
 
 // UI_SHELL_NAV_V1_BOOT: ensure shell mount is completed before first route render
-queueMicrotask(() => {
-  /* RUNTIME_SMOKE_TOGGLE_V1 */
+async function startApp() {
   try {
-    const __q = new URLSearchParams(window.location.search);
-    if (__q.get("runtime") === "1") {
-      const mount = getMountEl();
-      import("./pages/runtime-smoke").then((m) => m.renderRuntimeSmoke(mount));
+    // V√©rifier que le DOM est pr√™t
+    if (typeof document === "undefined" || !document.getElementById("app")) {
+      // Si le DOM n'est pas pr√™t, attendre
+      if (typeof window !== "undefined" && document.readyState === "loading") {
+        document.addEventListener("DOMContentLoaded", startApp);
+        return;
+      }
+      // Fallback: attendre un peu
+      setTimeout(startApp, 100);
       return;
     }
+
+    // ICONTROL_VERSION_GATE_V1: V√©rifier la version avant de d√©marrer
+    try {
+      const versionGate = await checkVersionGateAPI();
+      if (versionGate.requiresUpdate) {
+        showUpdateModal(versionGate);
+        // Ne pas d√©marrer l'application si mise √† jour requise
+        return;
+      }
+    } catch (e) {
+      warnLog("WARN_VERSION_GATE_CHECK_FAILED", String(e));
+      // Continuer m√™me si la v√©rification √©choue (fail-safe)
+    }
+
+          /* RUNTIME_SMOKE_TOGGLE_V1 */
+          try {
+            const __q = new URLSearchParams(window.location.search);
+            if (__q.get("runtime") === "1") {
+              const mount = getMountEl();
+              import("./pages/runtime-smoke").then((m) => m.renderRuntimeSmoke(mount));
+              return;
+            }
+          } catch (e) {
+            warnLog("WARN_RUNTIME_SMOKE_TOGGLE", String(e));
+          }
+
+    bootRouter((rid) => renderShell(rid));
+    
+    // Appliquer les modifications publi√©es apr√®s le chargement de la page
+    setTimeout(() => {
+      import("./core/pageEditor/pageModificationManager").then(({ applyPublishedModifications }) => {
+        applyPublishedModifications();
+      }).catch(() => {
+        // Ignorer si le module n'est pas disponible
+      });
+    }, 1000);
   } catch (e) {
-    console.warn("WARN_RUNTIME_SMOKE_TOGGLE", String(e));
+    errorLog("‚ùå ERREUR lors du d√©marrage de l'application:", e);
+    const appRoot = document.getElementById("app");
+    if (appRoot) {
+      appRoot.innerHTML = `
+        <div style="padding:40px;text-align:center;font-family:system-ui;color:var(--ic-text, #e9e9e9);">
+          <h2>Erreur de d√©marrage</h2>
+          <p>Une erreur est survenue lors du chargement de l'application.</p>
+          <pre style="text-align:left;margin:20px auto;max-width:600px;padding:20px;background:var(--ic-panel, #2b2b2b);border-radius:8px;overflow:auto;">
+${String(e)}
+${(e as any)?.stack ? "\n\n" + String((e as any).stack) : ""}
+          </pre>
+          <button onclick="location.reload()" style="margin-top:20px;padding:10px 20px;border-radius:8px;background:var(--ic-accent2, #94b83b);color:var(--ic-text, #e9e9e9);border:none;cursor:pointer;font-weight:bold;">
+            Recharger la page
+          </button>
+        </div>
+      `;
+    }
   }
+}
 
-  bootRouter((rid) => renderShell(rid));
-});
+// D√©marrer l'application quand le DOM est pr√™t
+if (typeof document !== "undefined") {
+  if (document.readyState === "loading") {
+    document.addEventListener("DOMContentLoaded", startApp);
+  } else {
+    // DOM d√©j√† charg√©, d√©marrer imm√©diatement
+    queueMicrotask(startApp);
+  }
+} else {
+  // Fallback si document n'est pas disponible
+  if (typeof window !== "undefined") {
+    window.addEventListener("load", startApp);
+  }
+}
diff --git a/app/src/moduleLoader.ts b/app/src/moduleLoader.ts
index fe09fd4..f666c61 100644
--- a/app/src/moduleLoader.ts
+++ b/app/src/moduleLoader.ts
@@ -1,11 +1,31 @@
 import type { RouteId } from "./router";
+import { getAppKind } from "./pages/appContext";
+import { canAccessPageRoute } from "./runtime/rbac";
+import { debugLog, warnLog } from "./core/utils/logger";
+import { getSession } from "./localAuth";
 
-// Import module pages (single source of truth)
-import { renderLogin } from "../../modules/core-system/ui/frontend-ts/pages/login";
-import { renderDashboard } from "../../modules/core-system/ui/frontend-ts/pages/dashboard";
-import { renderSettingsPage } from "../../modules/core-system/ui/frontend-ts/pages/settings";
-import { renderBrandingSettings } from "../../modules/core-system/ui/frontend-ts/pages/settings/branding";
-import { canAccessToolbox } from "./runtime/rbac";
+// Import APP pages (client)
+import { renderLogin as renderLoginApp } from "./pages/app/login";
+import { renderDashboard as renderDashboardApp } from "./pages/app/dashboard";
+import { renderSystemPage as renderSystemPageApp } from "./pages/app/system";
+import { renderSettingsPage as renderSettingsPageApp } from "./pages/app/settings";
+import { renderUsers as renderUsersApp } from "./pages/app/users";
+import { renderAccount as renderAccountApp } from "./pages/app/account";
+
+// Import CP pages (administration)
+import { renderLogin as renderLoginCp } from "./pages/cp/login";
+import { renderDashboard as renderDashboardCp } from "./pages/cp/dashboard";
+import { renderSystemPage as renderSystemPageCp } from "./pages/cp/system";
+import { renderSettingsPage as renderSettingsPageCp } from "./pages/cp/settings";
+import { renderUsers as renderUsersCp } from "./pages/cp/users";
+import { renderAccount as renderAccountCp } from "./pages/cp/account";
+import { renderManagement as renderManagementCp } from "./pages/cp/management";
+import { renderSubscription as renderSubscriptionCp } from "./pages/cp/subscription";
+import { renderOrganization as renderOrganizationCp } from "./pages/cp/organization";
+import { renderTwoFactor } from "./pages/cp/twoFactor";
+import { renderSessions } from "./pages/cp/sessions";
+import { renderBackup } from "./pages/cp/backup";
+import { renderFeatureFlags } from "./pages/cp/featureFlags";
 
 export function renderRoute(rid: RouteId, root: HTMLElement): void {
   const getEntitlementFromHash = (): string => {
@@ -27,7 +47,7 @@ export function renderRoute(rid: RouteId, root: HTMLElement): void {
         .then((m) => m.renderRuntimeSmoke(root))
         .catch((e) => {
           /* ICONTROL_LOADER_IMPORT_GUARD_V1 */
-          console.warn("WARN_ROUTE_IMPORT_FAILED", {
+          warnLog("WARN_ROUTE_IMPORT_FAILED", {
             spec: "./pages/runtime-smoke",
             err: String(e),
           });
@@ -35,40 +55,49 @@ export function renderRoute(rid: RouteId, root: HTMLElement): void {
       return;
     }
   } catch (e) {
-    console.warn("WARN_RUNTIME_SMOKE_ROUTE", String(e));
+    warnLog("WARN_RUNTIME_SMOKE_ROUTE", String(e));
   }
 
   try {
     if ((rid as any) === "users") {
-      import("../../modules/core-system/ui/frontend-ts/pages/users")
-        .then((m) => m.renderUsers(root))
-        .catch((e) => {
-          /* ICONTROL_LOADER_IMPORT_GUARD_V1 */
-          console.warn("WARN_ROUTE_IMPORT_FAILED", {
-            spec: "../../modules/core-system/ui/frontend-ts/pages/users",
-            err: String(e),
-          });
-        });
+      if (!canAccessPageRoute("users")) {
+        root.innerHTML = `<div style="max-width:980px;margin:40px auto;padding:0 16px;opacity:.8">Acc√®s refus√© √† cette page.</div>`;
+        return;
+      }
+      const appKind = getAppKind();
+      if (appKind === "CP") {
+        renderUsersCp(root);
+      } else {
+        renderUsersApp(root);
+      }
       return;
     }
     if ((rid as any) === "account") {
-      import("../../modules/core-system/ui/frontend-ts/pages/account")
-        .then((m) => m.renderAccount(root))
-        .catch((e) => {
-          /* ICONTROL_LOADER_IMPORT_GUARD_V1 */
-          console.warn("WARN_ROUTE_IMPORT_FAILED", {
-            spec: "../../modules/core-system/ui/frontend-ts/pages/account",
-            err: String(e),
-          });
-        });
+      if (!canAccessPageRoute("account")) {
+        root.innerHTML = `<div style="max-width:980px;margin:40px auto;padding:0 16px;opacity:.8">Acc√®s refus√© √† cette page.</div>`;
+        return;
+      }
+      const appKind = getAppKind();
+      if (appKind === "CP") {
+        renderAccountCp(root);
+      } else {
+        renderAccountApp(root);
+      }
       return;
     }
+    // ICONTROL_APP_CP_ROUTE_GUARDS_V1: Routes restreintes par application
     if ((rid as any) === "dossiers") {
+      // Dossiers: APP uniquement (client)
+      const appKind = getAppKind();
+      if (appKind !== "APP") {
+        root.innerHTML = `<div style="max-width:980px;margin:40px auto;padding:0 16px;opacity:.8">Page non disponible dans l'application administration.</div>`;
+        return;
+      }
       import("../../modules/core-system/ui/frontend-ts/pages/dossiers")
         .then((m) => m.renderDossiersPage(root))
         .catch((e) => {
           /* ICONTROL_LOADER_IMPORT_GUARD_V1 */
-          console.warn("WARN_ROUTE_IMPORT_FAILED", {
+          warnLog("WARN_ROUTE_IMPORT_FAILED", {
             spec: "../../modules/core-system/ui/frontend-ts/pages/dossiers",
             err: String(e),
           });
@@ -76,11 +105,17 @@ export function renderRoute(rid: RouteId, root: HTMLElement): void {
       return;
     }
     if ((rid as any) === "developer") {
+      // Developer: CP uniquement (administration)
+      const appKind = getAppKind();
+      if (appKind !== "CP") {
+        root.innerHTML = `<div style="max-width:980px;margin:40px auto;padding:0 16px;opacity:.8">Page non disponible dans l'application client.</div>`;
+        return;
+      }
       import("../../modules/core-system/ui/frontend-ts/pages/developer")
         .then((m) => m.renderDeveloper(root))
         .catch((e) => {
           /* ICONTROL_LOADER_IMPORT_GUARD_V1 */
-          console.warn("WARN_ROUTE_IMPORT_FAILED", {
+          warnLog("WARN_ROUTE_IMPORT_FAILED", {
             spec: "../../modules/core-system/ui/frontend-ts/pages/developer",
             err: String(e),
           });
@@ -88,6 +123,12 @@ export function renderRoute(rid: RouteId, root: HTMLElement): void {
       return;
     }
     if ((rid as any) === "developer_entitlements") {
+      // Developer Entitlements: CP uniquement (administration)
+      const appKind = getAppKind();
+      if (appKind !== "CP") {
+        root.innerHTML = `<div style="max-width:980px;margin:40px auto;padding:0 16px;opacity:.8">Page non disponible dans l'application client.</div>`;
+        return;
+      }
       import("../../modules/core-system/ui/frontend-ts/pages/developer/entitlements")
         .then((m) => m.renderDeveloperEntitlements(root))
         .catch((e) => {
@@ -116,13 +157,20 @@ export function renderRoute(rid: RouteId, root: HTMLElement): void {
       return;
     }
     // Activation / licence
+    const hash = String(location.hash || "");
     if (hash.startsWith("#/activation")) {
       import("../../modules/core-system/ui/frontend-ts/pages/activation").then(
-        (m) => m.renderActivationPage(mount),
+        (m) => m.renderActivationPage(root),
       );
       return;
     }
     if ((rid as any) === "verification") {
+      // Verification: CP uniquement (administration)
+      const appKind = getAppKind();
+      if (appKind !== "CP") {
+        root.innerHTML = `<div style="max-width:980px;margin:40px auto;padding:0 16px;opacity:.8">Page non disponible dans l'application client.</div>`;
+        return;
+      }
       import("../../modules/core-system/ui/frontend-ts/pages/verification")
         .then((m) => m.renderVerification(root))
         .catch((e) => {
@@ -135,18 +183,21 @@ export function renderRoute(rid: RouteId, root: HTMLElement): void {
       return;
     }
     if ((rid as any) === "system") {
-      import("../../modules/core-system/ui/frontend-ts/pages/system")
-        .then((m) => m.renderSystemPage(root))
-        .catch((e) => {
-          /* ICONTROL_LOADER_IMPORT_GUARD_V1 */
-          console.warn("WARN_ROUTE_IMPORT_FAILED", {
-            spec: "../../modules/core-system/ui/frontend-ts/pages/system",
-            err: String(e),
-          });
-        });
+      const appKind = getAppKind();
+      if (appKind === "CP") {
+        renderSystemPageCp(root);
+      } else {
+        renderSystemPageApp(root);
+      }
       return;
     }
     if ((rid as any) === "logs") {
+      // Logs: CP uniquement (administration)
+      const appKind = getAppKind();
+      if (appKind !== "CP") {
+        root.innerHTML = `<div style="max-width:980px;margin:40px auto;padding:0 16px;opacity:.8">Page non disponible dans l'application client.</div>`;
+        return;
+      }
       import("../../modules/core-system/ui/frontend-ts/pages/logs")
         .then((m) => m.renderLogsPage(root))
         .catch((e) => {
@@ -158,31 +209,104 @@ export function renderRoute(rid: RouteId, root: HTMLElement): void {
         });
       return;
     }
-    if ((rid as any) === "toolbox") {
-      if (!canAccessToolbox()) {
-        root.innerHTML =
-          '<div style="padding:12px;opacity:0.9;"><h2 style="margin:0 0 8px 0;">Access denied</h2><div>Toolbox requires elevated role.</div></div>';
-        return;
-      }
-      import("../../modules/core-system/ui/frontend-ts/pages/toolbox")
-        .then((m) => m.renderToolbox(root))
-        .catch((e) => {
-          /* ICONTROL_LOADER_IMPORT_GUARD_V1 */
-          console.warn("WARN_ROUTE_IMPORT_FAILED", {
-            spec: "../../modules/core-system/ui/frontend-ts/pages/toolbox",
-            err: String(e),
-          });
-        });
-      return;
-    }
   } catch (e) {
-    console.warn("WARN_MAIN_SYSTEM_ROUTE", String(e));
+    warnLog("WARN_MAIN_SYSTEM_ROUTE", String(e));
   }
 
-  if (rid === "login") return renderLogin(root);
-  if (rid === "dashboard") return renderDashboard(root);
-  if (rid === "settings") return renderSettingsPage(root);
-  if (rid === "settings_branding") return renderBrandingSettings(root);
+  // ICONTROL_APP_CP_ROUTING_V1: Router vers les pages appropri√©es selon le contexte
+  const appKind = getAppKind();
+
+  if (rid === "login") {
+    debugLog("üîµ moduleLoader: login route", { appKind, rootId: root.id });
+    const result = appKind === "CP" ? renderLoginCp(root) : renderLoginApp(root);
+    debugLog("‚úÖ moduleLoader: login rendu", { length: root.innerHTML?.length || 0 });
+    return result;
+  }
+  if (rid === "dashboard") {
+    if (!canAccessPageRoute("dashboard")) {
+      root.innerHTML = `<div style="max-width:980px;margin:40px auto;padding:0 16px;opacity:.8">Acc√®s refus√© √† cette page.</div>`;
+      return;
+    }
+    return appKind === "CP" ? renderDashboardCp(root) : renderDashboardApp(root);
+  }
+  if (rid === "settings") {
+    if (!canAccessPageRoute("settings")) {
+      root.innerHTML = `<div style="max-width:980px;margin:40px auto;padding:0 16px;opacity:.8">Acc√®s refus√© √† cette page.</div>`;
+      return;
+    }
+    return appKind === "CP" ? renderSettingsPageCp(root) : renderSettingsPageApp(root);
+  }
+  if (rid === "management") {
+    // Management: CP uniquement (administration)
+    const appKind = getAppKind();
+    if (appKind !== "CP") {
+      root.innerHTML = `<div style="max-width:980px;margin:40px auto;padding:0 16px;opacity:.8">Page non disponible dans l'application client.</div>`;
+      return;
+    }
+    if (!canAccessPageRoute("management")) {
+      root.innerHTML = `<div style="max-width:980px;margin:40px auto;padding:0 16px;opacity:.8">Acc√®s refus√© √† cette page.</div>`;
+      return;
+    }
+    return renderManagementCp(root);
+  }
+  if (rid === "subscription") {
+    // Subscription: CP uniquement (administration)
+    const appKind = getAppKind();
+    if (appKind !== "CP") {
+      root.innerHTML = `<div style="max-width:980px;margin:40px auto;padding:0 16px;opacity:.8">Page non disponible dans l'application client.</div>`;
+      return;
+    }
+    if (!canAccessPageRoute("settings")) {
+      root.innerHTML = `<div style="max-width:980px;margin:40px auto;padding:0 16px;opacity:.8">Acc√®s refus√© √† cette page.</div>`;
+      return;
+    }
+    return renderSubscriptionCp(root);
+  }
+  if (rid === "organization") {
+    // Organization: CP uniquement (administration)
+    const appKind = getAppKind();
+    if (appKind !== "CP") {
+      root.innerHTML = `<div style="max-width:980px;margin:40px auto;padding:0 16px;opacity:.8">Page non disponible dans l'application client.</div>`;
+      return;
+    }
+    if (!canAccessPageRoute("settings")) {
+      root.innerHTML = `<div style="max-width:980px;margin:40px auto;padding:0 16px;opacity:.8">Acc√®s refus√© √† cette page.</div>`;
+      return;
+    }
+    return renderOrganizationCp(root);
+  }
+  if (rid === "twofactor") {
+    const appKind = getAppKind();
+    if (appKind !== "CP") {
+      root.innerHTML = `<div style="max-width:980px;margin:40px auto;padding:0 16px;opacity:.8">Page non disponible dans l'application client.</div>`;
+      return;
+    }
+    return renderTwoFactor(root);
+  }
+  if (rid === "sessions") {
+    const appKind = getAppKind();
+    if (appKind !== "CP") {
+      root.innerHTML = `<div style="max-width:980px;margin:40px auto;padding:0 16px;opacity:.8">Page non disponible dans l'application client.</div>`;
+      return;
+    }
+    return renderSessions(root);
+  }
+  if (rid === "backup") {
+    const appKind = getAppKind();
+    if (appKind !== "CP") {
+      root.innerHTML = `<div style="max-width:980px;margin:40px auto;padding:0 16px;opacity:.8">Page non disponible dans l'application client.</div>`;
+      return;
+    }
+    return renderBackup(root);
+  }
+  if (rid === "featureflags") {
+    const appKind = getAppKind();
+    if (appKind !== "CP") {
+      root.innerHTML = `<div style="max-width:980px;margin:40px auto;padding:0 16px;opacity:.8">Page non disponible dans l'application client.</div>`;
+      return;
+    }
+    return renderFeatureFlags(root);
+  }
 
   root.innerHTML = `<div style="max-width:980px;margin:40px auto;padding:0 16px;opacity:.8">Page introuvable.</div>`;
 }
diff --git a/app/src/pages/README_DISABLED.md b/app/src/pages/README_DISABLED.md
deleted file mode 100644
index 7984f57..0000000
--- a/app/src/pages/README_DISABLED.md
+++ /dev/null
@@ -1,9 +0,0 @@
-# Shell pages disabled
-
-Login/Dashboard are rendered ONLY from:
-modules/core-system/ui/frontend-ts/pages/*
-
-Shell responsibilities:
-- router + RBAC guard
-- layout
-- moduleLoader
diff --git a/app/src/pages/README_DUPLICATE_PAGES_DISABLED.md b/app/src/pages/README_DUPLICATE_PAGES_DISABLED.md
deleted file mode 100644
index daa15d8..0000000
--- a/app/src/pages/README_DUPLICATE_PAGES_DISABLED.md
+++ /dev/null
@@ -1,12 +0,0 @@
-# Pages shell ‚Äî d√©sactiv√©es
-
-Les pages Login/Dashboard sont d√©sormais rendues par:
-modules/core-system/ui/frontend-ts/pages/*
-
-Le shell app/ garde uniquement:
-- router + RBAC guard
-- safe-render
-- moduleLoader
-- layout
-
-Objectif: une seule source de v√©rit√© pour √©viter collisions.
diff --git a/app/src/pages/_shared/sections.ts b/app/src/pages/_shared/sections.ts
deleted file mode 100644
index fdd6d04..0000000
--- a/app/src/pages/_shared/sections.ts
+++ /dev/null
@@ -1,91 +0,0 @@
-export type SectionSpec = {
-  id: string;
-  title: string;
-  render: (root: HTMLElement) => void;
-  requiresRole?: string;
-  safeModeOk?: boolean;
-};
-
-export type MountResult = {
-  rendered: string[];
-  failed: string[];
-};
-
-export type MountContext = {
-  page: string;
-  role?: string;
-  safeMode?: string;
-};
-
-export function renderErrorCard(
-  root: HTMLElement,
-  code: string,
-  detail: { page: string; section: string; message: string }
-): void {
-  const card = document.createElement("div");
-  card.style.cssText = [
-    "margin:12px 0",
-    "padding:12px",
-    "border-radius:12px",
-    "border:1px solid #c33",
-    "background:rgba(255,255,255,0.03)"
-  ].join(";");
-  const title = document.createElement("div");
-  title.style.cssText = "font-weight:800;margin-bottom:6px";
-  title.textContent = code;
-  const meta = document.createElement("div");
-  meta.style.cssText = "font-size:12px;opacity:.85";
-  meta.textContent = `page=${detail.page} section=${detail.section}`;
-  const msg = document.createElement("div");
-  msg.style.cssText = "margin-top:6px;white-space:pre-wrap";
-  msg.textContent = detail.message;
-  card.appendChild(title);
-  card.appendChild(meta);
-  card.appendChild(msg);
-  root.appendChild(card);
-}
-
-export function mountSections(
-  root: HTMLElement,
-  sections: SectionSpec[],
-  ctx: MountContext
-): MountResult {
-  const rendered: string[] = [];
-  const failed: string[] = [];
-
-  sections.forEach((section) => {
-    if (section.requiresRole && ctx.role && ctx.role !== section.requiresRole) {
-      renderErrorCard(root, "WARN_SECTION_BLOCKED", {
-        page: ctx.page,
-        section: section.id,
-        message: `requiresRole=${section.requiresRole}`
-      });
-      failed.push(section.id);
-      return;
-    }
-    if (section.safeModeOk === false && ctx.safeMode === "STRICT") {
-      renderErrorCard(root, "WARN_SECTION_BLOCKED", {
-        page: ctx.page,
-        section: section.id,
-        message: "safeMode=STRICT"
-      });
-      failed.push(section.id);
-      return;
-    }
-
-    try {
-      section.render(root);
-      rendered.push(section.id);
-    } catch (e) {
-      const msg = e instanceof Error ? e.message : String(e);
-      renderErrorCard(root, "WARN_SECTION_CRASH", {
-        page: ctx.page,
-        section: section.id,
-        message: msg
-      });
-      failed.push(section.id);
-    }
-  });
-
-  return { rendered, failed };
-}
diff --git a/app/src/pages/dashboard.ts.disabled b/app/src/pages/dashboard.ts.disabled
deleted file mode 100644
index fe5f133..0000000
--- a/app/src/pages/dashboard.ts.disabled
+++ /dev/null
@@ -1,27 +0,0 @@
-import { getUserLabel } from "../router";
-
-export function renderDashboard(root: HTMLElement): void {
-  root.innerHTML = `
-    <div style="max-width:980px;margin:26px auto;padding:0 16px">
-      <div style="display:flex;justify-content:space-between;align-items:center;gap:12px">
-        <div style="font-size:22px;font-weight:900">Dashboard</div>
-        <div style="opacity:.8">${getUserLabel()}</div>
-      </div>
-
-      <div style="margin-top:14px;display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:12px">
-        <div style="padding:14px;border-radius:18px;background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.06)">
-          <div style="font-weight:900">Sant√© PME</div>
-          <div style="opacity:.8;margin-top:6px">Widget (placeholder)</div>
-        </div>
-        <div style="padding:14px;border-radius:18px;background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.06)">
-          <div style="font-weight:900">Raccourcis</div>
-          <div style="opacity:.8;margin-top:6px">Widget (placeholder)</div>
-        </div>
-        <div style="padding:14px;border-radius:18px;background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.06)">
-          <div style="font-weight:900">Alertes</div>
-          <div style="opacity:.8;margin-top:6px">Widget (placeholder)</div>
-        </div>
-      </div>
-    </div>
-  `;
-}
diff --git a/app/src/pages/login.ts.disabled b/app/src/pages/login.ts.disabled
deleted file mode 100644
index bfe6fa3..0000000
--- a/app/src/pages/login.ts.disabled
+++ /dev/null
@@ -1,46 +0,0 @@
-import { authenticate } from "../localAuth";
-import { navigate } from "../router";
-
-export function renderLogin(root: HTMLElement): void {
-  root.innerHTML = `
-    <div style="max-width:520px;margin:40px auto;padding:18px;border-radius:18px;background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.06)">
-      <div style="display:flex;justify-content:space-between;align-items:center;gap:12px">
-        <div style="font-size:20px;font-weight:900">Connexion</div>
-        <div style="display:flex;align-items:center;gap:10px">
-          <select id="lang" style="background:transparent;color:inherit;border:1px solid rgba(255,255,255,0.15);padding:6px 10px;border-radius:10px">
-            <option value="fr">FR</option>
-            <option value="en">EN</option>
-          </select>
-          <a href="#/login" id="forgot" style="color:inherit;opacity:.8;text-decoration:underline">Mot de passe oubli√©</a>
-        </div>
-      </div>
-
-      <div style="margin-top:14px;opacity:.8">Entrez vos identifiants.</div>
-
-      <div style="margin-top:14px;display:flex;flex-direction:column;gap:10px">
-        <input id="u" placeholder="Nom d‚Äôutilisateur" style="padding:10px 12px;border-radius:12px;border:1px solid rgba(255,255,255,0.12);background:rgba(0,0,0,0.25);color:inherit" />
-        <input id="p" type="password" placeholder="Mot de passe" style="padding:10px 12px;border-radius:12px;border:1px solid rgba(255,255,255,0.12);background:rgba(0,0,0,0.25);color:inherit" />
-        <div id="err" style="min-height:18px;color:#ff6b6b"></div>
-        <button id="btn" style="padding:10px 12px;border-radius:12px;border:1px solid rgba(255,255,255,0.15);background:rgba(183,217,75,0.15);color:inherit;font-weight:800;cursor:pointer">Se connecter</button>
-      </div>
-    </div>
-  `;
-
-  const u = root.querySelector<HTMLInputElement>("#u")!;
-  const p = root.querySelector<HTMLInputElement>("#p")!;
-  const err = root.querySelector<HTMLDivElement>("#err")!;
-  const btn = root.querySelector<HTMLButtonElement>("#btn")!;
-
-  const submit = () => {
-    err.textContent = "";
-    const res = authenticate(u.value, p.value);
-    if (!res.ok) {
-      err.textContent = res.error;
-      return;
-    }
-    navigate("#/dashboard");
-  };
-
-  btn.onclick = submit;
-  p.addEventListener("keydown", (e) => { if (e.key === "Enter") submit(); });
-}
diff --git a/app/src/router.ts b/app/src/router.ts
index 9287d01..77feb53 100644
--- a/app/src/router.ts
+++ b/app/src/router.ts
@@ -2,31 +2,70 @@ import { getSession, isLoggedIn, logout } from "./localAuth";
 import { canAccessSettings } from "./runtime/rbac";
 import { navigate as coreNavigate } from "./runtime/navigate";
 import { applyVersionPolicyBootGuards } from "./policies/version_policy.runtime";
+import { getAppKind } from "./pages/appContext";
 /**
  * router.ts ‚Äî minimal hash router with RBAC guard
  * Public:  #/login
  * Private: #/dashboard (and everything else by default)
  */
-export type RouteId = "login" | "dashboard" | "settings" | "settings_branding" | "blocked" | "notfound"
-  | "runtime_smoke" | "users" | "account" | "developer" | "developer_entitlements" | "access_denied" | "verification" | "toolbox"
-  | "system" | "logs" | "dossiers";
+export type RouteId = "login" | "dashboard" | "settings" | "blocked" | "notfound"
+  | "runtime_smoke" | "users" | "account" | "developer" | "developer_entitlements" | "access_denied" | "verification"
+  | "system" | "logs" | "dossiers" | "management" | "subscription" | "organization" | "twofactor" | "sessions" | "backup" | "featureflags";
 export function getRouteId(): RouteId {
   const h = (location.hash || "").replace(/^#\/?/, "");
   const seg = (h.split("?")[0] || "").trim();
+  const appKind = getAppKind();
+  
   if (!seg || seg === "login") return "login";
   if (seg === "dashboard") return "dashboard";
   if (seg === "users") return "users";
   if (seg === "account") return "account";
-  if (seg === "developer/entitlements" || seg === "dev/entitlements") return "developer_entitlements";
-  if (seg === "developer" || seg === "dev") return "developer";
+  
+  // ICONTROL_APP_CP_ROUTE_GUARDS_V1: Routes restreintes par application
+  // Routes CP uniquement (administration)
+  if (seg === "management") {
+    return appKind === "CP" ? "management" : "notfound";
+  }
+  if (seg === "developer/entitlements" || seg === "dev/entitlements") {
+    return appKind === "CP" ? "developer_entitlements" : "notfound";
+  }
+  if (seg === "developer" || seg === "dev") {
+    return appKind === "CP" ? "developer" : "notfound";
+  }
+  if (seg === "logs") {
+    return appKind === "CP" ? "logs" : "notfound";
+  }
+  if (seg === "verification" || seg === "verify") {
+    return appKind === "CP" ? "verification" : "notfound";
+  }
+  
+  // Routes APP uniquement (client)
+  if (seg === "dossiers") {
+    return appKind === "APP" ? "dossiers" : "notfound";
+  }
+  
+  // Routes partag√©es
   if (seg === "access-denied") return "access_denied";
-  if (seg === "toolbox" || seg === "dev-tools" || seg === "devtools") return "toolbox";
   if (seg === "system") return "system";
-  if (seg === "logs") return "logs";
-  if (seg === "dossiers") return "dossiers";
-  if (seg === "verification" || seg === "verify") return "verification";
+  if (seg === "subscription") {
+    return appKind === "CP" ? "subscription" : "notfound";
+  }
+  if (seg === "organization") {
+    return appKind === "CP" ? "organization" : "notfound";
+  }
+  if (seg === "twofactor" || seg === "2fa") {
+    return appKind === "CP" ? "twofactor" : "notfound";
+  }
+  if (seg === "sessions") {
+    return appKind === "CP" ? "sessions" : "notfound";
+  }
+  if (seg === "backup") {
+    return appKind === "CP" ? "backup" : "notfound";
+  }
+  if (seg === "featureflags" || seg === "feature-flags" || seg === "feature_flags") {
+    return appKind === "CP" ? "featureflags" : "notfound";
+  }
   if (seg === "settings") return canAccessSettings() ? "settings" : "dashboard";
-  if (seg === "settings/branding") return canAccessSettings() ? "settings_branding" : "dashboard";
   if (seg === "runtime-smoke" || seg === "runtime_smoke") return "runtime_smoke";
   if (seg === "blocked") return "blocked";
   return "notfound";
@@ -53,7 +92,8 @@ function ensureAuth(): boolean {
 export function getUserLabel(): string {
   const s = getSession();
   if (!s) return "Invit√©";
-  return `${s.username} (${s.role})`;
+  const displayRole = (s as any).username === "Master" ? "Master" : s.role;
+  return `${s.username} (${displayRole})`;
 }
 
 export function doLogout(): void {
diff --git a/app/src/runtime/rbac.ts b/app/src/runtime/rbac.ts
index dda76a6..ff4b037 100644
--- a/app/src/runtime/rbac.ts
+++ b/app/src/runtime/rbac.ts
@@ -6,14 +6,22 @@
  * - Keep logic centralized to avoid drift
  */
 import { getSession } from "../localAuth";
+import { canAccessPage } from "../core/permissions/userPermissions";
 
-export type Role = "USER" | "ADMIN" | "SYSADMIN" | "DEVELOPER";
+export type Role = "USER" | "ADMIN" | "SYSADMIN" | "DEVELOPER" | "MASTER";
 
 export function getRole(): Role {
   try {
     const s = getSession();
+    if (!s) return "USER";
+    
+    // ICONTROL_MASTER_ROLE_V1: Master est toujours reconnu comme MASTER par son username
+    if ((s as any).username === "Master") {
+      return "MASTER" as Role;
+    }
+    
     const r = String((s as any)?.role || "USER").toUpperCase();
-    if (r === "ADMIN" || r === "SYSADMIN" || r === "DEVELOPER") return r as Role;
+    if (r === "ADMIN" || r === "SYSADMIN" || r === "DEVELOPER" || r === "MASTER") return r as Role;
     return "USER";
   } catch {
     return "USER";
@@ -21,8 +29,14 @@ export function getRole(): Role {
 }
 
 export function canSeeSettings(): boolean {
+  const s = getSession();
+  if (!s) return false;
   const r = getRole();
-  return r === "ADMIN" || r === "SYSADMIN" || r === "DEVELOPER";
+  // Master a toujours acc√®s
+  if (r === "MASTER" || ((s as any).username === "Master" && r === "SYSADMIN")) {
+    return true;
+  }
+  return canAccessPage((s as any).username, r, "settings");
 }
 
 export function canAccessSettings(): boolean {
@@ -30,7 +44,18 @@ export function canAccessSettings(): boolean {
   return canSeeSettings();
 }
 
-export function canAccessToolbox(): boolean {
+// ICONTROL_TOOLBOX_REMOVED_V1: Fonction canAccessToolbox supprim√©e (Toolbox compl√®tement retir√©e)
+
+export function canAccessPageRoute(page: string): boolean {
+  const s = getSession();
+  if (!s) return false;
   const r = getRole();
-  return r === "SYSADMIN" || r === "DEVELOPER";
+  const username = (s as any).username;
+  
+  // Master a toujours acc√®s √† tout
+  if (r === "MASTER" || (username === "Master" && r === "SYSADMIN")) {
+    return true;
+  }
+  
+  return canAccessPage(username, r, page as any);
 }
diff --git a/app/tsconfig.json b/app/tsconfig.json
index 0210e85..5b291a6 100644
--- a/app/tsconfig.json
+++ b/app/tsconfig.json
@@ -7,7 +7,8 @@
     "strict": true,
     "noEmit": true,
     "skipLibCheck": true,
+    "jsx": "preserve",
     "types": ["vite/client"]
   },
-  "include": ["src", "../modules/**/*.ts", "../core-kernel/**/*.ts", "../platform-services/**/*.ts", "../shared/**/*.ts"]
+  "include": ["src", "../modules/**/*.ts", "../modules/**/*.tsx", "../core-kernel/**/*.ts", "../platform-services/**/*.ts", "../shared/**/*.ts"]
 }
diff --git a/app/vite.config.ts b/app/vite.config.ts
index 0464243..4caa161 100644
--- a/app/vite.config.ts
+++ b/app/vite.config.ts
@@ -1,4 +1,10 @@
 import { defineConfig } from "vite";
+import path from "node:path";
+import { fileURLToPath } from "node:url";
+
+const __dirname = path.dirname(fileURLToPath(import.meta.url));
+const appDir = __dirname; // app/
+const rootDir = path.resolve(__dirname, ".."); // iCONTROL/
 
 const enableRuntimeConfigDevMw = process.env.VITE_DEV_RUNTIME_CONFIG_MW === "1";
 
@@ -74,7 +80,24 @@ function icontrolRuntimeConfigDevPlugin() {
 
 export default defineConfig({
   plugins: enableRuntimeConfigDevMw ? [icontrolRuntimeConfigDevPlugin()] : [],
-  server: { port: 5176, strictPort: false },
+  resolve: {
+    alias: [
+      // ICONTROL_MODULES_ALIAS_V1: Alias pour r√©soudre modules/ depuis app/
+      // Permet d'utiliser "modules/..." au lieu de "../../../../modules/..."
+      {
+        find: /^modules\/(.*)$/,
+        replacement: path.resolve(rootDir, "modules/$1").replace(/\\/g, "/"),
+      },
+    ],
+  },
+  server: { 
+    port: 5176, 
+    strictPort: false,
+    fs: {
+      // ICONTROL_FS_ALLOW_V1: Permettre d'acc√©der aux fichiers en dehors de app/
+      allow: [".."],
+    },
+  },
   preview: { port: 5177, strictPort: false },
   test: {
     include: [
diff --git a/core-kernel/contracts/BrandingPort.ts b/core-kernel/contracts/BrandingPort.ts
index 5dad71f..d7d358a 100644
--- a/core-kernel/contracts/BrandingPort.ts
+++ b/core-kernel/contracts/BrandingPort.ts
@@ -10,6 +10,8 @@ export type Brand = {
   ACCENT_COLOR: string;
   LOGO_PRIMARY?: string;
   LOGO_COMPACT?: string;
+  LOGO_LIGHT?: string;
+  LOGO_DARK?: string;
 };
 
 export type BrandSource = "override" | "env" | "default" | "fallback";
diff --git a/docs/ICONTROL_MAIN_SYSTEM_TABLES_MIGRATION_20260110_091609.md b/docs/ICONTROL_MAIN_SYSTEM_TABLES_MIGRATION_20260110_091609.md
deleted file mode 100644
index b97c851..0000000
--- a/docs/ICONTROL_MAIN_SYSTEM_TABLES_MIGRATION_20260110_091609.md
+++ /dev/null
@@ -1,54 +0,0 @@
-# iCONTROL ‚Äî Main System Tables + Contents Migration
-
-## Inventory (repo‚Äëwide search)
-
-### Tables found
-| Page | Section | Source | Structure | Actions |
-| --- | --- | --- | --- | --- |
-| verification | verification-table | modules/core-system/ui/frontend-ts/pages/verification/view.ts:3 | columns: ID, Sujet, Statut; rows: model.items | none |
-
-### Non-table legacy content (by page)
-- dashboard: header row, user panel, actions row from `modules/core-system/ui/frontend-ts/pages/dashboard/dashboardPage.ts`
-- users: title + list from `modules/core-system/ui/frontend-ts/pages/users/view.ts`
-- account: title + description from `modules/core-system/ui/frontend-ts/pages/account/view.ts`
-- developer: title + notes list from `modules/core-system/ui/frontend-ts/pages/developer/view.ts`
-- settings: cards grid from `modules/core-system/ui/frontend-ts/pages/settings/index.ts`
-- settings_branding: branding form from `modules/core-system/ui/frontend-ts/pages/settings/branding.ts`
-
-## Migration Summary
-
-### Tables
-- verification table ‚Üí builtin.table via executePlan + SafeRender in:
-  - `modules/core-system/ui/frontend-ts/pages/verification/index.ts`
-
-### Non-table contents
-- dashboard ‚Üí section blocks in `modules/core-system/ui/frontend-ts/pages/dashboard.ts`
-- users ‚Üí section blocks in `modules/core-system/ui/frontend-ts/pages/users/index.ts`
-- account ‚Üí section blocks in `modules/core-system/ui/frontend-ts/pages/account/index.ts`
-- developer ‚Üí section blocks in `modules/core-system/ui/frontend-ts/pages/developer/index.ts`
-- settings ‚Üí section blocks in `modules/core-system/ui/frontend-ts/pages/settings/index.ts` (branding removed)
-- settings_branding ‚Üí branding only, protected title in `modules/core-system/ui/frontend-ts/pages/settings/branding.ts`
-
-## Builtin Table Contract Updates
-- `app/src/core/studio/runtime/execute.ts`
-  - normalizeTable (columns object/array, rows object/array)
-  - caption/emptyText support
-  - row truncation (200)
-  - cxTable class
-
-## Tests Added/Updated
-- execute/plan tests for table normalization and rendering:
-  - `app/src/core/studio/runtime/execute.test.ts`
-  - `app/src/core/studio/runtime/plan.test.ts`
-- settings branding guard tests:
-  - `modules/core-system/ui/frontend-ts/pages/settings/index.test.ts`
-  - `modules/core-system/ui/frontend-ts/pages/settings/branding.test.ts`
-
-## Branding Guard (Non‚Äënegotiable)
-- ‚ÄúIdentit√© & marque‚Äù appears only in settings_branding; settings does not contain it.
-
-## Manual Runbook
-1) `cd app && npm run dev -- --port 5176`
-2) Verify routes:
-   - `#/dashboard`, `#/users`, `#/account`, `#/verification`, `#/developer`, `#/settings`, `#/settings/branding`
-3) Check tables + sections match legacy sources listed above.
diff --git a/docs/ICONTROL_PAGE_MIGRATION_20260109_212713.md b/docs/ICONTROL_PAGE_MIGRATION_20260109_212713.md
deleted file mode 100644
index 3b00bf6..0000000
--- a/docs/ICONTROL_PAGE_MIGRATION_20260109_212713.md
+++ /dev/null
@@ -1,82 +0,0 @@
-# iCONTROL ‚Äî Page Migration Report (Legacy ‚Üí SSOT)
-
-## Legacy Source Inventory (Repo‚Äëwide scan)
-
-### Dashboard (legacy source)
-- UI markup: `modules/core-system/ui/frontend-ts/pages/dashboard/dashboardPage.ts:4`
-- Events: `modules/core-system/ui/frontend-ts/pages/dashboard/dashboardPage.ts:31`
-- Styles: `modules/core-system/ui/frontend-ts/shared/coreStyles.ts:1`
-- Dependencies: `platform-services/security/auth/localAuth` (requireSession, logout)
-
-### Users (legacy source)
-- UI markup: `modules/core-system/ui/frontend-ts/pages/users/view.ts:7`
-- Dependencies: `modules/core-system/ui/frontend-ts/pages/users/model.ts:1`
-
-### Account (legacy source)
-- UI markup: `modules/core-system/ui/frontend-ts/pages/account/view.ts:7`
-- Dependencies: `modules/core-system/ui/frontend-ts/pages/account/model.ts:1`
-
-### Developer (legacy source)
-- UI markup: `modules/core-system/ui/frontend-ts/pages/developer/view.ts:7`
-- Dependencies: `modules/core-system/ui/frontend-ts/pages/developer/model.ts:1`
-
-### Verification (legacy source)
-- UI markup: `modules/core-system/ui/frontend-ts/pages/verification/view.ts:3`
-- Dependencies: `modules/core-system/ui/frontend-ts/pages/verification/model.ts:1`
-
-## Legacy Sections (per page)
-
-### Dashboard
-- Header row (title + muted + logout button)
-- User info panel (username + role)
-- Actions row (return login)
-
-### Users
-- Title (h2)
-- Users list (ul/li)
-
-### Account
-- Title (h2)
-- Description paragraph
-
-### Developer
-- Title (h2)
-- Notes list (ul/li)
-
-### Verification
-- Title (h1)
-- Description paragraph
-- Table (thead + tbody rows)
-
-## Mapping: Legacy ‚Üí SSOT Sections
-
-### Dashboard
-- legacy header row ‚Üí `dashboard-header` in `modules/core-system/ui/frontend-ts/pages/dashboard.ts`
-- legacy user panel ‚Üí `dashboard-user` in `modules/core-system/ui/frontend-ts/pages/dashboard.ts`
-- legacy actions row ‚Üí `dashboard-actions` in `modules/core-system/ui/frontend-ts/pages/dashboard.ts`
-
-### Users
-- legacy list section ‚Üí `users-list` in `modules/core-system/ui/frontend-ts/pages/users/index.ts`
-
-### Account
-- legacy summary section ‚Üí `account-summary` in `modules/core-system/ui/frontend-ts/pages/account/index.ts`
-
-### Developer
-- legacy notes section ‚Üí `developer-notes` in `modules/core-system/ui/frontend-ts/pages/developer/index.ts`
-
-### Verification
-- legacy table section ‚Üí `verification-table` in `modules/core-system/ui/frontend-ts/pages/verification/index.ts`
-
-## Error Handling / Codes
-- Section isolation uses `WARN_SECTION_CRASH` and `WARN_SECTION_BLOCKED` in:
-  `modules/core-system/ui/frontend-ts/pages/_shared/sections.ts`
-
-## Tests Added / Updated
-- Dashboard sections smoke: `modules/core-system/ui/frontend-ts/pages/dashboard/index.test.ts`
-- Inline handler absence for each page: updated page tests in
-  `modules/core-system/ui/frontend-ts/pages/*/index.test.ts`
-
-## Manual Runbook
-- Start dev: `cd app && npm run dev -- --port 5176`
-- Verify routes: `#/dashboard`, `#/users`, `#/account`, `#/verification`, `#/developer`
-- Check sections present + no console crashes
diff --git a/docs/reports/ICONTROL_EXISTING_PAGES_WIRING_20260109_200900.md b/docs/reports/ICONTROL_EXISTING_PAGES_WIRING_20260109_200900.md
deleted file mode 100644
index 2c12a81..0000000
--- a/docs/reports/ICONTROL_EXISTING_PAGES_WIRING_20260109_200900.md
+++ /dev/null
@@ -1,27 +0,0 @@
-# iCONTROL ‚Äî Main System Pages Wiring Report
-
-## Pages created (isolated modules)
-- modules/core-system/ui/frontend-ts/pages/users
-- modules/core-system/ui/frontend-ts/pages/account
-- modules/core-system/ui/frontend-ts/pages/developer
-- modules/core-system/ui/frontend-ts/pages/verification
-
-## Entrypoints + RBAC/SAFE_MODE
-- users: `renderUsers` + RBAC role allowlist + SAFE_MODE gate in `modules/core-system/ui/frontend-ts/pages/users/index.ts`
-- account: `renderAccount` + RBAC role allowlist + SAFE_MODE gate in `modules/core-system/ui/frontend-ts/pages/account/index.ts`
-- developer: `renderDeveloper` + RBAC role allowlist + SAFE_MODE gate in `modules/core-system/ui/frontend-ts/pages/developer/index.ts`
-- verification: `renderVerification` + RBAC role allowlist + SAFE_MODE gate in `modules/core-system/ui/frontend-ts/pages/verification/index.ts`
-
-## Routes wired
-- RouteId: users, account, developer, verification
-- Routes: `#/users`, `#/account`, `#/developer` (alias `#/dev`), `#/verification` (alias `#/verify`)
-- Loader: dynamic imports per RouteId in `app/src/moduleLoader.ts`
-
-## Tests added
-- users: `modules/core-system/ui/frontend-ts/pages/users/index.test.ts`
-- account: `modules/core-system/ui/frontend-ts/pages/account/index.test.ts`
-- developer: `modules/core-system/ui/frontend-ts/pages/developer/index.test.ts`
-- verification: `modules/core-system/ui/frontend-ts/pages/verification/index.test.ts`
-
-## Gate coverage
-- Vitest includes module tests via `app/vite.config.ts`.
diff --git a/docs/reports/ICONTROL_MAIN_SYSTEM_RESTORE_20260109_211011.md b/docs/reports/ICONTROL_MAIN_SYSTEM_RESTORE_20260109_211011.md
deleted file mode 100644
index 0970540..0000000
--- a/docs/reports/ICONTROL_MAIN_SYSTEM_RESTORE_20260109_211011.md
+++ /dev/null
@@ -1,38 +0,0 @@
-# iCONTROL ‚Äî Main System Source + Migration Report
-
-## SOURCE FOUND
-Menu / Shell
-- platform-services/ui-shell/layout/shell.ts
-  - DOM: header + burger + drawer + nav (class names: cxHeader/cxBurger/cxDrawer/cxNav)
-- platform-services/ui-shell/layout/shell.css
-  - Styles: .cxHeader/.cxDrawer/.cxNav (exact class layout + spacing)
-
-Dashboard (main system)
-- modules/core-system/ui/frontend-ts/pages/dashboard/dashboardPage.ts
-  - Markup: cxWrap/cxCard/cxTitle/cxRow + cxLogout/cxGoLogin IDs
-- modules/core-system/ui/frontend-ts/shared/coreStyles.ts
-  - CSS tokens and base styles for cx* classes
-
-Login (main system)
-- modules/core-system/ui/frontend-ts/pages/login/loginPage.ts
-  - Markup: cxWrap/cxCard/cxInput/cxBtn + cxLoginBtn IDs
-
-Users / Account / Developer / Verification
-- No legacy main-system sources found outside SSOT pages. Search covered repo-wide paths and keywords.
-
-## MIGRATION APPLIED
-- Shell DOM construction centralized via shared builder:
-  - modules/core-system/ui/frontend-ts/pages/_shared/mainSystem.ui.ts
-  - platform-services/ui-shell/layout/shell.ts now uses buildMainSystemShell()
-- Sidebar left: CSS updated to keep menu on the left and burger icon on left
-  - platform-services/ui-shell/layout/shell.css
-- Dashboard SSOT updated to render exact main-system dashboard markup + styles
-  - modules/core-system/ui/frontend-ts/pages/dashboard.ts
-
-## SECTIONS MIGRATED
-- Dashboard: Core System card, user/role panel, logout + return buttons
-- Menu: exact cx* DOM structure retained via shared builder
-
-## NOTES
-- No inline on* attributes added; events bound programmatically.
-- SafeRender rules unchanged.
diff --git a/docs/reports/ICONTROL_SYSTEM_RECOMMENDATIONS_APPLIED_20260109_174741.md b/docs/reports/ICONTROL_SYSTEM_RECOMMENDATIONS_APPLIED_20260109_174741.md
deleted file mode 100644
index eecf19b..0000000
--- a/docs/reports/ICONTROL_SYSTEM_RECOMMENDATIONS_APPLIED_20260109_174741.md
+++ /dev/null
@@ -1,49 +0,0 @@
-# iCONTROL ‚Äî Recommendations Applied Report
-
-Generated: 20260109_174741
-Repo: iCONTROL (workspace root)
-Scope: Apply all mandatory + strongly recommended items for SafeRender, runtime contracts, tests, gates, and Git discipline.
-
-## Changes Applied (files + objective)
-
-- app/src/core/studio/engine/internal/html-guards.test.ts
-  - Expanded SafeRender regression tests (script, inline handlers in tags, javascript:, data:text/html, safe HTML, text false positives).
-- app/src/core/studio/runtime/types.ts
-  - Formalized RenderOp/RenderPlan contract with explicit props.
-- app/src/core/studio/runtime/execute.ts
-  - Enforced props usage for component ops; removed inline handler from builtin form HTML.
-- app/src/core/studio/runtime/execute.test.ts
-  - Added executePlan tests (text escaping, builtin rendering with props, registry props pass-through) + SafeRender block sanity.
-- app/src/core/studio/runtime/plan.ts
-  - Hardened block mapping order; prevented valid blocks from falling into JSON fallback; ensured props are carried.
-- app/src/core/studio/runtime/plan.test.ts
-  - Added compilePlan tests (text, table/form props, mixed valid/invalid blocks).
-- .DS_Store
-  - Removed from tracking; enforced Git discipline.
-
-## Contracts Fixed (authoritative)
-
-- RenderOp is fixed: { op: "text" | "component" } with explicit props on component ops only.
-- Runtime flow remains single-path: Blueprint -> compilePlan -> RenderPlan -> executePlan -> safeRender -> HTML.
-- Builtins must emit deterministic, SafeRender-compliant HTML (no inline handlers).
-
-## SafeRender Patterns (enforced + tests)
-
-- Blocked patterns:
-  - <script>
-  - inline on* handlers inside HTML tags only (/<[^>]*\bon\w+\s*=/i)
-  - javascript:
-  - data:text/html
-- Regression tests confirm:
-  - unsafe content is blocked
-  - harmless text mentioning onclick= is allowed
-  - safe minimal HTML is accepted
-
-## Gates & Runbooks
-
-- Gates required per commit: audit-no-leaks + build + tests.
-- Vitest is configured to run non-interactively via npm test.
-
-## Remaining Risks / Debt
-
-- No explicit debt accepted. Any future debt must be documented with scope and expiry.
diff --git a/modules/core-system/ui/frontend-ts/index.ts b/modules/core-system/ui/frontend-ts/index.ts
deleted file mode 100644
index 4b1d169..0000000
--- a/modules/core-system/ui/frontend-ts/index.ts
+++ /dev/null
@@ -1,28 +0,0 @@
-import { renderLoginPage, bindLoginEvents } from "./pages/login/loginPage";
-import { renderDashboardPage, bindDashboardEvents } from "./pages/dashboard/dashboardPage";
-
-export type HostAPI = {
-  addRoute: (route: string, entry: { id: string; title: string; handler: (ctx: any) => string }) => void;
-  navigate: (hashRoute: string) => void;
-};
-
-export function registerCoreSystemModule(host: HostAPI) {
-  host.addRoute("login", {
-    id: "core_login",
-    title: "Login",
-    handler: () => {
-      // Bind happens after DOM mount; we emit a small boot hook
-      setTimeout(() => bindLoginEvents(host), 0);
-      return renderLoginPage();
-    }
-  });
-
-  host.addRoute("dashboard", {
-    id: "core_dashboard",
-    title: "Dashboard",
-    handler: () => {
-      setTimeout(() => bindDashboardEvents(host), 0);
-      return renderDashboardPage();
-    }
-  });
-}
diff --git a/modules/core-system/ui/frontend-ts/pages/_shared/mainSystem.ui.ts b/modules/core-system/ui/frontend-ts/pages/_shared/mainSystem.ui.ts
index ea1afc8..6176bd4 100644
--- a/modules/core-system/ui/frontend-ts/pages/_shared/mainSystem.ui.ts
+++ b/modules/core-system/ui/frontend-ts/pages/_shared/mainSystem.ui.ts
@@ -21,9 +21,11 @@ export function buildMainSystemShell(): MainSystemShell {
       ‚ò∞
     </button>
     <div class="cxBrand">
+      <img id="cxBrandLogo" data-brand-logo style="max-height: 32px; max-width: 150px; object-fit: contain; display: none;" alt="Logo" />
       <div class="cxBrandDot"></div>
       <div id="cxBrandTitle">iCONTROL</div>
     </div>
+    <div class="cxHeaderContext" id="cxHeaderContext"></div>
   `;
 
   const overlay = document.createElement("div");
@@ -35,13 +37,31 @@ export function buildMainSystemShell(): MainSystemShell {
   drawer.id = "cxDrawer";
   drawer.innerHTML = `
     <div class="cxDrawerTop">
-      <div class="cxDrawerTitle">MENU</div>
+      <div class="cxDrawerLogo" style="display:flex;align-items:center;justify-content:center;padding:12px 0;">
+        <img id="cxDrawerLogoImg" data-brand-logo style="max-height: 40px; max-width: 180px; object-fit: contain; display: none;" alt="Logo" />
+        <div id="cxDrawerLogoText" style="font-weight:800;letter-spacing:.2px;">iCONTROL</div>
+      </div>
       <button class="cxClose" id="cxClose" aria-label="Fermer">X</button>
+      <div style="height:1px;background:var(--line);margin:8px 0;"></div>
     </div>
     <div class="cxNav" id="cxNav"></div>
-    <div style="margin-top:14px; border-top:1px solid var(--line); padding-top:12px;">
-      <a href="#/login" id="cxLogoutLink" style="display:none;">D√©connexion</a>
-      <small id="cxSessionHint"></small>
+    <div class="cxDrawerBottom" style="margin-top:auto;">
+      <div style="border-top:1px solid var(--line);padding:12px 0;">
+        <div id="cxUserInfo" style="display:none;padding:0 8px 12px;">
+          <div id="cxUserFullname" style="font-weight:600;color:var(--text);margin-bottom:4px;"></div>
+          <div id="cxUserRole" style="font-size:12px;color:var(--muted);margin-bottom:4px;"></div>
+          <div id="cxUserCompany" style="font-size:12px;color:var(--muted);"></div>
+        </div>
+        <div style="border-top:1px solid var(--line);padding-top:12px;">
+          <div style="display:flex; align-items:center; justify-content:space-between; gap:12px;">
+            <div id="cxUserAvatar" style="width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700;color:white;font-size:16px;flex-shrink:0;cursor:pointer;" onclick="window.__navigateToAccount?.()"></div>
+            <a href="#/login" id="cxLogoutLink" style="flex:1;text-align:center;display:none;color:var(--text);text-decoration:none;padding:8px;border-radius:8px;transition:background 0.2s;">D√©connexion</a>
+            <a href="#/settings" id="cxSettingsLink" style="width:40px;height:40px;display:flex;align-items:center;justify-content:center;border-radius:8px;color:var(--text);text-decoration:none;transition:background 0.2s;flex-shrink:0;" title="Param√®tres">
+              <span style="font-size:20px;">‚öôÔ∏è</span>
+            </a>
+          </div>
+        </div>
+      </div>
     </div>
   `;
 
diff --git a/modules/core-system/ui/frontend-ts/pages/_shared/rolePolicy.ts b/modules/core-system/ui/frontend-ts/pages/_shared/rolePolicy.ts
index ddc6e0c..c6e6210 100644
--- a/modules/core-system/ui/frontend-ts/pages/_shared/rolePolicy.ts
+++ b/modules/core-system/ui/frontend-ts/pages/_shared/rolePolicy.ts
@@ -1,4 +1,4 @@
-export type Role = "SYSADMIN" | "ADMIN" | "DEVELOPER" | "USER";
+export type Role = "SYSADMIN" | "ADMIN" | "DEVELOPER" | "USER" | "MASTER";
 
 export type PageId =
   | "dashboard"
@@ -31,6 +31,11 @@ export const POLICY_MARKER = "ICONTROL_POLICY_SSOT_V1";
  * Page-level RBAC: "can you enter this route/page?"
  */
 export function canAccessPage(role: Role, page: PageId): PolicyDecision {
+  // Master a toujours acc√®s √† tout
+  if (role === "MASTER") {
+    return { allow: true };
+  }
+  
   // USER role is restricted for privileged pages
   if (role === "USER") {
     if (page === "dashboard" || page === "account") return { allow: true };
@@ -51,6 +56,11 @@ export function canAccessPage(role: Role, page: PageId): PolicyDecision {
  * Note: must NOT override page-level deny; callers should check page first.
  */
 export function canAccessSection(role: Role, section: SectionId): PolicyDecision {
+  // Master a toujours acc√®s √† toutes les sections
+  if (role === "MASTER") {
+    return { allow: true };
+  }
+  
   // Developer toolbox rules is SYSADMIN-only (policy)
   if (section === "toolbox-rules") {
     return role === "SYSADMIN"
diff --git a/modules/core-system/ui/frontend-ts/pages/_shared/uiBlocks.ts b/modules/core-system/ui/frontend-ts/pages/_shared/uiBlocks.ts
index 524ef28..1109abf 100644
--- a/modules/core-system/ui/frontend-ts/pages/_shared/uiBlocks.ts
+++ b/modules/core-system/ui/frontend-ts/pages/_shared/uiBlocks.ts
@@ -68,13 +68,23 @@ export function appendTable(
   const maxRows = 200;
   const safeRows = rows.slice(0, maxRows);
   const table = el("table");
-  table.style.cssText = "width:100%;border-collapse:collapse";
+  table.style.cssText = "width:100%;border-collapse:collapse;background:var(--ic-card, var(--panel));border-radius:8px;overflow:hidden";
 
   const thead = el("thead");
   const trh = el("tr");
   columns.forEach((c) => {
     const th = el("th", undefined, c);
-    th.style.cssText = "text-align:left;padding:8px;border-bottom:1px solid var(--line);font-size:12px;opacity:.85";
+    th.style.cssText = `
+      text-align:left;
+      padding:12px 16px;
+      border-bottom:1px solid var(--ic-border, var(--line));
+      font-size:12px;
+      font-weight:600;
+      color:var(--ic-mutedText, var(--muted));
+      text-transform:uppercase;
+      letter-spacing:0.5px;
+      background:var(--ic-panel, var(--panel2));
+    `;
     trh.appendChild(th);
   });
   thead.appendChild(trh);
@@ -84,16 +94,17 @@ export function appendTable(
   if (safeRows.length === 0) {
     const tr = el("tr");
     const td = el("td", undefined, "Aucune donn√©e");
-    td.style.cssText = "padding:8px;border-bottom:1px solid var(--line);opacity:.7";
+    td.style.cssText = "padding:16px;text-align:center;opacity:.7;color:var(--ic-mutedText, var(--muted));";
     td.colSpan = columns.length || 1;
     tr.appendChild(td);
     tbody.appendChild(tr);
   }
-  safeRows.forEach((row) => {
+  safeRows.forEach((row, idx) => {
     const tr = el("tr");
+    tr.style.cssText = idx % 2 === 0 ? "background:transparent;" : "background:rgba(255,255,255,0.01);";
     columns.forEach((c) => {
       const td = el("td", undefined, row[c] ?? "");
-      td.style.cssText = "padding:8px;border-bottom:1px solid var(--line)";
+      td.style.cssText = "padding:12px 16px;border-bottom:1px solid var(--ic-border, var(--line));color:var(--ic-text, var(--text));font-size:13px;";
       tr.appendChild(td);
     });
     tbody.appendChild(tr);
@@ -104,7 +115,7 @@ export function appendTable(
 
   if (rows.length > maxRows) {
     const note = el("div", undefined, `Affichage limit√© √† ${maxRows} lignes (sur ${rows.length}).`);
-    note.style.cssText = "margin-top:8px;opacity:.7;font-size:12px";
+    note.style.cssText = "margin-top:12px;opacity:.7;font-size:12px;color:var(--ic-mutedText, var(--muted));padding:8px;background:rgba(255,255,255,0.02);border-radius:6px;";
     host.appendChild(note);
   }
 }
@@ -118,18 +129,30 @@ export type UiAction = {
 
 export function appendActionRow(host: HTMLElement, actions: UiAction[]): HTMLDivElement {
   const row = el("div");
-  row.style.cssText = "display:flex;gap:10px;flex-wrap:wrap;margin-top:10px";
+  row.style.cssText = "display:flex;gap:10px;flex-wrap:wrap;margin-top:16px;";
   actions.forEach((action) => {
     const btn = el("button", { type: "button", "data-action-id": action.id }, action.label);
     btn.setAttribute("aria-label", action.label);
-    btn.style.cssText = [
-      "padding:8px 12px",
-      "border-radius:10px",
-      "border:1px solid var(--line)",
-      "background:rgba(255,255,255,0.04)",
-      "color:inherit",
-      "cursor:pointer"
-    ].join(";");
+    btn.style.cssText = `
+      padding:10px 16px;
+      border-radius:8px;
+      border:1px solid var(--ic-border, var(--line));
+      background:var(--ic-panel, var(--panel2));
+      color:var(--ic-text, var(--text));
+      cursor:pointer;
+      font-weight:600;
+      font-size:13px;
+      transition:all 0.2s;
+      min-height:44px;
+    `;
+    btn.addEventListener("mouseenter", () => {
+      btn.style.background = "rgba(255,255,255,0.05)";
+      btn.style.borderColor = "var(--ic-accent, var(--accent))";
+    });
+    btn.addEventListener("mouseleave", () => {
+      btn.style.background = "var(--ic-panel, var(--panel2))";
+      btn.style.borderColor = "var(--ic-border, var(--line))";
+    });
     row.appendChild(btn);
   });
   host.appendChild(row);
diff --git a/modules/core-system/ui/frontend-ts/pages/account/contract.ts b/modules/core-system/ui/frontend-ts/pages/account/contract.ts
index a403895..727786a 100644
--- a/modules/core-system/ui/frontend-ts/pages/account/contract.ts
+++ b/modules/core-system/ui/frontend-ts/pages/account/contract.ts
@@ -6,6 +6,8 @@ export const SAFE_MODE_ALLOWED = true;
 export const REQUIRED_ROLES: Role[] = ["USER", "ADMIN", "SYSADMIN", "DEVELOPER"];
 
 export function canAccess(role: Role, safeMode: SafeMode): boolean {
+  // Master a toujours acc√®s √† tout
+  if (role === "MASTER") return true;
   if (safeMode === "STRICT" && !SAFE_MODE_ALLOWED) return false;
   return REQUIRED_ROLES.includes(role);
 }
diff --git a/modules/core-system/ui/frontend-ts/pages/dashboard.ts b/modules/core-system/ui/frontend-ts/pages/dashboard.ts
index b0a9818..a062ab0 100644
--- a/modules/core-system/ui/frontend-ts/pages/dashboard.ts
+++ b/modules/core-system/ui/frontend-ts/pages/dashboard.ts
@@ -1,5 +1,5 @@
 import { coreBaseStyles } from "../shared/coreStyles";
-import { logout, requireSession } from "../../../../../platform-services/security/auth/localAuth";
+import { logout, requireSession } from "/src/localAuth";
 import { MAIN_SYSTEM_ENABLED, MAIN_SYSTEM_LAYOUT, MAIN_SYSTEM_MODULES } from "./_shared/mainSystem.data";
 import { appendList, appendTable, sectionCard } from "./_shared/uiBlocks";
 import { mountSections, type SectionSpec } from "./_shared/sections";
@@ -10,7 +10,7 @@ import { navigate } from "/src/runtime/navigate";
 
 const UI = {
   WRAP: "align-items:flex-start; padding-top:38px;",
-  CARD: "width:min(920px,92vw);",
+  CARD: "width:100%; max-width:100%;",
   BTN: "width:auto; margin-top:0;",
   USER_BOX: "margin-top:16px; border:1px solid var(--ic-border); border-radius:14px; padding:14px;",
   ACTION_ROW: "margin-top:14px; display:flex; gap:10px; flex-wrap:wrap;"
diff --git a/modules/core-system/ui/frontend-ts/pages/dashboard/dashboardPage.ts b/modules/core-system/ui/frontend-ts/pages/dashboard/dashboardPage.ts
deleted file mode 100644
index 89b2248..0000000
--- a/modules/core-system/ui/frontend-ts/pages/dashboard/dashboardPage.ts
+++ /dev/null
@@ -1,36 +0,0 @@
-import { coreBaseStyles } from "../../shared/coreStyles";
-import { requireSession, logout } from "../../../../../../platform-services/security/auth/localAuth";
-
-export function renderDashboardPage(): string {
-  const s = requireSession();
-  return `
-    ${coreBaseStyles()}
-    <div class="cxWrap" style="align-items:flex-start; padding-top:38px;">
-      <div class="cxCard" style="width:min(920px,92vw);">
-        <div class="cxRow">
-          <div>
-            <div class="cxTitle">Dashboard</div>
-            <div class="cxMuted">Core System ‚Äî page socle. Widgets viendront ensuite via registry.</div>
-          </div>
-          <button class="cxBtn" style="width:auto; margin-top:0;" id="cxLogout">D√©connexion</button>
-        </div>
-
-        <div style="margin-top:16px; border:1px solid var(--line); border-radius:14px; padding:14px;">
-          <div><b>Utilisateur</b>: ${s.username}</div>
-          <div><b>R√¥le</b>: ${s.role}</div>
-        </div>
-
-        <div style="margin-top:14px; display:flex; gap:10px; flex-wrap:wrap;">
-          <button class="cxBtn" style="width:auto; margin-top:0;" id="cxGoLogin">Retour Login</button>
-        </div>
-      </div>
-    </div>
-  `;
-}
-
-export function bindDashboardEvents(host: { navigate: (r: string) => void }) {
-  const out = document.getElementById("cxLogout") as HTMLButtonElement | null;
-  const back = document.getElementById("cxGoLogin") as HTMLButtonElement | null;
-  if (out) out.onclick = () => { logout(); host.navigate("#/login"); };
-  if (back) back.onclick = () => { host.navigate("#/login"); };
-}
diff --git a/modules/core-system/ui/frontend-ts/pages/developer/contract.ts b/modules/core-system/ui/frontend-ts/pages/developer/contract.ts
index 0fabf57..f7a6b3e 100644
--- a/modules/core-system/ui/frontend-ts/pages/developer/contract.ts
+++ b/modules/core-system/ui/frontend-ts/pages/developer/contract.ts
@@ -6,6 +6,8 @@ export const SAFE_MODE_ALLOWED = true;
 export const REQUIRED_ROLES: Role[] = ["DEVELOPER", "SYSADMIN"];
 
 export function canAccess(role: Role, safeMode: SafeMode): boolean {
+  // Master a toujours acc√®s √† tout
+  if (role === "MASTER") return true;
   if (safeMode === "STRICT" && !SAFE_MODE_ALLOWED) return false;
   return REQUIRED_ROLES.includes(role);
 }
diff --git a/modules/core-system/ui/frontend-ts/pages/developer/index.tsx b/modules/core-system/ui/frontend-ts/pages/developer/index.tsx
index 6c8bf81..345e100 100644
--- a/modules/core-system/ui/frontend-ts/pages/developer/index.tsx
+++ b/modules/core-system/ui/frontend-ts/pages/developer/index.tsx
@@ -3,6 +3,7 @@ import { mountSections, type SectionSpec } from "../_shared/sections";
 import { renderRecommendations } from "../_shared/recommendations";
 import { getSafeMode } from "../_shared/recommendations.ctx";
 import { sectionCard } from "../_shared/uiBlocks";
+import { createToolboxCard } from "../_shared/toolboxCard";
 import { getSession } from "../_shared/localAuth";
 import { renderAccessDenied } from "../_shared/renderAccessDenied";
 import { canAccessPage, canAccessSection, type Role } from "../_shared/rolePolicy";
@@ -17,28 +18,6 @@ import { render_audit_log } from "./sections/audit-log";
 function __fmtTs(ts?: number) {
   try {
     if (typeof ts !== "number") return "n/a";
-
-      {/* Cache Audit (read-only) */}
-      {(() => {
-        const a: any = __readCacheAudit();
-        return (
-          <div style={{ border: "1px solid rgba(255,255,255,0.12)", borderRadius: 12, padding: 12, marginBottom: 12 }}>
-            <div style={{ display: "flex", alignItems: "center", justifyContent: "space-between", gap: 12 }}>
-              <div style={{ fontWeight: 700 }}>Cache Audit</div>
-              <div style={{ opacity: 0.8, fontSize: 12 }}>{a?.ts ? __fmtTs(a.ts) : "n/a"}</div>
-            </div>
-            <div style={{ marginTop: 8, display: "grid", gridTemplateColumns: "repeat(2, minmax(0, 1fr))", gap: 8, fontSize: 13 }}>
-              <div><span style={{ opacity: 0.7 }}>schemaVersion:</span> <span>{typeof a?.schemaVersion === "number" ? a.schemaVersion : "n/a"}</span></div>
-              <div><span style={{ opacity: 0.7 }}>swrDisabled:</span> <span>{typeof a?.swrDisabled === "boolean" ? String(a.swrDisabled) : "n/a"}</span></div>
-              <div><span style={{ opacity: 0.7 }}>metricsDisabled:</span> <span>{typeof a?.metricsDisabled === "boolean" ? String(a.metricsDisabled) : "n/a"}</span></div>
-              <div><span style={{ opacity: 0.7 }}>surface:</span> <span>{a ? "present" : "absent"}</span></div>
-            </div>
-            <div style={{ marginTop: 8, opacity: 0.7, fontSize: 12 }}>
-              Read-only governance surface. Best-effort display.
-            </div>
-          </div>
-        );
-      })()}
     const d = new Date(ts);
     return isNaN(d.getTime()) ? "n/a" : d.toISOString();
   } catch { return "n/a"; }
@@ -76,14 +55,145 @@ export function renderDeveloper(root: HTMLElement): void {
       id: "developer-recommendations",
       title: "Recommandations",
       render: (host) => {
-        renderRecommendations(host, {
+        const card = createToolboxCard("Recommandations", "Suggestions et optimisations pour le syst√®me");
+        const content = (card as any).content;
+        renderRecommendations(content, {
           pageId: "developer",
           scopeId: "developer",
           role,
           safeMode
         });
+        host.appendChild(card);
       }
     },
+    {
+      id: "developer-edit-mode",
+      title: "Mode √©dition",
+      render: (host) => {
+        const card = createToolboxCard("Mode √©dition visuelle", "√âditer visuellement les pages de l'application");
+        const content = (card as any).content;
+        
+        const description = document.createElement("div");
+        description.style.cssText = `
+          padding: 12px;
+          background: rgba(255,255,255,0.02);
+          border: 1px solid var(--ic-border, var(--line));
+          border-radius: 8px;
+          margin-bottom: 16px;
+          font-size: 13px;
+          line-height: 1.6;
+          color: var(--ic-text, var(--text));
+        `;
+        description.textContent = "Activez le mode √©dition pour modifier visuellement les pages. Les modifications sont sauvegard√©es en brouillon avant publication.";
+        content.appendChild(description);
+        
+        const actionsContainer = document.createElement("div");
+        actionsContainer.style.cssText = "display: flex; gap: 12px; flex-wrap: wrap;";
+        
+        // Bouton pour ouvrir l'√©diteur visuel
+        const openEditorBtn = document.createElement("button");
+        openEditorBtn.textContent = "üñäÔ∏è Ouvrir l'√©diteur visuel";
+        openEditorBtn.style.cssText = `
+          padding: 10px 16px;
+          background: var(--ic-accent, #4ec9b0);
+          color: #1e1e1e;
+          border: none;
+          border-radius: 8px;
+          cursor: pointer;
+          font-weight: 600;
+          font-size: 14px;
+          transition: all 0.2s;
+        `;
+        openEditorBtn.onmouseenter = () => {
+          openEditorBtn.style.background = "#45b8a0";
+          openEditorBtn.style.transform = "scale(1.02)";
+        };
+        openEditorBtn.onmouseleave = () => {
+          openEditorBtn.style.background = "var(--ic-accent, #4ec9b0)";
+          openEditorBtn.style.transform = "";
+        };
+        openEditorBtn.onclick = async () => {
+          try {
+            const { openVisualEditorWindow } = await import("/src/core/editor/visualEditorWindow");
+            const { getAvailablePages } = await import("/src/core/editor/pageSelector");
+            const pages = getAvailablePages("CP");
+            if (pages.length > 0) {
+              openVisualEditorWindow(pages[0]); // Ouvrir le dashboard par d√©faut
+            }
+          } catch (e) {
+            console.error("Erreur lors de l'ouverture de l'√©diteur visuel:", e);
+            alert("Impossible d'ouvrir l'√©diteur visuel. V√©rifiez que les modules sont charg√©s.");
+          }
+        };
+        
+        // Bouton pour activer/d√©sactiver le mode √©dition sur la page actuelle
+        const toggleEditModeBtn = document.createElement("button");
+        let editModeActive = false;
+        
+        const updateToggleButton = () => {
+          toggleEditModeBtn.textContent = editModeActive ? "‚ùå D√©sactiver le mode √©dition" : "‚úÖ Activer le mode √©dition";
+          toggleEditModeBtn.style.background = editModeActive ? "rgba(244, 135, 113, 0.15)" : "rgba(78, 201, 176, 0.15)";
+          toggleEditModeBtn.style.color = editModeActive ? "#f48771" : "#4ec9b0";
+        };
+        
+        updateToggleButton();
+        toggleEditModeBtn.style.cssText = `
+          padding: 10px 16px;
+          background: rgba(78, 201, 176, 0.15);
+          color: #4ec9b0;
+          border: 1px solid var(--ic-border, var(--line));
+          border-radius: 8px;
+          cursor: pointer;
+          font-weight: 600;
+          font-size: 14px;
+          transition: all 0.2s;
+        `;
+        toggleEditModeBtn.onmouseenter = () => {
+          toggleEditModeBtn.style.background = editModeActive ? "rgba(244, 135, 113, 0.25)" : "rgba(78, 201, 176, 0.25)";
+          toggleEditModeBtn.style.transform = "scale(1.02)";
+        };
+        toggleEditModeBtn.onmouseleave = () => {
+          toggleEditModeBtn.style.background = editModeActive ? "rgba(244, 135, 113, 0.15)" : "rgba(78, 201, 176, 0.15)";
+          toggleEditModeBtn.style.transform = "";
+        };
+        toggleEditModeBtn.onclick = async () => {
+          try {
+            const { enableEditMode, disableEditMode, isEditMode } = await import("/src/core/editor/visualEditor");
+            if (editModeActive) {
+              disableEditMode();
+              editModeActive = false;
+            } else {
+              const enabled = enableEditMode();
+              if (enabled) {
+                editModeActive = true;
+              }
+            }
+            updateToggleButton();
+          } catch (e) {
+            console.error("Erreur lors du basculement du mode √©dition:", e);
+            alert("Impossible de basculer le mode √©dition. V√©rifiez que les modules sont charg√©s.");
+          }
+        };
+        
+        actionsContainer.appendChild(openEditorBtn);
+        actionsContainer.appendChild(toggleEditModeBtn);
+        content.appendChild(actionsContainer);
+        
+        // V√©rifier l'√©tat initial du mode √©dition
+        (async () => {
+          try {
+            const { isEditMode } = await import("/src/core/editor/visualEditor");
+            editModeActive = isEditMode();
+            updateToggleButton();
+          } catch (e) {
+            // Ignorer si le module n'est pas encore charg√©
+          }
+        })();
+        
+        host.appendChild(card);
+      },
+      requiresRoles: ["SYSADMIN", "DEVELOPER"]
+    },
     {
       id: "toolbox-registry-viewer",
       title: "Registry viewer",
@@ -118,16 +228,49 @@ export function renderDeveloper(root: HTMLElement): void {
       id: "developer-entitlements",
       title: "Entitlements (manual)",
       render: (host) => {
-        const card = sectionCard("Manual Subscription Provisioning");
+        const card = createToolboxCard("Manual Subscription Provisioning", "Gestion manuelle des abonnements");
+        const content = (card as any).content;
+        
         const note = document.createElement("div");
-        note.style.cssText = "opacity:.85;margin-bottom:8px";
+        note.style.cssText = `
+          padding: 12px;
+          background: rgba(255,255,255,0.02);
+          border: 1px solid var(--ic-border, var(--line));
+          border-radius: 8px;
+          margin-bottom: 16px;
+          font-size: 13px;
+          line-height: 1.6;
+          color: var(--ic-text, var(--text));
+        `;
         note.textContent = "Activer/d√©sactiver plan et modules sans billing (local only).";
+        content.appendChild(note);
+        
         const link = document.createElement("a");
         link.href = "#/developer/entitlements";
         link.textContent = "Ouvrir la page Entitlements";
-        link.style.cssText = "display:inline-block;margin-top:4px";
-        card.appendChild(note);
-        card.appendChild(link);
+        link.style.cssText = `
+          display:inline-flex;
+          align-items:center;
+          gap:8px;
+          padding:10px 16px;
+          background:var(--ic-panel, var(--panel2));
+          border:1px solid var(--ic-border, var(--line));
+          border-radius:8px;
+          color:var(--ic-text, var(--text));
+          text-decoration:none;
+          font-weight:600;
+          font-size:14px;
+          transition:all 0.2s;
+        `;
+        link.onmouseenter = () => {
+          link.style.background = "rgba(255,255,255,0.05)";
+          link.style.borderColor = "var(--ic-accent, var(--accent))";
+        };
+        link.onmouseleave = () => {
+          link.style.background = "var(--ic-panel, var(--panel2))";
+          link.style.borderColor = "var(--ic-border, var(--line))";
+        };
+        content.appendChild(link);
         host.appendChild(card);
       },
       requiresRoles: ["SYSADMIN", "DEVELOPER"]
@@ -151,20 +294,31 @@ export function renderDeveloper(root: HTMLElement): void {
   safeRender(root, () => {
     root.innerHTML = "";
     if (hiddenSections.length > 0) {
-      const card = sectionCard("Sections r√©serv√©es");
+      const card = createToolboxCard("Sections r√©serv√©es", "Sections accessibles uniquement pour SYSADMIN");
       card.setAttribute("data-testid", "sections-reserved");
+      const content = (card as any).content;
+      
       const note = document.createElement("div");
-      note.style.cssText = "opacity:.8;margin-bottom:8px";
+      note.style.cssText = `
+        padding: 12px;
+        background: rgba(255,255,255,0.02);
+        border: 1px solid var(--ic-border, var(--line));
+        border-radius: 8px;
+        margin-bottom: 16px;
+        font-size: 13px;
+        color: var(--ic-text, var(--text));
+      `;
       note.textContent = "Certaines sections sont visibles uniquement pour SYSADMIN.";
-      card.appendChild(note);
+      content.appendChild(note);
+      
       const list = document.createElement("ul");
-      list.style.cssText = "margin:0;padding-left:18px;opacity:.9";
+      list.style.cssText = "margin:0;padding-left:18px;opacity:.9;color:var(--ic-text, var(--text));";
       hiddenSections.forEach((s) => {
         const li = document.createElement("li");
         li.textContent = `${s.title} (${s.id})`;
         list.appendChild(li);
       });
-      card.appendChild(list);
+      content.appendChild(list);
       root.appendChild(card);
     }
     mountSections(root, allowedSections, { page: "developer", role, safeMode });
@@ -172,6 +326,7 @@ export function renderDeveloper(root: HTMLElement): void {
 }
 
 export const developerSections = [
+  "developer-edit-mode",
   "toolbox-registry-viewer",
   "toolbox-contracts-table",
   "toolbox-contracts-form",
diff --git a/modules/core-system/ui/frontend-ts/pages/developer/sections/audit-log.ts b/modules/core-system/ui/frontend-ts/pages/developer/sections/audit-log.ts
index 2bc6444..7b08903 100644
--- a/modules/core-system/ui/frontend-ts/pages/developer/sections/audit-log.ts
+++ b/modules/core-system/ui/frontend-ts/pages/developer/sections/audit-log.ts
@@ -1,13 +1,27 @@
 import { getAuditLog } from "../../_shared/audit";
-import { appendParagraph, appendTable, sectionCard } from "../../_shared/uiBlocks";
+import { appendParagraph, appendTable } from "../../_shared/uiBlocks";
+import { createToolboxCard } from "../../_shared/toolboxCard";
 
 export function render_audit_log(host: HTMLElement): void {
-  const card = sectionCard("Audit log (UI)");
-  appendParagraph(card, "Journal read-only des actions UI permises. Aucun contenu sensible.");
+  const card = createToolboxCard("Audit log (UI)", "Journal read-only des actions UI permises");
+  const content = (card as any).content;
+  
+  const infoDiv = document.createElement("div");
+  infoDiv.style.cssText = `
+    padding: 12px;
+    background: rgba(255,255,255,0.02);
+    border: 1px solid var(--ic-border, var(--line));
+    border-radius: 8px;
+    margin-bottom: 16px;
+    font-size: 13px;
+    color: var(--ic-text, var(--text));
+  `;
+  infoDiv.textContent = "Journal read-only des actions UI permises. Aucun contenu sensible.";
+  content.appendChild(infoDiv);
 
   const entries = getAuditLog().slice(-50).reverse();
   appendTable(
-    card,
+    content,
     ["Time", "Code", "Detail"],
     entries.map((e) => ({
       Time: e.ts,
diff --git a/modules/core-system/ui/frontend-ts/pages/developer/sections/contracts-form.ts b/modules/core-system/ui/frontend-ts/pages/developer/sections/contracts-form.ts
index f698534..45a6557 100644
--- a/modules/core-system/ui/frontend-ts/pages/developer/sections/contracts-form.ts
+++ b/modules/core-system/ui/frontend-ts/pages/developer/sections/contracts-form.ts
@@ -1,10 +1,13 @@
 import { MAIN_SYSTEM_FORM_CONTRACT } from "../../_shared/mainSystem.data";
-import { appendTable, sectionCard } from "../../_shared/uiBlocks";
+import { appendTable } from "../../_shared/uiBlocks";
+import { createToolboxCard } from "../../_shared/toolboxCard";
 
 export function render_contracts_form(host: HTMLElement): void {
-  const card = sectionCard("Contracts: FormDef");
+  const card = createToolboxCard("Contracts: FormDef", "D√©finition des contrats de formulaires");
+  const content = (card as any).content;
+  
   appendTable(
-    card,
+    content,
     ["fields", "validation", "visibleForRoles"],
     [
       {
diff --git a/modules/core-system/ui/frontend-ts/pages/developer/sections/contracts-table.ts b/modules/core-system/ui/frontend-ts/pages/developer/sections/contracts-table.ts
index 6ca055d..afa19a5 100644
--- a/modules/core-system/ui/frontend-ts/pages/developer/sections/contracts-table.ts
+++ b/modules/core-system/ui/frontend-ts/pages/developer/sections/contracts-table.ts
@@ -1,10 +1,13 @@
 import { MAIN_SYSTEM_TABLE_CONTRACT } from "../../_shared/mainSystem.data";
-import { appendTable, sectionCard } from "../../_shared/uiBlocks";
+import { appendTable } from "../../_shared/uiBlocks";
+import { createToolboxCard } from "../../_shared/toolboxCard";
 
 export function render_contracts_table(host: HTMLElement): void {
-  const card = sectionCard("Contracts: TableDef / ColumnDef");
+  const card = createToolboxCard("Contracts: TableDef / ColumnDef", "D√©finition des contrats de tableaux");
+  const content = (card as any).content;
+  
   appendTable(
-    card,
+    content,
     ["id", "columns", "actions", "visibleForRoles"],
     [
       {
diff --git a/modules/core-system/ui/frontend-ts/pages/developer/sections/datasources-viewer.ts b/modules/core-system/ui/frontend-ts/pages/developer/sections/datasources-viewer.ts
index a293e90..d9efbc1 100644
--- a/modules/core-system/ui/frontend-ts/pages/developer/sections/datasources-viewer.ts
+++ b/modules/core-system/ui/frontend-ts/pages/developer/sections/datasources-viewer.ts
@@ -1,14 +1,17 @@
 import { MAIN_SYSTEM_DATASOURCES } from "../../_shared/mainSystem.data";
-import { appendTable, sectionCard } from "../../_shared/uiBlocks";
+import { appendTable } from "../../_shared/uiBlocks";
+import { createToolboxCard } from "../../_shared/toolboxCard";
 
 const EXTERNAL_TYPES = new Set(["files", "api_stub"]);
 
 export function render_datasources_viewer(host: HTMLElement, safeMode: string): void {
-  const card = sectionCard("Datasources (contract)");
+  const card = createToolboxCard("Datasources (contract)", "Types de sources de donn√©es disponibles");
+  const content = (card as any).content;
+  
   const rows = MAIN_SYSTEM_DATASOURCES.types.map((t) => ({
     type: t,
     status: safeMode === "STRICT" && EXTERNAL_TYPES.has(t) ? "blocked" : "allowed"
   }));
-  appendTable(card, ["type", "status"], rows);
+  appendTable(content, ["type", "status"], rows);
   host.appendChild(card);
 }
diff --git a/modules/core-system/ui/frontend-ts/pages/developer/sections/registry-viewer.ts b/modules/core-system/ui/frontend-ts/pages/developer/sections/registry-viewer.ts
index d71a020..d110188 100644
--- a/modules/core-system/ui/frontend-ts/pages/developer/sections/registry-viewer.ts
+++ b/modules/core-system/ui/frontend-ts/pages/developer/sections/registry-viewer.ts
@@ -1,10 +1,22 @@
 import { MAIN_SYSTEM_MODULES } from "../../_shared/mainSystem.data";
-import { appendActionRow, appendTable, bindActions, sectionCard } from "../../_shared/uiBlocks";
+import { appendActionRow, appendTable, bindActions } from "../../_shared/uiBlocks";
+import { createToolboxCard } from "../../_shared/toolboxCard";
 
 export function render_registry_viewer(host: HTMLElement): void {
-  const card = sectionCard("Registry viewer");
+  const card = createToolboxCard("Registry viewer", "Vue d'ensemble des composants et modules enregistr√©s");
+  const content = (card as any).content;
+  
+  // Panel Components
+  const componentsPanel = document.createElement("div");
+  componentsPanel.style.cssText = "margin-bottom:20px;";
+  componentsPanel.innerHTML = `
+    <div style="font-size:12px;font-weight:600;color:var(--ic-mutedText, var(--muted));text-transform:uppercase;letter-spacing:0.5px;margin-bottom:12px;">
+      Composants
+    </div>
+  `;
+  const componentsTable = document.createElement("div");
   appendTable(
-    card,
+    componentsTable,
     ["Component", "Type", "Notes"],
     [
       { Component: "Table", Type: "builtin", Notes: "TableDef/ColumnDef contract" },
@@ -12,11 +24,25 @@ export function render_registry_viewer(host: HTMLElement): void {
       { Component: "Blocks", Type: "runtime", Notes: "text | component" }
     ]
   );
+  componentsPanel.appendChild(componentsTable);
+  content.appendChild(componentsPanel);
+  
+  // Panel Modules
+  const modulesPanel = document.createElement("div");
+  modulesPanel.style.cssText = "margin-bottom:20px;";
+  modulesPanel.innerHTML = `
+    <div style="font-size:12px;font-weight:600;color:var(--ic-mutedText, var(--muted));text-transform:uppercase;letter-spacing:0.5px;margin-bottom:12px;">
+      Modules
+    </div>
+  `;
+  const modulesTable = document.createElement("div");
   appendTable(
-    card,
+    modulesTable,
     ["Module", "Routes"],
     MAIN_SYSTEM_MODULES.map((m) => ({ Module: m.id, Routes: m.routes.join(", ") }))
   );
+  modulesPanel.appendChild(modulesTable);
+  content.appendChild(modulesPanel);
 
   const actions = [
     { id: "nav_dashboard", label: "Aller au Dashboard", type: "navigate", payload: "#/dashboard" },
@@ -24,7 +50,7 @@ export function render_registry_viewer(host: HTMLElement): void {
     { id: "noop_registry", label: "No-op", type: "noop" }
   ] as const;
 
-  const row = appendActionRow(card, actions);
+  const row = appendActionRow(content, actions);
   bindActions(row, actions, {
     allowRoutes: ["#/dashboard", "#/users", "#/account", "#/verification", "#/developer", "#/toolbox"],
     exportRows: MAIN_SYSTEM_MODULES.map((m) => ({ id: m.id, label: m.label, type: m.type, routes: m.routes.join(";") }))
diff --git a/modules/core-system/ui/frontend-ts/pages/developer/sections/rules-viewer.ts b/modules/core-system/ui/frontend-ts/pages/developer/sections/rules-viewer.ts
index 620ebd1..2721c18 100644
--- a/modules/core-system/ui/frontend-ts/pages/developer/sections/rules-viewer.ts
+++ b/modules/core-system/ui/frontend-ts/pages/developer/sections/rules-viewer.ts
@@ -1,10 +1,13 @@
 import { MAIN_SYSTEM_RULES } from "../../_shared/mainSystem.data";
-import { appendTable, sectionCard } from "../../_shared/uiBlocks";
+import { appendTable } from "../../_shared/uiBlocks";
+import { createToolboxCard } from "../../_shared/toolboxCard";
 
 export function render_rules_viewer(host: HTMLElement): void {
-  const card = sectionCard("Rules engine inventory");
+  const card = createToolboxCard("Rules engine inventory", "Inventaire des r√®gles du moteur de r√®gles");
+  const content = (card as any).content;
+  
   appendTable(
-    card,
+    content,
     ["category", "items"],
     [
       { category: "value_refs", items: MAIN_SYSTEM_RULES.valueRefs.join(" ") },
diff --git a/modules/core-system/ui/frontend-ts/pages/dossiers/contract.ts b/modules/core-system/ui/frontend-ts/pages/dossiers/contract.ts
index ab9cad0..99f460b 100644
--- a/modules/core-system/ui/frontend-ts/pages/dossiers/contract.ts
+++ b/modules/core-system/ui/frontend-ts/pages/dossiers/contract.ts
@@ -7,10 +7,14 @@ export const REQUIRED_ROLES: Role[] = ["SYSADMIN", "DEVELOPER", "ADMIN"];
 export const WRITE_ROLES: Role[] = ["SYSADMIN", "DEVELOPER", "ADMIN"];
 
 export function canAccess(role: Role, safeMode: SafeMode): boolean {
+  // Master a toujours acc√®s √† tout
+  if (role === "MASTER") return true;
   if (safeMode === "STRICT" && !SAFE_MODE_ALLOWED) return false;
   return REQUIRED_ROLES.includes(role);
 }
 
 export function canWrite(role: Role): boolean {
+  // Master peut toujours √©crire
+  if (role === "MASTER") return true;
   return WRITE_ROLES.includes(role);
 }
diff --git a/modules/core-system/ui/frontend-ts/pages/login/loginPage.ts b/modules/core-system/ui/frontend-ts/pages/login/loginPage.ts
deleted file mode 100644
index 02b2010..0000000
--- a/modules/core-system/ui/frontend-ts/pages/login/loginPage.ts
+++ /dev/null
@@ -1,89 +0,0 @@
-/* ICONTROL_LEGACY_LOGINPAGE_V1: not routed by moduleLoader/router; keep for reference only */
-import { coreBaseStyles } from "../../shared/coreStyles";
-import {
-  authenticate,
-  getSession,
-} from "../../../../../../platform-services/security/auth/localAuth";
-
-export function renderLoginPage(): string {
-  const s = getSession();
-  const already = s
-    ? `<div class="cxOk">Session active: <b>${s.username}</b> (${s.role})</div>`
-    : "";
-  return `
-    ${coreBaseStyles()}
-    <div class="cxTopRight">
-      <select class="cxLang" id="cxLang">
-        <option value="fr" selected>FR</option>
-        <option value="en">EN</option>
-      </select>
-      <a class="cxLink" href="#/login?forgot=1" id="cxForgot">Mot de passe oubli√©</a>
-    </div>
-
-    <div class="cxWrap">
-      <div class="cxCard" role="region" aria-label="Login">
-        <div class="cxTitle"><span>i</span>CONTROL ‚Äî Connexion</div>
-        <div class="cxMuted">Acc√®s s√©curis√© au syst√®me. Auth locale (bootstrap) pour d√©marrage, pr√™t pour Auth Provider ult√©rieur.</div>
-
-        <div class="cxField">
-          <label class="cxLabel" for="cxUser">Identifiant</label>
-          <input class="cxInput" id="cxUser" autocomplete="username" placeholder="ex: sysadmin, Waldhari" />
-        </div>
-
-        <div class="cxField">
-          <label class="cxLabel" for="cxPass">Mot de passe</label>
-          <input class="cxInput" id="cxPass" type="password" autocomplete="current-password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" />
-        </div>
-
-        <button class="cxBtn" id="cxLoginBtn" type="button">Se connecter</button>
-
-        <div id="cxLoginMsg"></div>
-        ${already}
-      </div>
-    </div>
-  `;
-}
-
-export function bindLoginEvents(host: { navigate: (r: string) => void }) {
-  const u = document.getElementById("cxUser") as HTMLInputElement | null;
-  const p = document.getElementById("cxPass") as HTMLInputElement | null;
-  const b = document.getElementById("cxLoginBtn") as HTMLButtonElement | null;
-  const msg = document.getElementById("cxLoginMsg") as HTMLDivElement | null;
-
-  if (!u || !p || !b || !msg) return;
-
-  const setMsg = (html: string) => {
-    msg.innerHTML = html;
-  };
-
-  const doLogin = () => {
-    const user = (u.value || "").trim();
-    const pass = (p.value || "").trim();
-
-    if (!user || !pass) {
-      setMsg(
-        `<div class="cxErr">Veuillez entrer un identifiant et un mot de passe.</div>`,
-      );
-      return;
-    }
-
-    const s = authenticate(user, pass);
-    if (!s) {
-      setMsg(`<div class="cxErr">Identifiant invalide.</div>`);
-      return;
-    }
-
-    setMsg(
-      `<div class="cxOk">Connect√©: <b>${s.username}</b> (${s.role}). Redirection‚Ä¶</div>`,
-    );
-    host.navigate("#/dashboard");
-  };
-
-  b.onclick = doLogin;
-  p.onkeydown = (e) => {
-    if (e.key === "Enter") doLogin();
-  };
-  u.onkeydown = (e) => {
-    if (e.key === "Enter") doLogin();
-  };
-}
diff --git a/modules/core-system/ui/frontend-ts/pages/logs/contract.ts b/modules/core-system/ui/frontend-ts/pages/logs/contract.ts
index 30b7b68..7a7870e 100644
--- a/modules/core-system/ui/frontend-ts/pages/logs/contract.ts
+++ b/modules/core-system/ui/frontend-ts/pages/logs/contract.ts
@@ -6,6 +6,8 @@ export const SAFE_MODE_ALLOWED = true;
 export const REQUIRED_ROLES: Role[] = ["ADMIN", "SYSADMIN", "DEVELOPER"];
 
 export function canAccess(role: Role, safeMode: SafeMode): boolean {
+  // Master a toujours acc√®s √† tout
+  if (role === "MASTER") return true;
   if (safeMode === "STRICT" && !SAFE_MODE_ALLOWED) return false;
   return REQUIRED_ROLES.includes(role);
 }
diff --git a/modules/core-system/ui/frontend-ts/pages/logs/sections/audit-log.ts b/modules/core-system/ui/frontend-ts/pages/logs/sections/audit-log.ts
index ff50f1c..e856169 100644
--- a/modules/core-system/ui/frontend-ts/pages/logs/sections/audit-log.ts
+++ b/modules/core-system/ui/frontend-ts/pages/logs/sections/audit-log.ts
@@ -1,26 +1,116 @@
 import { getAuditLog } from "../../_shared/audit";
-import { blockKeyValueTable, sectionCard } from "../../_shared/uiBlocks";
+import { sectionCard } from "../../_shared/uiBlocks";
 import { getLogFilters } from "./filters";
 
 export function renderLogsAudit(host: HTMLElement): void {
   const card = sectionCard("Audit log (lecture seule)");
   const filters = getLogFilters();
-  const entries = getAuditLog().slice(-200).reverse().filter((e) => {
-    const line = `${e.code || ""} ${e.detail || ""} ${e.actionId || ""}`.toLowerCase();
+  const allEntries = getAuditLog();
+  
+  // Filtrer par p√©riode
+  const now = Date.now();
+  const periodMs = filters.period === "1H" ? 3600000 :
+                   filters.period === "24H" ? 86400000 :
+                   filters.period === "7D" ? 604800000 :
+                   filters.period === "30D" ? 2592000000 : 0;
+  
+  let entries = allEntries.slice(-500).reverse().filter((e) => {
+    // Filtre p√©riode
+    if (filters.period && filters.period !== "ALL" && periodMs > 0) {
+      const entryTime = e.ts ? new Date(e.ts).getTime() : 0;
+      if (entryTime < (now - periodMs)) return false;
+    }
+    
+    // Filtre niveau
     if (filters.level === "WARN" && !String(e.code || "").startsWith("WARN_")) return false;
     if (filters.level === "ERR" && !String(e.code || "").startsWith("ERR_")) return false;
+    if (filters.level === "INFO" && (String(e.code || "").startsWith("WARN_") || String(e.code || "").startsWith("ERR_"))) return false;
+    
+    // Filtre recherche
+    const line = `${e.code || ""} ${e.detail || ""} ${e.actionId || ""} ${e.page || ""} ${e.section || ""}`.toLowerCase();
     if (filters.query && !line.includes(filters.query.toLowerCase())) return false;
+    
     return true;
   });
-  card.appendChild(
-    blockKeyValueTable({
-      title: "Derniers evenements (max 200)",
-      rows: entries.map((e) => ({
-        key: `${e.ts} ‚Ä¢ ${e.code || "INFO"}`,
-        value: e.detail || ""
-      }))
-    })
-  );
+
+  // Statistiques
+  const statsDiv = document.createElement("div");
+  statsDiv.setAttribute("style", "margin-bottom: 16px; padding: 12px; background: rgba(255,255,255,0.02); border-radius: 8px; display: flex; gap: 16px; flex-wrap: wrap;");
+  statsDiv.innerHTML = `
+    <div>
+      <div style="color: #858585; font-size: 12px;">Total</div>
+      <div style="font-weight: 600; color: #d4d4d4;">${allEntries.length}</div>
+    </div>
+    <div>
+      <div style="color: #858585; font-size: 12px;">Filtr√©s</div>
+      <div style="font-weight: 600; color: #d4d4d4;">${entries.length}</div>
+    </div>
+    <div>
+      <div style="color: #858585; font-size: 12px;">Erreurs</div>
+      <div style="font-weight: 600; color: #f48771;">${entries.filter(e => String(e.code || "").startsWith("ERR_")).length}</div>
+    </div>
+    <div>
+      <div style="color: #858585; font-size: 12px;">Avertissements</div>
+      <div style="font-weight: 600; color: #dcdcaa;">${entries.filter(e => String(e.code || "").startsWith("WARN_")).length}</div>
+    </div>
+  `;
+  card.appendChild(statsDiv);
+
+  // Tableau am√©lior√©
+  if (entries.length === 0) {
+    const empty = document.createElement("div");
+    empty.setAttribute("style", "padding: 40px; text-align: center; color: #858585;");
+    empty.textContent = "Aucun √©v√©nement ne correspond aux filtres.";
+    card.appendChild(empty);
+  } else {
+    const table = document.createElement("table");
+    table.setAttribute("style", "width: 100%; border-collapse: collapse; font-size: 13px;");
+    
+    const thead = document.createElement("thead");
+    thead.innerHTML = `
+      <tr style="border-bottom: 1px solid var(--ic-border, #2b3136);">
+        <th style="text-align: left; padding: 12px; color: #858585; font-size: 12px; font-weight: 600;">Date/Heure</th>
+        <th style="text-align: left; padding: 12px; color: #858585; font-size: 12px; font-weight: 600;">Code</th>
+        <th style="text-align: left; padding: 12px; color: #858585; font-size: 12px; font-weight: 600;">D√©tails</th>
+        <th style="text-align: left; padding: 12px; color: #858585; font-size: 12px; font-weight: 600;">Contexte</th>
+      </tr>
+    `;
+    table.appendChild(thead);
+    
+    const tbody = document.createElement("tbody");
+    entries.slice(0, 200).forEach((e) => {
+      const severity = String(e.code || "").startsWith("ERR_") ? "ERR" : 
+                      String(e.code || "").startsWith("WARN_") ? "WARN" : "INFO";
+      const severityColor = severity === "ERR" ? "#f48771" : severity === "WARN" ? "#dcdcaa" : "#4ec9b0";
+      
+      const tr = document.createElement("tr");
+      tr.setAttribute("style", "border-bottom: 1px solid var(--ic-border, #2b3136);");
+      
+      const date = e.ts ? new Date(e.ts).toLocaleString('fr-FR') : "-";
+      const context = [e.page, e.section, e.actionId].filter(Boolean).join(" ‚Ä¢ ") || "-";
+      
+      tr.innerHTML = `
+        <td style="padding: 12px; color: #858585; font-size: 12px; font-family: monospace;">${date}</td>
+        <td style="padding: 12px;">
+          <span style="padding: 4px 8px; background: ${severityColor}20; color: ${severityColor}; border-radius: 4px; font-size: 11px; font-weight: 600; font-family: monospace;">
+            ${e.code || "INFO"}
+          </span>
+        </td>
+        <td style="padding: 12px; color: #d4d4d4; font-size: 13px;">${e.detail || "-"}</td>
+        <td style="padding: 12px; color: #858585; font-size: 12px;">${context}</td>
+      `;
+      tbody.appendChild(tr);
+    });
+    table.appendChild(tbody);
+    card.appendChild(table);
+    
+    if (entries.length > 200) {
+      const more = document.createElement("div");
+      more.setAttribute("style", "margin-top: 12px; padding: 12px; text-align: center; color: #858585; font-size: 12px;");
+      more.textContent = `Affichage de 200 √©v√©nements sur ${entries.length}. Utilisez les filtres pour affiner.`;
+      card.appendChild(more);
+    }
+  }
 
   host.appendChild(card);
 }
diff --git a/modules/core-system/ui/frontend-ts/pages/logs/sections/filters.ts b/modules/core-system/ui/frontend-ts/pages/logs/sections/filters.ts
index c744600..3738ed5 100644
--- a/modules/core-system/ui/frontend-ts/pages/logs/sections/filters.ts
+++ b/modules/core-system/ui/frontend-ts/pages/logs/sections/filters.ts
@@ -2,45 +2,88 @@ import { blockFilterInput, sectionCard } from "../../_shared/uiBlocks";
 
 export type LogFilters = {
   query: string;
-  level: "ALL" | "WARN" | "ERR";
+  level: "ALL" | "WARN" | "ERR" | "INFO";
+  module?: string;
+  period?: "ALL" | "1H" | "24H" | "7D" | "30D";
 };
 
-const state: LogFilters = { query: "", level: "ALL" };
+const state: LogFilters = { query: "", level: "ALL", period: "ALL" };
 
 export function getLogFilters(): LogFilters {
   return { ...state };
 }
 
 export function renderLogsFilters(host: HTMLElement, onChange: () => void): void {
-  const card = sectionCard("Filtres");
+  const card = sectionCard("Filtres de logs");
   const wrap = document.createElement("div");
-  wrap.style.cssText = "display:flex;gap:10px;flex-wrap:wrap;margin-top:8px";
+  wrap.style.cssText = "display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:12px;margin-top:8px";
 
+  // Recherche textuelle
   const input = blockFilterInput({
-    placeholder: "Filtrer code/texte...",
+    placeholder: "Rechercher (code, texte, contexte)...",
     value: state.query,
     onChange: (next) => {
       state.query = next;
       onChange();
     }
   });
+  input.style.cssText = "width:100%;padding:10px 12px;border-radius:8px;border:1px solid var(--line);background:var(--ic-panel);color:var(--ic-text);";
 
-  const select = document.createElement("select");
-  select.style.cssText = "padding:8px 10px;border-radius:10px;border:1px solid var(--line);background:transparent;color:inherit;";
-  ["ALL", "WARN", "ERR"].forEach((s) => {
+  // Niveau de s√©v√©rit√©
+  const levelSelect = document.createElement("select");
+  levelSelect.style.cssText = "padding:10px 12px;border-radius:8px;border:1px solid var(--line);background:var(--ic-panel);color:var(--ic-text);cursor:pointer;";
+  ["ALL", "INFO", "WARN", "ERR"].forEach((s) => {
     const opt = document.createElement("option");
     opt.value = s;
-    opt.textContent = s;
+    opt.textContent = s === "ALL" ? "Tous les niveaux" : s;
     if (s === state.level) opt.selected = true;
-    select.appendChild(opt);
+    levelSelect.appendChild(opt);
   });
-  select.addEventListener("change", () => {
-    state.level = select.value as LogFilters["level"];
+  levelSelect.addEventListener("change", () => {
+    state.level = levelSelect.value as LogFilters["level"];
+    onChange();
+  });
+
+  // P√©riode
+  const periodSelect = document.createElement("select");
+  periodSelect.style.cssText = "padding:10px 12px;border-radius:8px;border:1px solid var(--line);background:var(--ic-panel);color:var(--ic-text);cursor:pointer;";
+  [
+    { value: "ALL", label: "Toutes les p√©riodes" },
+    { value: "1H", label: "Derni√®re heure" },
+    { value: "24H", label: "24 derni√®res heures" },
+    { value: "7D", label: "7 derniers jours" },
+    { value: "30D", label: "30 derniers jours" }
+  ].forEach(({ value, label }) => {
+    const opt = document.createElement("option");
+    opt.value = value;
+    opt.textContent = label;
+    if (value === (state.period || "ALL")) opt.selected = true;
+    periodSelect.appendChild(opt);
+  });
+  periodSelect.addEventListener("change", () => {
+    state.period = periodSelect.value as LogFilters["period"];
+    onChange();
+  });
+
+  // Bouton r√©initialiser
+  const resetBtn = document.createElement("button");
+  resetBtn.textContent = "R√©initialiser";
+  resetBtn.style.cssText = "padding:10px 16px;border-radius:8px;border:1px solid var(--line);background:transparent;color:var(--ic-text);cursor:pointer;font-weight:600;";
+  resetBtn.addEventListener("click", () => {
+    state.query = "";
+    state.level = "ALL";
+    state.period = "ALL";
+    state.module = undefined;
+    input.value = "";
+    levelSelect.value = "ALL";
+    periodSelect.value = "ALL";
     onChange();
   });
 
   wrap.appendChild(input);
-  wrap.appendChild(select);
+  wrap.appendChild(levelSelect);
+  wrap.appendChild(periodSelect);
+  wrap.appendChild(resetBtn);
   card.appendChild(wrap);
   host.appendChild(card);
 }
diff --git a/modules/core-system/ui/frontend-ts/pages/settings/branding.ts b/modules/core-system/ui/frontend-ts/pages/settings/branding.ts
index 7fe8463..7a43708 100644
--- a/modules/core-system/ui/frontend-ts/pages/settings/branding.ts
+++ b/modules/core-system/ui/frontend-ts/pages/settings/branding.ts
@@ -5,7 +5,7 @@ import { safeRender } from "../_shared/mainSystem.shared";
 import { getBrandResolved, setBrandLocalOverride, clearBrandLocalOverride } from "../../../../../../platform-services/branding/brandService";
 import { MAIN_SYSTEM_THEME } from "../_shared/mainSystem.data";
 const UI = {
-  WRAP: "max-width:980px;margin:20px auto;padding:0 16px",
+  WRAP: "width:100%;max-width:100%;margin:20px 0;padding:0 clamp(16px,2vw,24px)",
   TITLE: "font-size:18px;font-weight:900;margin-bottom:8px",
   TABLE: "width:100%;border-collapse:collapse",
   KEY_CELL: "padding:8px;border-bottom:1px solid var(--ic-border);color:var(--ic-mutedText);width:40%",
@@ -53,7 +53,7 @@ export function renderBrandingSettings(root: HTMLElement): void {
   if (!canEdit()) {
     navigate("#/dashboard");
     const html = `
-      <div style="max-width:980px;margin:26px auto;padding:0 16px">
+      <div style="width:100%;max-width:100%;margin:26px 0;padding:0 clamp(16px,2vw,24px)">
         <div style="font-size:22px;font-weight:900">Parametres ‚Äî Identit√© & marque</div>
         <div style="color:var(--ic-mutedText);margin-top:8px">Acces refuse (SYSADMIN/DEVELOPER requis).</div>
       </div>
@@ -75,7 +75,7 @@ export function renderBrandingSettings(root: HTMLElement): void {
       </div>
       <div style="color:var(--ic-mutedText);margin-top:8px">Changer le nom affiche sans toucher au code (localStorage).</div>
 
-      <div style="margin-top:16px;max-width:520px;display:flex;flex-direction:column;gap:10px">
+      <div style="margin-top:16px;width:100%;max-width:100%;display:flex;flex-direction:column;gap:10px">
         <label style="color:var(--ic-mutedText)">Nom de l'application</label>
         <input id="brand_app_name" value="${escapeHtml(currentName)}" placeholder="Ex: Innovex Control"
           style="padding:10px 12px;border-radius:12px;border:1px solid var(--ic-border);background:var(--ic-panel);color:var(--ic-text)" />
diff --git a/modules/core-system/ui/frontend-ts/pages/settings/index.ts b/modules/core-system/ui/frontend-ts/pages/settings/index.ts
index 9998874..0f59bc5 100644
--- a/modules/core-system/ui/frontend-ts/pages/settings/index.ts
+++ b/modules/core-system/ui/frontend-ts/pages/settings/index.ts
@@ -6,14 +6,14 @@ import { canAccessPage, type Role } from "../_shared/rolePolicy";
 import { mountSections, type SectionSpec } from "../_shared/sections";
 
 const UI = {
-  WRAP: "max-width:980px;margin:26px auto;padding:0 16px",
+  WRAP: "width:100%;max-width:100%;margin:26px 0;padding:0 clamp(16px,2vw,24px)",
   TITLE: "font-size:22px;font-weight:900",
   DESC: "color:var(--ic-mutedText);margin-top:8px",
   GRID: "margin-top:16px;display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:12px",
   CARD: "padding:14px;border-radius:18px;background:var(--ic-card);border:1px solid var(--ic-border);color:var(--ic-text)",
   CARD_TITLE: "font-weight:900",
   CARD_TEXT: "color:var(--ic-mutedText);margin-top:6px",
-  WRAP_GRID: "max-width:980px;margin:0 auto;padding:0 16px"
+  WRAP_GRID: "width:100%;max-width:100%;margin:0;padding:0 clamp(16px,2vw,24px)"
 } as const;
 
 export function renderSettingsPage(root: HTMLElement): void {
diff --git a/modules/core-system/ui/frontend-ts/pages/system/contract.ts b/modules/core-system/ui/frontend-ts/pages/system/contract.ts
index 9e1ca92..a73faaa 100644
--- a/modules/core-system/ui/frontend-ts/pages/system/contract.ts
+++ b/modules/core-system/ui/frontend-ts/pages/system/contract.ts
@@ -6,6 +6,8 @@ export const SAFE_MODE_ALLOWED = true;
 export const REQUIRED_ROLES: Role[] = ["ADMIN", "SYSADMIN", "DEVELOPER"];
 
 export function canAccess(role: Role, safeMode: SafeMode): boolean {
+  // Master a toujours acc√®s √† tout
+  if (role === "MASTER") return true;
   if (safeMode === "STRICT" && !SAFE_MODE_ALLOWED) return false;
   return REQUIRED_ROLES.includes(role);
 }
diff --git a/modules/core-system/ui/frontend-ts/pages/system/sections/safe-mode.ts b/modules/core-system/ui/frontend-ts/pages/system/sections/safe-mode.ts
index b510730..da923f8 100644
--- a/modules/core-system/ui/frontend-ts/pages/system/sections/safe-mode.ts
+++ b/modules/core-system/ui/frontend-ts/pages/system/sections/safe-mode.ts
@@ -1,12 +1,439 @@
 import type { SystemModel } from "../model";
 import { blockKeyValueTable } from "../../_shared/uiBlocks";
+import { addTooltipToElement } from "/src/core/ui/tooltip";
+import { getSafeMode } from "../../_shared/safeMode";
+
+// Historique des changements SAFE_MODE
+type SafeModeHistoryEntry = {
+  id: string;
+  timestamp: string;
+  from: "STRICT" | "COMPAT";
+  to: "STRICT" | "COMPAT";
+  user: string;
+  reason?: string;
+};
+
+const HISTORY_KEY = "icontrol_safemode_history_v1";
+const MAX_HISTORY = 20;
+
+function getSafeModeHistory(): SafeModeHistoryEntry[] {
+  try {
+    const stored = localStorage.getItem(HISTORY_KEY);
+    if (stored) {
+      const parsed = JSON.parse(stored);
+      if (Array.isArray(parsed)) return parsed.slice(-MAX_HISTORY);
+    }
+  } catch {}
+  return [];
+}
+
+function saveSafeModeHistory(entry: SafeModeHistoryEntry): void {
+  try {
+    const history = getSafeModeHistory();
+    history.push(entry);
+    const trimmed = history.slice(-MAX_HISTORY);
+    localStorage.setItem(HISTORY_KEY, JSON.stringify(trimmed));
+  } catch (e) {
+    console.error("Erreur lors de la sauvegarde de l'historique SAFE_MODE:", e);
+  }
+}
+
+function getPreviousSafeMode(): "STRICT" | "COMPAT" | null {
+  const history = getSafeModeHistory();
+  if (history.length === 0) return null;
+  return history[history.length - 1].from;
+}
 
 export function renderSystemSafeMode(host: HTMLElement, model: SystemModel): void {
-  const table = blockKeyValueTable({
-    title: "SAFE_MODE",
-    rows: [
-      { key: "safe_mode", value: model.safeMode === "STRICT" ? "ON (strict)" : "OFF" }
-    ]
+  const currentMode = model.safeMode;
+  const isStrict = currentMode === "STRICT";
+  
+  // Container principal
+  const container = document.createElement("div");
+  container.style.cssText = "display: flex; flex-direction: column; gap: 16px;";
+  
+  // Carte √âtat actuel
+  const statusCard = document.createElement("div");
+  statusCard.style.cssText = `
+    padding: 16px;
+    background: var(--ic-card, #1a1d1f);
+    border: 1px solid var(--ic-border, #2b3136);
+    border-radius: 8px;
+  `;
+  
+  const statusBg = isStrict ? "rgba(244, 135, 113, 0.1)" : "rgba(78, 201, 176, 0.1)";
+  const statusBorder = isStrict ? "#f48771" : "#4ec9b0";
+  const statusColor = isStrict ? "#f48771" : "#4ec9b0";
+  const statusIcon = isStrict ? "üîí STRICT" : "üîì COMPAT";
+  const statusText = isStrict ? "Mode Strict Activ√©" : "Mode Compatible Activ√©";
+  
+  statusCard.innerHTML = `
+    <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 12px;">
+      <div>
+        <div style="font-size: 18px; font-weight: 700; color: ${statusColor}; margin-bottom: 4px;">
+          ${statusIcon}
+        </div>
+        <div style="font-size: 14px; color: var(--ic-text, #e7ecef); font-weight: 600;">
+          ${statusText}
+        </div>
+      </div>
+      <div style="padding: 8px 16px; background: ${statusBg}; border: 1px solid ${statusBorder}; border-radius: 6px;">
+        <span style="color: ${statusColor}; font-weight: 700; font-size: 14px;">${currentMode}</span>
+      </div>
+    </div>
+  `;
+  
+  // Explications des niveaux
+  const explanationsCard = document.createElement("div");
+  explanationsCard.style.cssText = `
+    padding: 16px;
+    background: var(--ic-card, #1a1d1f);
+    border: 1px solid var(--ic-border, #2b3136);
+    border-radius: 8px;
+  `;
+  
+  explanationsCard.innerHTML = `
+    <div style="font-size: 14px; font-weight: 600; color: var(--ic-text, #e7ecef); margin-bottom: 12px;">
+      Explications des niveaux SAFE_MODE
+    </div>
+    <div style="display: grid; gap: 12px;">
+      <div style="padding: 12px; background: rgba(78, 201, 176, 0.05); border-left: 3px solid #4ec9b0; border-radius: 4px;">
+        <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 4px;">
+          <span style="font-size: 18px;">üîì</span>
+          <span style="font-weight: 600; color: #4ec9b0;">COMPAT (Compatible)</span>
+        </div>
+        <div style="font-size: 12px; color: var(--ic-mutedText, #a7b0b7); line-height: 1.5;">
+          Mode par d√©faut. Toutes les fonctionnalit√©s sont actives. Les op√©rations d'√©criture sont autoris√©es. 
+          Les restrictions l√©g√®res peuvent s'appliquer selon la configuration.
+        </div>
+      </div>
+      <div style="padding: 12px; background: rgba(244, 135, 113, 0.05); border-left: 3px solid #f48771; border-radius: 4px;">
+        <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 4px;">
+          <span style="font-size: 18px;">üîí</span>
+          <span style="font-weight: 600; color: #f48771;">STRICT (Strict)</span>
+        </div>
+        <div style="font-size: 12px; color: var(--ic-mutedText, #a7b0b7); line-height: 1.5;">
+          Mode de s√©curit√© maximale. Les op√©rations d'√©criture sont bloqu√©es. Certaines fonctionnalit√©s peuvent √™tre d√©sactiv√©es.
+          Utile pour prot√©ger les donn√©es critiques ou en cas de maintenance.
+        </div>
+      </div>
+    </div>
+  `;
+  
+  // Bouton Dry-run (Simuler changement)
+  const dryRunCard = document.createElement("div");
+  dryRunCard.style.cssText = `
+    padding: 16px;
+    background: var(--ic-card, #1a1d1f);
+    border: 1px solid var(--ic-border, #2b3136);
+    border-radius: 8px;
+  `;
+  
+  const dryRunBtn = document.createElement("button");
+  dryRunBtn.textContent = "üß™ Simuler changement SAFE_MODE";
+  dryRunBtn.style.cssText = `
+    width: 100%;
+    padding: 12px;
+    background: rgba(59, 130, 246, 0.1);
+    color: #3b82f6;
+    border: 1px solid #3b82f6;
+    border-radius: 6px;
+    cursor: pointer;
+    font-weight: 600;
+    font-size: 13px;
+    transition: all 0.2s;
+  `;
+  dryRunBtn.onmouseenter = () => {
+    dryRunBtn.style.background = "rgba(59, 130, 246, 0.2)";
+  };
+  dryRunBtn.onmouseleave = () => {
+    dryRunBtn.style.background = "rgba(59, 130, 246, 0.1)";
+  };
+  dryRunBtn.onclick = () => {
+    const targetMode = isStrict ? "COMPAT" : "STRICT";
+    showDryRunPreview(currentMode, targetMode as "STRICT" | "COMPAT");
+  };
+  
+  dryRunCard.appendChild(dryRunBtn);
+  
+  // Bouton Rollback urgence (rouge bien visible)
+  const previousMode = getPreviousSafeMode();
+  if (previousMode && previousMode !== currentMode) {
+    const rollbackCard = document.createElement("div");
+    rollbackCard.style.cssText = `
+      padding: 16px;
+      background: rgba(239, 68, 68, 0.1);
+      border: 2px solid #ef4444;
+      border-radius: 8px;
+    `;
+    
+    const rollbackBtn = document.createElement("button");
+    rollbackBtn.textContent = `üö® Restaurer configuration pr√©c√©dente (${previousMode})`;
+    rollbackBtn.style.cssText = `
+      width: 100%;
+      padding: 14px;
+      background: #ef4444;
+      color: white;
+      border: none;
+      border-radius: 6px;
+      cursor: pointer;
+      font-weight: 700;
+      font-size: 14px;
+      transition: all 0.2s;
+      box-shadow: 0 2px 8px rgba(239, 68, 68, 0.3);
+    `;
+    rollbackBtn.onmouseenter = () => {
+      rollbackBtn.style.background = "#dc2626";
+      rollbackBtn.style.transform = "scale(1.02)";
+    };
+    rollbackBtn.onmouseleave = () => {
+      rollbackBtn.style.background = "#ef4444";
+      rollbackBtn.style.transform = "scale(1)";
+    };
+    rollbackBtn.onclick = () => {
+      showRollbackConfirm(previousMode);
+    };
+    
+    rollbackCard.appendChild(rollbackBtn);
+    container.appendChild(rollbackCard);
+  }
+  
+  // Historique des changements
+  const historyCard = document.createElement("div");
+  historyCard.style.cssText = `
+    padding: 16px;
+    background: var(--ic-card, #1a1d1f);
+    border: 1px solid var(--ic-border, #2b3136);
+    border-radius: 8px;
+  `;
+  
+  const history = getSafeModeHistory();
+  historyCard.innerHTML = `
+    <div style="font-size: 14px; font-weight: 600; color: var(--ic-text, #e7ecef); margin-bottom: 12px;">
+      Historique des changements (${history.length} entr√©e${history.length > 1 ? "s" : ""})
+    </div>
+    <div id="safemode-history-list" style="display: flex; flex-direction: column; gap: 8px; max-height: 300px; overflow-y: auto;">
+      ${history.length === 0 ? `
+        <div style="text-align: center; padding: 20px; color: var(--ic-mutedText, #a7b0b7); font-size: 12px;">
+          Aucun historique disponible
+        </div>
+      ` : history.slice().reverse().map(entry => `
+        <div style="padding: 10px; background: rgba(255,255,255,0.02); border-left: 3px solid ${entry.to === "STRICT" ? "#f48771" : "#4ec9b0"}; border-radius: 4px;">
+          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 4px;">
+            <span style="font-weight: 600; color: var(--ic-text, #e7ecef); font-size: 13px;">
+              ${entry.from} ‚Üí ${entry.to}
+            </span>
+            <span style="font-size: 11px; color: var(--ic-mutedText, #a7b0b7);">
+              ${new Date(entry.timestamp).toLocaleString('fr-FR')}
+            </span>
+          </div>
+          <div style="font-size: 11px; color: var(--ic-mutedText, #a7b0b7);">
+            Par: ${entry.user}${entry.reason ? ` ‚Ä¢ ${entry.reason}` : ""}
+          </div>
+        </div>
+      `).join("")}
+    </div>
+  `;
+  
+  container.appendChild(statusCard);
+  container.appendChild(explanationsCard);
+  container.appendChild(dryRunCard);
+  if (previousMode && previousMode !== currentMode) {
+    container.appendChild(rollbackCard);
+  }
+  container.appendChild(historyCard);
+  host.appendChild(container);
+  
+  // Ajouter tooltips sur les badges de niveau
+  const compatBadge = explanationsCard.querySelector('[style*="COMPAT"]') as HTMLElement;
+  const strictBadge = explanationsCard.querySelector('[style*="STRICT"]') as HTMLElement;
+  if (compatBadge) {
+    addTooltipToElement(compatBadge, "Mode compatible: toutes les fonctionnalit√©s actives, op√©rations d'√©criture autoris√©es", "top");
+  }
+  if (strictBadge) {
+    addTooltipToElement(strictBadge, "Mode strict: s√©curit√© maximale, op√©rations d'√©criture bloqu√©es, certaines fonctionnalit√©s d√©sactiv√©es", "top");
+  }
+}
+
+// Fonction pour afficher le preview Dry-run
+function showDryRunPreview(current: "STRICT" | "COMPAT", target: "STRICT" | "COMPAT"): void {
+  const modal = document.createElement("div");
+  modal.style.cssText = `
+    position: fixed;
+    inset: 0;
+    background: rgba(0, 0, 0, 0.7);
+    z-index: 10000;
+    display: flex;
+    align-items: center;
+    justify-content: center;
+    padding: 20px;
+  `;
+  
+  const modalContent = document.createElement("div");
+  modalContent.style.cssText = `
+    background: var(--ic-panel, #1a1d1f);
+    border: 1px solid var(--ic-border, #2b3136);
+    border-radius: 12px;
+    padding: 24px;
+    max-width: 600px;
+    width: 100%;
+    max-height: 90vh;
+    overflow-y: auto;
+  `;
+  
+  const impacts = target === "STRICT" 
+    ? [
+        "Les op√©rations d'√©criture seront bloqu√©es",
+        "Les fonctionnalit√©s de modification seront d√©sactiv√©es",
+        "Les flags syst√®me critiques seront verrouill√©s",
+        "Les logs d'audit seront renforc√©s"
+      ]
+    : [
+        "Les op√©rations d'√©criture seront autoris√©es",
+        "Toutes les fonctionnalit√©s seront disponibles",
+        "Les flags syst√®me pourront √™tre modifi√©s",
+        "Mode normal restaur√©"
+      ];
+  
+  modalContent.innerHTML = `
+    <div style="font-size: 18px; font-weight: 700; color: var(--ic-text, #e7ecef); margin-bottom: 20px;">
+      üß™ Simulation: Changement SAFE_MODE
+    </div>
+    <div style="padding: 16px; background: rgba(59, 130, 246, 0.1); border-left: 4px solid #3b82f6; border-radius: 6px; margin-bottom: 20px;">
+      <div style="font-weight: 600; color: #3b82f6; margin-bottom: 8px;">
+        ${current} ‚Üí ${target}
+      </div>
+      <div style="font-size: 12px; color: var(--ic-mutedText, #a7b0b7);">
+        Pr√©visualisation des impacts sans appliquer les changements
+      </div>
+    </div>
+    <div style="margin-bottom: 20px;">
+      <div style="font-size: 14px; font-weight: 600; color: var(--ic-text, #e7ecef); margin-bottom: 12px;">
+        Impacts pr√©vus:
+      </div>
+      <ul style="list-style: none; padding: 0; margin: 0; display: flex; flex-direction: column; gap: 8px;">
+        ${impacts.map(impact => `
+          <li style="padding: 8px; background: rgba(255,255,255,0.02); border-radius: 4px; font-size: 13px; color: var(--ic-text, #e7ecef);">
+            ‚Ä¢ ${impact}
+          </li>
+        `).join("")}
+      </ul>
+    </div>
+    <div style="display: flex; gap: 12px; justify-content: flex-end;">
+      <button id="cancel-dryrun" style="padding: 10px 20px; background: rgba(255,255,255,0.05); color: var(--ic-text, #e7ecef); border: 1px solid var(--ic-border, #2b3136); border-radius: 8px; cursor: pointer; font-weight: 600;">
+        Fermer
+      </button>
+      <button id="apply-change" style="padding: 10px 20px; background: #3b82f6; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">
+        Appliquer le changement
+      </button>
+    </div>
+  `;
+  
+  modal.appendChild(modalContent);
+  document.body.appendChild(modal);
+  
+  const closeModal = () => modal.remove();
+  
+  modalContent.querySelector("#cancel-dryrun")?.addEventListener("click", closeModal);
+  modalContent.querySelector("#apply-change")?.addEventListener("click", async () => {
+    // Appeler la fonction de changement SAFE_MODE (√† impl√©menter dans safe-mode-actions.ts)
+    (globalThis as any).ICONTROL_SAFE_MODE = target;
+    try {
+      const { requireSession } = await import("/src/localAuth");
+      const s = requireSession();
+      saveSafeModeHistory({
+        id: `sm-${Date.now()}`,
+        timestamp: new Date().toISOString(),
+        from: current,
+        to: target,
+        user: s.username || "System"
+      });
+    } catch (error) {
+      console.error("Erreur lors de la sauvegarde de l'historique:", error);
+      saveSafeModeHistory({
+        id: `sm-${Date.now()}`,
+        timestamp: new Date().toISOString(),
+        from: current,
+        to: target,
+        user: "System"
+      });
+    }
+    closeModal();
+    location.reload();
+  });
+  
+  modal.onclick = (e) => {
+    if (e.target === modal) closeModal();
+  };
+}
+
+// Fonction pour confirmer le rollback
+function showRollbackConfirm(targetMode: "STRICT" | "COMPAT"): void {
+  const modal = document.createElement("div");
+  modal.style.cssText = `
+    position: fixed;
+    inset: 0;
+    background: rgba(0, 0, 0, 0.7);
+    z-index: 10000;
+    display: flex;
+    align-items: center;
+    justify-content: center;
+    padding: 20px;
+  `;
+  
+  const modalContent = document.createElement("div");
+  modalContent.style.cssText = `
+    background: var(--ic-panel, #1a1d1f);
+    border: 2px solid #ef4444;
+    border-radius: 12px;
+    padding: 24px;
+    max-width: 500px;
+    width: 100%;
+  `;
+  
+  modalContent.innerHTML = `
+    <div style="font-size: 18px; font-weight: 700; color: #ef4444; margin-bottom: 16px;">
+      üö® Restauration d'urgence
+    </div>
+    <div style="color: var(--ic-text, #e7ecef); margin-bottom: 20px; line-height: 1.6;">
+      √ätes-vous s√ªr de vouloir restaurer la configuration SAFE_MODE pr√©c√©dente ?
+      <br><br>
+      <strong style="color: #ef4444;">${getSafeMode()} ‚Üí ${targetMode}</strong>
+    </div>
+    <div style="display: flex; gap: 12px; justify-content: flex-end;">
+      <button id="cancel-rollback" style="padding: 10px 20px; background: rgba(255,255,255,0.05); color: var(--ic-text, #e7ecef); border: 1px solid var(--ic-border, #2b3136); border-radius: 8px; cursor: pointer; font-weight: 600;">
+        Annuler
+      </button>
+      <button id="confirm-rollback" style="padding: 10px 20px; background: #ef4444; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 700;">
+        Confirmer la restauration
+      </button>
+    </div>
+  `;
+  
+  modal.appendChild(modalContent);
+  document.body.appendChild(modal);
+  
+  const closeModal = () => modal.remove();
+  
+  modalContent.querySelector("#cancel-rollback")?.addEventListener("click", closeModal);
+  modalContent.querySelector("#confirm-rollback")?.addEventListener("click", async () => {
+    const current = getSafeMode();
+    (globalThis as any).ICONTROL_SAFE_MODE = targetMode;
+    const { requireSession } = await import("/src/localAuth");
+    const s = requireSession();
+    saveSafeModeHistory({
+      id: `sm-${Date.now()}`,
+      timestamp: new Date().toISOString(),
+      from: current,
+      to: targetMode,
+      user: s.username || "System",
+      reason: "Rollback urgence"
+    });
+    closeModal();
+    location.reload();
   });
-  host.appendChild(table);
+  
+  modal.onclick = (e) => {
+    if (e.target === modal) closeModal();
+  };
 }
diff --git a/modules/core-system/ui/frontend-ts/pages/users/contract.ts b/modules/core-system/ui/frontend-ts/pages/users/contract.ts
index 9c3cdce..aaad080 100644
--- a/modules/core-system/ui/frontend-ts/pages/users/contract.ts
+++ b/modules/core-system/ui/frontend-ts/pages/users/contract.ts
@@ -6,6 +6,8 @@ export const SAFE_MODE_ALLOWED = true;
 export const REQUIRED_ROLES: Role[] = ["ADMIN", "SYSADMIN", "DEVELOPER"];
 
 export function canAccess(role: Role, safeMode: SafeMode): boolean {
+  // Master a toujours acc√®s √† tout
+  if (role === "MASTER") return true;
   if (safeMode === "STRICT" && !SAFE_MODE_ALLOWED) return false;
   return REQUIRED_ROLES.includes(role);
 }
diff --git a/modules/core-system/ui/frontend-ts/pages/verification/contract.ts b/modules/core-system/ui/frontend-ts/pages/verification/contract.ts
index 5a36c53..5c11ac2 100644
--- a/modules/core-system/ui/frontend-ts/pages/verification/contract.ts
+++ b/modules/core-system/ui/frontend-ts/pages/verification/contract.ts
@@ -6,6 +6,8 @@ export const SAFE_MODE_ALLOWED = true;
 export const REQUIRED_ROLES: Role[] = ["ADMIN", "SYSADMIN", "DEVELOPER"];
 
 export function canAccess(role: Role, safeMode: SafeMode): boolean {
+  // Master a toujours acc√®s √† tout
+  if (role === "MASTER") return true;
   if (safeMode === "STRICT" && !SAFE_MODE_ALLOWED) return false;
   return REQUIRED_ROLES.includes(role);
 }
diff --git a/modules/core-system/ui/frontend-ts/pages/verification/model.ts b/modules/core-system/ui/frontend-ts/pages/verification/model.ts
index 715f6c2..418fe2d 100644
--- a/modules/core-system/ui/frontend-ts/pages/verification/model.ts
+++ b/modules/core-system/ui/frontend-ts/pages/verification/model.ts
@@ -1,4 +1,16 @@
 import { MAIN_SYSTEM_MODULES, MAIN_SYSTEM_RULES } from "../_shared/mainSystem.data";
+import { getRole } from "/src/runtime/rbac";
+import { getSafeMode } from "../_shared/safeMode";
+import { getSession } from "/src/localAuth";
+
+export type CheckResult = {
+  id: string;
+  title: string;
+  severity: "OK" | "WARN" | "ERR";
+  details: string;
+  remediation?: string;
+  evidence?: string;
+};
 
 export type VerificationModel = {
   title: string;
@@ -7,16 +19,155 @@ export type VerificationModel = {
   ruleConditions: string[];
   ruleEffects: string[];
   ruleValueRefs: string[];
+  checks: CheckResult[];
 };
 
+function performSelfChecks(): CheckResult[] {
+  const checks: CheckResult[] = [];
+  const role = getRole();
+  const safeMode = getSafeMode();
+  const session = getSession();
+
+  // Check 1: Routing/Assets
+  try {
+    const assetsBase = window.location.origin + (window.location.pathname.includes("/cp") ? "/cp" : "/app");
+    checks.push({
+      id: "routing-assets",
+      title: "Routing & Assets",
+      severity: "OK",
+      details: "Routes et assets accessibles",
+      evidence: `Base: ${assetsBase}`
+    });
+  } catch (e) {
+    checks.push({
+      id: "routing-assets",
+      title: "Routing & Assets",
+      severity: "ERR",
+      details: `Erreur de routage: ${String(e)}`,
+      remediation: "V√©rifier la configuration du serveur"
+    });
+  }
+
+  // Check 2: Registry integrity
+  try {
+    const modules = MAIN_SYSTEM_MODULES;
+    const moduleIds = modules.map(m => m.id);
+    const duplicates = moduleIds.filter((id, idx) => moduleIds.indexOf(id) !== idx);
+    
+    if (duplicates.length > 0) {
+      checks.push({
+        id: "registry-duplicates",
+        title: "Registry Integrity",
+        severity: "WARN",
+        details: `IDs dupliqu√©s d√©tect√©s: ${duplicates.join(", ")}`,
+        remediation: "Corriger les IDs dupliqu√©s dans le registre"
+      });
+    } else {
+      checks.push({
+        id: "registry-integrity",
+        title: "Registry Integrity",
+        severity: "OK",
+        details: `${modules.length} modules charg√©s, aucun doublon`,
+        evidence: `Modules: ${moduleIds.join(", ")}`
+      });
+    }
+  } catch (e) {
+    checks.push({
+      id: "registry-integrity",
+      title: "Registry Integrity",
+      severity: "ERR",
+      details: `Erreur lors de la v√©rification: ${String(e)}`
+    });
+  }
+
+  // Check 3: RBAC/SAFE_MODE
+  try {
+    const rbacStatus = role ? "OK" : "ERR";
+    const safeModeStatus = safeMode ? "OK" : "WARN";
+    
+    checks.push({
+      id: "rbac-safemode",
+      title: "RBAC & SAFE_MODE",
+      severity: rbacStatus === "OK" && safeModeStatus === "OK" ? "OK" : "WARN",
+      details: `R√¥le: ${role || "NON D√âFINI"}, SAFE_MODE: ${safeMode || "NON D√âFINI"}`,
+      evidence: session ? `Session: ${(session as any).username}` : "Aucune session"
+    });
+  } catch (e) {
+    checks.push({
+      id: "rbac-safemode",
+      title: "RBAC & SAFE_MODE",
+      severity: "ERR",
+      details: `Erreur: ${String(e)}`
+    });
+  }
+
+  // Check 4: Storage providers
+  try {
+    const storageAvailable = typeof localStorage !== "undefined";
+    const storageTest = storageAvailable ? (() => {
+      try {
+        localStorage.setItem("__test__", "1");
+        localStorage.removeItem("__test__");
+        return true;
+      } catch {
+        return false;
+      }
+    })() : false;
+
+    checks.push({
+      id: "storage-providers",
+      title: "Storage Providers",
+      severity: storageTest ? "OK" : "ERR",
+      details: storageTest 
+        ? "localStorage op√©rationnel" 
+        : "localStorage non disponible ou bloqu√©",
+      remediation: storageTest ? undefined : "V√©rifier les permissions du navigateur"
+    });
+  } catch (e) {
+    checks.push({
+      id: "storage-providers",
+      title: "Storage Providers",
+      severity: "ERR",
+      details: `Erreur: ${String(e)}`
+    });
+  }
+
+  // Check 5: Rules engine
+  try {
+    const conditions = MAIN_SYSTEM_RULES.conditions;
+    const effects = MAIN_SYSTEM_RULES.effects;
+    const hasRules = conditions.length > 0 || effects.length > 0;
+
+    checks.push({
+      id: "rules-engine",
+      title: "Rules Engine",
+      severity: hasRules ? "OK" : "WARN",
+      details: `${conditions.length} conditions, ${effects.length} effets`,
+      evidence: hasRules ? "Moteur de r√®gles charg√©" : "Aucune r√®gle d√©finie"
+    });
+  } catch (e) {
+    checks.push({
+      id: "rules-engine",
+      title: "Rules Engine",
+      severity: "ERR",
+      details: `Erreur: ${String(e)}`
+    });
+  }
+
+  return checks;
+}
+
 export function createVerificationModel(): VerificationModel {
   const core = MAIN_SYSTEM_MODULES.find((mod) => mod.id === "CORE_SYSTEM");
+  const checks = performSelfChecks();
+  
   return {
-    title: "Verification",
-    description: "Selfcheck route and rule engine inventory (from intake).",
+    title: "Control Plane Self-Check",
+    description: "V√©rification compl√®te de la conformit√©, int√©grit√© et readiness du syst√®me.",
     selfcheckRoute: core?.routes.includes("selfcheck") ? "selfcheck" : "unknown",
     ruleConditions: MAIN_SYSTEM_RULES.conditions,
     ruleEffects: MAIN_SYSTEM_RULES.effects,
-    ruleValueRefs: MAIN_SYSTEM_RULES.valueRefs
+    ruleValueRefs: MAIN_SYSTEM_RULES.valueRefs,
+    checks
   };
 }
diff --git a/modules/core-system/ui/frontend-ts/pages/verification/view.ts b/modules/core-system/ui/frontend-ts/pages/verification/view.ts
index 23a93b8..9467486 100644
--- a/modules/core-system/ui/frontend-ts/pages/verification/view.ts
+++ b/modules/core-system/ui/frontend-ts/pages/verification/view.ts
@@ -4,6 +4,84 @@ import { appendParagraph, appendTable, sectionCard } from "../_shared/uiBlocks";
 export function renderVerificationSummary(root: HTMLElement, model: VerificationModel): void {
   const card = sectionCard(model.title);
   appendParagraph(card, model.description);
+  
+  // Afficher les r√©sultats des checks
+  if (model.checks && model.checks.length > 0) {
+    const checksTable = document.createElement("div");
+    checksTable.setAttribute("style", "margin-top: 20px;");
+    
+    const table = document.createElement("table");
+    table.setAttribute("style", "width: 100%; border-collapse: collapse;");
+    
+    const thead = document.createElement("thead");
+    thead.innerHTML = `
+      <tr style="border-bottom: 1px solid var(--ic-border, #2b3136);">
+        <th style="text-align: left; padding: 12px; color: #858585; font-size: 12px; font-weight: 600;">Statut</th>
+        <th style="text-align: left; padding: 12px; color: #858585; font-size: 12px; font-weight: 600;">V√©rification</th>
+        <th style="text-align: left; padding: 12px; color: #858585; font-size: 12px; font-weight: 600;">D√©tails</th>
+        <th style="text-align: left; padding: 12px; color: #858585; font-size: 12px; font-weight: 600;">Action</th>
+      </tr>
+    `;
+    table.appendChild(thead);
+    
+    const tbody = document.createElement("tbody");
+    model.checks.forEach(check => {
+      const severityColor = 
+        check.severity === "OK" ? "#4ec9b0" :
+        check.severity === "WARN" ? "#dcdcaa" : "#f48771";
+      
+      const tr = document.createElement("tr");
+      tr.setAttribute("style", "border-bottom: 1px solid var(--ic-border, #2b3136);");
+      tr.innerHTML = `
+        <td style="padding: 12px;">
+          <span style="padding: 4px 8px; background: ${severityColor}20; color: ${severityColor}; border-radius: 4px; font-size: 11px; font-weight: 600;">
+            ${check.severity}
+          </span>
+        </td>
+        <td style="padding: 12px; color: #d4d4d4; font-size: 14px; font-weight: 600;">${check.title}</td>
+        <td style="padding: 12px; color: #858585; font-size: 13px;">
+          ${check.details}
+          ${check.evidence ? `<div style="margin-top: 4px; font-size: 11px; color: #6a6a6a; font-family: monospace;">${check.evidence}</div>` : ""}
+        </td>
+        <td style="padding: 12px;">
+          ${check.remediation ? `<div style="color: #858585; font-size: 12px;">${check.remediation}</div>` : "-"}
+        </td>
+      `;
+      tbody.appendChild(tr);
+    });
+    table.appendChild(tbody);
+    checksTable.appendChild(table);
+    
+    // Bouton d'export
+    const exportBtn = document.createElement("button");
+    exportBtn.setAttribute("style", "margin-top: 16px; padding: 10px 20px; background: #37373d; color: white; border: 1px solid #3e3e3e; border-radius: 8px; cursor: pointer; font-weight: 600;");
+    exportBtn.textContent = "Exporter en CSV";
+    exportBtn.onclick = () => {
+      const csv = [
+        ["ID", "Titre", "S√©v√©rit√©", "D√©tails", "Rem√©diation", "Preuve"].join(","),
+        ...model.checks.map(c => [
+          c.id,
+          `"${c.title}"`,
+          c.severity,
+          `"${c.details}"`,
+          c.remediation ? `"${c.remediation}"` : "",
+          c.evidence ? `"${c.evidence}"` : ""
+        ].join(","))
+      ].join("\n");
+      
+      const blob = new Blob([csv], { type: "text/csv" });
+      const url = URL.createObjectURL(blob);
+      const a = document.createElement("a");
+      a.href = url;
+      a.download = `icontrol-selfcheck-${new Date().toISOString().split("T")[0]}.csv`;
+      a.click();
+      URL.revokeObjectURL(url);
+    };
+    
+    card.appendChild(checksTable);
+    card.appendChild(exportBtn);
+  }
+  
   root.appendChild(card);
 }
 
diff --git a/package.json b/package.json
index aab98b2..16d9f04 100644
--- a/package.json
+++ b/package.json
@@ -36,7 +36,8 @@
     "local:web:serve": "bash -lc 'node ./server/runtime-config-server.js --host ${ICONTROL_LOCAL_HOST:-127.0.0.1} --port ${ICONTROL_LOCAL_PORT:-4176} --dist ./dist'",
     "start": "bash scripts/rebuild-and-serve.sh",
     "local:web": "bash ./scripts/local-web.sh",
-    "proofs:logs": "node scripts/check-logs-route.js"
+    "proofs:logs": "node scripts/check-logs-route.js",
+    "proofs:system": "node scripts/check-system-route.js"
   },
   "devDependencies": {
     "esbuild": "^0.21.5",
diff --git a/platform-services/security/auth/localAuth.ts b/platform-services/security/auth/localAuth.ts
deleted file mode 100644
index e2d3dd4..0000000
--- a/platform-services/security/auth/localAuth.ts
+++ /dev/null
@@ -1,44 +0,0 @@
-export type Role = "USER_READONLY" | "ADMIN" | "SYSADMIN" | "DEVELOPER";
-
-export type Session = {
-  username: string;
-  role: Role;
-  fullName?: string;
-};
-
-const LS_SESSION = "icontrol_session_v1";
-
-const BOOTSTRAP_USERS: Array<{ username: string; password: string; role: Role; fullName?: string }> = [
-  { username: "sysadmin",  password: "sysadmin",        role: "SYSADMIN",  fullName: "SYSADMIN" },
-  { username: "developer", password: "developer",       role: "DEVELOPER", fullName: "DEVELOPER" },
-  { username: "admin",     password: "admin",           role: "ADMIN",     fullName: "ADMIN" },
-  { username: "Waldhari",  password: "Dany123456@",     role: "DEVELOPER", fullName: "Waldhari" }
-];
-
-export function authenticate(username: string, password: string): Session | null {
-  const u = BOOTSTRAP_USERS.find(x => x.username === username && x.password === password);
-  if (!u) return null;
-  const s: Session = { username: u.username, role: u.role, fullName: u.fullName };
-  try { localStorage.setItem(LS_SESSION, JSON.stringify(s)); } catch (_) {}
-  return s;
-}
-
-export function getSession(): Session | null {
-  try {
-    const raw = localStorage.getItem(LS_SESSION);
-    if (!raw) return null;
-    return JSON.parse(raw) as Session;
-  } catch (_) {
-    return null;
-  }
-}
-
-export function logout(): void {
-  try { localStorage.removeItem(LS_SESSION); } catch (_) {}
-}
-
-export function requireSession(): Session {
-  const s = getSession();
-  if (!s) throw new Error("NO_SESSION");
-  return s;
-}
diff --git a/platform-services/ui-shell/layout/shell.css b/platform-services/ui-shell/layout/shell.css
index d99dfec..1bbf3f3 100644
--- a/platform-services/ui-shell/layout/shell.css
+++ b/platform-services/ui-shell/layout/shell.css
@@ -6,17 +6,83 @@
   --radius:18px;
   --shadow: 0 12px 40px rgba(0,0,0,.35);
   --font: -apple-system, BlinkMacSystemFont, "SF Pro Display","SF Pro Text", Segoe UI, Roboto, Helvetica, Arial, sans-serif;
+  /* ICONTROL_VAR_ALIAS_V1: Alias pour compatibilit√© avec les pages */
+  --ic-card:var(--panel);
+  --ic-border:var(--line);
+  --ic-text:var(--text);
+  --ic-mutedText:var(--muted);
+  --ic-panel:var(--panel);
+  --ic-accent:var(--accent);
+  --ic-accent2:#7c3aed;
+  --ic-bg:var(--bg);
+}
+*{box-sizing:border-box; max-width:100%}
+html, body{overflow-x:hidden; width:100%; max-width:100vw; margin:0; padding:0}
+body{background:radial-gradient(1200px 800px at 20% 0%, #1a1f23 0%, var(--bg) 55%) fixed;color:var(--text);font-family:var(--font)}
+img, video, iframe, table{max-width:100%; height:auto}
+[style*="grid-template-columns"]{width:100%; max-width:100%}
+
+/* ICONTROL_FULL_WIDTH_LAYOUT_V1: Largeur pleine √©cran qui s'ajuste automatiquement */
+/* Sur desktop (‚â•768px), toutes les pages utilisent la largeur pleine √©cran */
+@media (min-width: 768px) {
+  body {
+    min-width: 768px;
+  }
+  
+  /* Header avec largeur pleine */
+  .cxHeader {
+    width: 100%;
+    max-width: 100%;
+  }
+  
+  /* Les cartes et contenus utilisent la largeur disponible */
+  .cxCard {
+    max-width: 100%;
+    width: 100%;
+  }
+  
+  /* Tableaux et composantes utilisent toute la largeur */
+  table {
+    width: 100%;
+    max-width: 100%;
+  }
+  
+  /* Tous les contenants prennent la largeur compl√®te */
+  [style*="max-width"]:not([style*="max-width:100%"]) {
+    max-width: 100% !important;
+  }
 }
-*{box-sizing:border-box}
-body{margin:0;background:radial-gradient(1200px 800px at 20% 0%, #1a1f23 0%, var(--bg) 55%) fixed;color:var(--text);font-family:var(--font)}
 .cxHeader{
   position:sticky; top:0; z-index:50;
-  height:60px; display:flex; align-items:center; justify-content:flex-start;
-  gap:12px; padding:0 14px;
+  height:60px; display:flex; align-items:center; justify-content:space-between;
+  gap:12px; padding:0 20px;
   background:rgba(20,22,24,.88); backdrop-filter: blur(10px);
   border-bottom:1px solid var(--line);
+  max-width:100%;
+  box-sizing:border-box;
 }
+
+/* ICONTROL_FIXED_HEADER_V1: Header avec largeur fixe centr√©e */
+@media (min-width: 768px) {
+  .cxHeader {
+    padding: 0 20px;
+  }
+}
+.cxHeaderContext{
+  display:flex; align-items:center; gap:8px; margin-left:auto;
+}
+.cxContextTag{
+  padding:4px 10px; border-radius:6px; font-size:11px; font-weight:600;
+  border:1px solid transparent;
+}
+.cxContextTag.env{background:rgba(123,44,255,0.15); color:#7b2cff; border-color:#7b2cff40;}
+.cxContextTag.safemode{background:rgba(220,220,170,0.15); color:#dcdcaa; border-color:#dcdcaa40;}
+.cxContextTag.safemode.strict{background:rgba(244,135,113,0.15); color:#f48771; border-color:#f4877140;}
+.cxContextTag.role{background:rgba(78,201,176,0.15); color:#4ec9b0; border-color:#4ec9b040;}
 .cxBrand{
+  display: flex;
+  align-items: center;
+  gap: 8px;
   display:flex; align-items:center; gap:10px;
   font-weight:800; letter-spacing:.2px;
 }
@@ -35,31 +101,73 @@ body{margin:0;background:radial-gradient(1200px 800px at 20% 0%, #1a1f23 0%, var
   outline-offset:2px;
 }
 .cxMain{
-  padding:18px; max-width:1280px; margin:0 auto;
+  padding: clamp(16px, 2vw, 32px); 
+  width:100%; 
+  margin:0;
+  min-height:calc(100vh - 50px);
+  background:var(--ic-bg, var(--bg)); /* ICONTROL_SHELL_MAIN_TRANSPARENT_V1: Fond avec couleur de base */
+  overflow-x:hidden;
+  box-sizing:border-box;
+  display:flex;
+  flex-direction:column;
+}
+
+/* ICONTROL_FULL_WIDTH_RESPONSIVE_V1: Largeur pleine √©cran qui s'ajuste automatiquement */
+/* Desktop: padding responsive, largeur pleine √©cran */
+@media (min-width: 768px) {
+  .cxMain {
+    padding: clamp(20px, 2.5vw, 32px);
+    width: 100%;
+    margin: 0;
+  }
+}
+
+/* Sur tr√®s grands √©crans, padding plus g√©n√©reux mais largeur pleine */
+@media (min-width: 1920px) {
+  .cxMain {
+    padding: clamp(24px, 3vw, 40px);
+    width: 100%;
+    margin: 0;
+  }
 }
 .cxDrawerOverlay{
   position:fixed; inset:0; background:rgba(0,0,0,.45);
   z-index:80; display:none;
 }
 .cxDrawer{
-  position:fixed; top:0; left:0; height:100%;
-  width:340px; max-width:90vw;
-  background:linear-gradient(180deg, rgba(32,36,39,.98), rgba(26,29,31,.98));
-  border-right:1px solid var(--line);
+  position:fixed; top:0; left:0; height:100vh;
+  width:280px; max-width:90vw;
+  background:var(--ic-panel, var(--panel2));
+  border-right:1px solid var(--ic-border, var(--line));
   box-shadow: var(--shadow);
   z-index:90; transform: translateX(-100%);
   transition: transform .18s ease;
-  padding:14px;
+  padding:12px;
+  display:flex;
+  flex-direction:column;
+  overflow-y: auto;
 }
 .cxDrawer.open{ transform: translateX(0); }
 .cxDrawerOverlay.open{ display:block; }
+
+/* ICONTROL_RESPONSIVE_DRAWER_V1: R√®gles supprim√©es, remplac√©es par ICONTROL_OVERLAY_DRAWER_V1 */
+.cxDrawerBottom a:hover{ background:rgba(255,255,255,0.05); }
+#cxUserAvatar:hover{ opacity:0.9; transform:scale(1.05); transition:transform 0.2s; }
 .cxDrawerTop{
-  display:flex; align-items:center; justify-content:space-between;
+  display:flex; flex-direction:column; align-items:stretch;
   margin-bottom:12px;
+  position:relative;
+}
+.cxDrawerTop > button.cxClose{
+  position:absolute; top:0; right:0;
 }
 .cxDrawerTitle{
   font-weight:900; letter-spacing:.3px;
 }
+.cxDrawerLogo{
+  display:flex; align-items:center; justify-content:center;
+  padding:12px 0;
+}
 .cxClose{
   width:40px;height:40px;border-radius:12px;
   background:transparent; border:1px solid var(--line);
@@ -90,20 +198,95 @@ body{margin:0;background:radial-gradient(1200px 800px at 20% 0%, #1a1f23 0%, var
 }
 .cxNav small{color:var(--muted)}
 
-/* ICONTROL_SIDEBAR_LEFT_LAYOUT_V1
-   Desktop: persistent left sidebar, content to the right.
+/* ICONTROL_OVERLAY_DRAWER_V1
+   Desktop et Mobile: drawer s'ouvre par-dessus la page (overlay)
+   Header et page active prennent toute la largeur
 */
-@media (min-width: 960px){
-  .cxBurger{display:none}
-  .cxDrawerOverlay{display:none !important}
+@media (min-width: 768px){
+  /* Pas de grid layout, header et main prennent toute la largeur */
+  body > div:first-child,
+  #app > div:first-child {
+    display: flex !important;
+    flex-direction: column !important;
+    min-height: 100vh;
+    width: 100%;
+    max-width: 100%;
+    margin: 0;
+    padding: 0;
+  }
+  
+  /* Header pleine largeur */
+  .cxHeader {
+    width: 100%;
+    position: sticky;
+    top: 0;
+    z-index: 50;
+    flex-shrink: 0;
+  }
+  
+  /* Main pleine largeur */
+  .cxMain{
+    flex: 1;
+    width: 100%;
+    max-width: 100%;
+    margin: 0;
+    padding: clamp(20px, 2.5vw, 32px);
+    min-width: 0;
+    overflow-y: auto;
+    overflow-x: hidden;
+  }
+  
+  /* Drawer reste en position fixed, s'ouvre par-dessus */
   .cxDrawer{
-    left:0; right:auto;
+    position: fixed !important;
+    top: 0;
+    left: 0;
+    height: 100vh;
+    width: 280px;
+    max-width: 280px;
+    min-width: 280px;
+    transform: translateX(-100%);
+    z-index: 90;
+    border-right: 1px solid var(--line);
+    box-shadow: 4px 0 12px rgba(0, 0, 0, 0.3);
+  }
+  
+  .cxDrawer.open {
     transform: translateX(0);
-    border-left:0;
-    border-right:1px solid var(--line);
   }
-  .cxMain{
-    margin: 0 0 0 340px;
-    max-width: 1280px;
+  
+  /* Overlay visible quand drawer ouvert */
+  .cxDrawerOverlay.open {
+    display: block;
+    z-index: 85;
+  }
+  
+  /* Cacher burger sur desktop */
+  @media (min-width: 1024px) {
+    .cxBurger {
+      display: none;
+    }
+    
+    .cxDrawer {
+      width: 320px;
+      max-width: 320px;
+      min-width: 320px;
+    }
+    
+    .cxMain {
+      padding: clamp(24px, 3vw, 36px);
+    }
+  }
+  
+  @media (min-width: 1920px) {
+    .cxDrawer {
+      width: 340px;
+      max-width: 340px;
+      min-width: 340px;
+    }
+    
+    .cxMain {
+      padding: clamp(24px, 3vw, 40px);
+    }
   }
 }
diff --git a/platform-services/ui-shell/layout/shell.ts b/platform-services/ui-shell/layout/shell.ts
index 4ca67df..f0c3e19 100644
--- a/platform-services/ui-shell/layout/shell.ts
+++ b/platform-services/ui-shell/layout/shell.ts
@@ -1,7 +1,10 @@
 import "./shell.css";
 import { getSession, isLoggedIn, logout } from "../../../app/src/localAuth";
-import { canAccessToolbox, canSeeSettings } from "../../../app/src/runtime/rbac";
+import { canSeeSettings, canAccessPageRoute } from "../../../app/src/runtime/rbac";
+import { getAppKind } from "../../../app/src/pages/appContext";
 import { buildMainSystemShell } from "../../../modules/core-system/ui/frontend-ts/pages/_shared/mainSystem.ui";
+import { getAvatarConfig, getInitials } from "../../../app/src/core/user/avatarManager";
+import { getBrand } from "../../../platform-services/branding/brandService";
 
 export type NavItem = {
   id: string;
@@ -33,36 +36,163 @@ function canSeeDossiers(): boolean {
 export function createShell(navItems: NavItem[]){
   const shell = buildMainSystemShell();
   const { root, header, drawer, overlay, main, nav, burger, close, logoutLink, sessionHint } = shell;
+  const headerContext = header.querySelector("#cxHeaderContext") as HTMLElement;
+  const userAvatar = drawer.querySelector("#cxUserAvatar") as HTMLElement;
+  const settingsLink = drawer.querySelector("#cxSettingsLink") as HTMLAnchorElement;
+  const userInfo = drawer.querySelector("#cxUserInfo") as HTMLElement;
+  const userFullname = drawer.querySelector("#cxUserFullname") as HTMLElement;
+  const userRole = drawer.querySelector("#cxUserRole") as HTMLElement;
+  const userCompany = drawer.querySelector("#cxUserCompany") as HTMLElement;
+  const drawerLogoImg = drawer.querySelector("#cxDrawerLogoImg") as HTMLImageElement;
+  const drawerLogoText = drawer.querySelector("#cxDrawerLogoText") as HTMLElement;
+
+  // ICONTROL_HIDE_HEADER_ON_LOGIN_V1: Cacher le header et le menu sur la page Login
+  function updateShellVisibility() {
+    const currentHash = getRouteHash();
+    const isLoginPage = currentHash === "#/login" || currentHash.startsWith("#/login");
+    
+    if (isLoginPage) {
+      header.style.display = "none";
+      burger.style.display = "none";
+      drawer.style.display = "none";
+      overlay.style.display = "none";
+    } else {
+      header.style.display = "";
+      burger.style.display = "";
+      drawer.style.display = "";
+      overlay.style.display = "";
+    }
+  }
+
+  function updateUserAvatar(): void {
+    if (!isLoggedIn() || !userAvatar) return;
+    const s = getSession() as any;
+    if (!s) return;
+    
+    const avatarConfig = getAvatarConfig(s.username);
+    if (avatarConfig.type === "image" && avatarConfig.imageUrl) {
+      userAvatar.innerHTML = `<img src="${avatarConfig.imageUrl}" style="width:100%;height:100%;object-fit:cover;border-radius:50%;" onerror="this.parentElement.textContent='${getInitials(s.username)}';this.parentElement.style.background='${avatarConfig.color || "#6D28D9"}';" />`;
+      userAvatar.style.background = "transparent";
+    } else {
+      userAvatar.innerHTML = getInitials(s.username);
+      userAvatar.style.background = avatarConfig.color || "#6D28D9";
+    }
+  }
+
+  function updateUserInfo(): void {
+    if (!isLoggedIn() || !userInfo) return;
+    const s = getSession() as any;
+    if (!s) return;
+    
+    // R√©cup√©rer les donn√©es utilisateur depuis localStorage
+    try {
+      const userDataRaw = localStorage.getItem(`icontrol_user_data_${s.username}`);
+      const userData = userDataRaw ? JSON.parse(userDataRaw) : {};
+      const fullname = userData.fullname || s.username;
+      // ICONTROL_MASTER_ROLE_DISPLAY_V1: Afficher "Master" au lieu de "SYSADMIN" pour l'utilisateur Master
+      const displayRole = s.username === "Master" ? "Master" : (s.role || "USER");
+      const brand = getBrand();
+      const companyName = brand.LEGAL_NAME || brand.APP_DISPLAY_NAME || "iCONTROL";
+      
+      if (userFullname) userFullname.textContent = fullname;
+      if (userRole) userRole.textContent = displayRole;
+      if (userCompany) userCompany.textContent = companyName;
+      
+      userInfo.style.display = "block";
+    } catch (e) {
+      console.warn("Erreur lors de la r√©cup√©ration des infos utilisateur:", e);
+      if (userFullname) userFullname.textContent = s.username;
+      if (userRole) userRole.textContent = s.username === "Master" ? "Master" : (s.role || "USER");
+      if (userCompany) userCompany.textContent = "iCONTROL";
+      userInfo.style.display = "block";
+    }
+  }
+
+  function updateDrawerLogo(): void {
+    try {
+      const brand = getBrand();
+      const brandAny = brand as any;
+      const currentTheme = typeof window !== "undefined" && window.matchMedia && window.matchMedia("(prefers-color-scheme: light)").matches ? "light" : "dark";
+      const logoUrl = currentTheme === "light" 
+        ? (brandAny.LOGO_LIGHT || brand.LOGO_PRIMARY || "")
+        : (brandAny.LOGO_DARK || brand.LOGO_PRIMARY || "");
+      
+      if (logoUrl && drawerLogoImg) {
+        drawerLogoImg.src = logoUrl;
+        drawerLogoImg.style.display = "block";
+        if (drawerLogoText) drawerLogoText.style.display = "none";
+      } else {
+        if (drawerLogoImg) drawerLogoImg.style.display = "none";
+        if (drawerLogoText) {
+          drawerLogoText.style.display = "block";
+          drawerLogoText.textContent = brand.APP_DISPLAY_NAME || "iCONTROL";
+        }
+      }
+    } catch (e) {
+      console.warn("Erreur lors de la mise √† jour du logo:", e);
+    }
+  }
 
   function renderNav(){
     nav.innerHTML = "";
     navItems.forEach(it=>{
       if(!it.show()) return;
+      // Ne pas afficher "Param√®tres" et "Compte" dans le menu (on a l'ic√¥ne/avatar en bas)
+      if (it.id === "settings" || it.id === "account") return;
+      
       const a = document.createElement("a");
       a.href = it.hash;
       a.setAttribute("data-hash", it.hash);
       a.textContent = it.label;
+      // ICONTROL_MENU_CLOSE_ON_CLICK_V1: Fermer le menu quand on clique sur un lien
+      a.onclick = () => {
+        closeDrawer();
+      };
       nav.appendChild(a);
     });
 
     if(isLoggedIn()){
-      logoutLink.style.display = "inline-block";
+      logoutLink.style.display = "block";
       logoutLink.onclick = (e)=>{
         e.preventDefault();
         logout();
         window.location.hash = "#/login";
         closeDrawer();
       };
-      const s = getSession() as any;
-      sessionHint.textContent = `Connect√©: ${String(s?.username||"user")} ‚Ä¢ R√¥le: ${String(s?.role||"USER")}`;
+      updateUserAvatar();
+      updateUserInfo();
+      if (userAvatar) userAvatar.style.display = "flex";
+      if (settingsLink) settingsLink.style.display = "flex";
     } else {
       logoutLink.style.display = "none";
-      sessionHint.textContent = "Non connect√©";
+      if (userAvatar) userAvatar.style.display = "none";
+      if (settingsLink) settingsLink.style.display = "none";
+      if (userInfo) userInfo.style.display = "none";
     }
 
     setActiveLinks(drawer);
+    updateDrawerLogo();
   }
 
+  // Exposer la fonction de mise √† jour de l'avatar
+  (window as any).__updateMenuAvatar = () => {
+    updateUserAvatar();
+    updateUserInfo();
+  };
+  
+  // Navigation vers le compte
+  (window as any).__navigateToAccount = () => {
+    window.location.hash = "#/account";
+    closeDrawer();
+  };
+  
+  // Mettre √† jour le logo du drawer quand le branding change
+  window.addEventListener("storage", (e) => {
+    if (e.key === "icontrol_brand_v1") {
+      updateDrawerLogo();
+    }
+  });
+
   function openDrawer(){
     overlay.classList.add("open");
     drawer.classList.add("open");
@@ -80,6 +210,40 @@ export function createShell(navItems: NavItem[]){
   window.addEventListener("hashchange", ()=>{
     renderNav();
     setActiveLinks(drawer);
+    updateShellVisibility();
+  });
+
+  // ICONTROL_HEADER_CONTEXT_V1: Indicateurs de contexte permanents
+  function updateHeaderContext(): void {
+    if (!headerContext || !isLoggedIn()) {
+      if (headerContext) headerContext.innerHTML = "";
+      return;
+    }
+    
+    const s = getSession() as any;
+    if (!s) return;
+    
+    const role = s.username === "Master" ? "Master" : (s.role || "USER");
+    const safeMode = (window as any).ICONTROL_SAFE_MODE || "COMPAT";
+    // D√©tecter l'environnement depuis l'URL ou localStorage
+    const hostname = window.location.hostname;
+    const env = hostname === "localhost" || hostname === "127.0.0.1" ? "LOCAL" : 
+                hostname.includes("staging") ? "STAGING" : "PROD";
+    const safeModeClass = safeMode === "STRICT" ? "strict" : "";
+    
+    headerContext.innerHTML = `
+      <span class="cxContextTag env" title="Environnement: ${env}">${env}</span>
+      <span class="cxContextTag safemode ${safeModeClass}" title="SAFE_MODE: ${safeMode}">SAFE: ${safeMode}</span>
+      <span class="cxContextTag role" title="R√¥le: ${role}">${role}</span>
+    `;
+  }
+
+  // V√©rifier la visibilit√© au d√©marrage
+  updateShellVisibility();
+  updateHeaderContext();
+  
+  window.addEventListener("hashchange", () => {
+    updateHeaderContext();
   });
 
   // Public API
@@ -101,18 +265,21 @@ export function createShell(navItems: NavItem[]){
  * - Settings visible only ADMIN/SYSADMIN/DEVELOPER
  */
 export function getDefaultNavItems(): NavItem[] {
+  const appKind = getAppKind();
+  const isApp = appKind === "APP";
+  
   return [
-    { id:"dashboard", label:"Dashboard", hash:"#/dashboard", show: ()=> true },
-    { id:"dossiers", label:"Dossiers", hash:"#/dossiers", show: ()=> canSeeDossiers() },
-    /* ICONTROL_NAV_SYSTEM_LOGS_V1 */
-    { id:"system", label:"Systeme", hash:"#/system", show: ()=> isLoggedIn() },
-    { id:"logs", label:"Logs", hash:"#/logs", show: ()=> isLoggedIn() },
+    { id:"dashboard", label:"Dashboard", hash:"#/dashboard", show: ()=> isLoggedIn() && canAccessPageRoute("dashboard") },
+    // ICONTROL_REMOVE_DOSSIERS_FROM_CP_V1: Dossiers uniquement dans APP (client), pas dans CP (administration)
+    { id:"dossiers", label:"Dossiers", hash:"#/dossiers", show: ()=> canSeeDossiers() && isApp && canAccessPageRoute("dossiers") },
+    /* ICONTROL_NAV_MANAGEMENT_V1: Management remplace les pages individuelles dans CP */
+    { id:"management", label:"Management", hash:"#/management", show: ()=> isLoggedIn() && !isApp && canAccessPageRoute("management") },
     /* ICONTROL_NAV_MAIN_SYSTEM_V1 */
-    { id:"users", label:"Utilisateurs", hash:"#/users", show: ()=> isLoggedIn() },
-    { id:"account", label:"Compte", hash:"#/account", show: ()=> isLoggedIn() },
-    { id:"developer", label:"D√©veloppeur", hash:"#/developer", show: ()=> isLoggedIn() },
-    { id:"verification", label:"V√©rification", hash:"#/verification", show: ()=> isLoggedIn() },
-    { id:"toolbox", label:"Toolbox", hash:"#/toolbox", show: ()=> canAccessToolbox() },
-    { id:"settings", label:"Param√®tres", hash:"#/settings", show: ()=> canSeeSettings() },
+    { id:"users", label:"Utilisateurs", hash:"#/users", show: ()=> isLoggedIn() && canAccessPageRoute("users") },
+    { id:"account", label:"Compte", hash:"#/account", show: ()=> isLoggedIn() && canAccessPageRoute("account") },
+    /* ICONTROL_NAV_VERIFICATION_LOGS_V1: V√©rification et Logs ajout√©s au menu d√©roulant */
+    { id:"verification", label:"V√©rification", hash:"#/verification", show: ()=> isLoggedIn() && !isApp && canAccessPageRoute("verification") },
+    { id:"logs", label:"Logs", hash:"#/logs", show: ()=> isLoggedIn() && !isApp && canAccessPageRoute("logs") },
+    { id:"settings", label:"Param√®tres", hash:"#/settings", show: ()=> canSeeSettings() && canAccessPageRoute("settings") },
   ];
 }
diff --git a/routes_inspect.sh b/routes_inspect.sh
deleted file mode 100755
index 3e6841b..0000000
--- a/routes_inspect.sh
+++ /dev/null
@@ -1,39 +0,0 @@
-#!/bin/zsh
-set -euo pipefail
-
-ROOT="$(cd "$(dirname "${0}")" && pwd)"
-APP="$ROOT/app/src"
-
-echo "=== ROUTES INSPECTION (no changes) ==="
-
-show_file(){
-  local f="$1"
-  echo ""
-  echo "------------------------------------------------------------"
-  echo "FILE: $f"
-  if [ ! -f "$f" ]; then
-    echo "MISSING"
-    return
-  fi
-  echo "SIZE: $(stat -f '%z' "$f") bytes | MTIME: $(stat -f '%Sm' -t '%Y-%m-%d %H:%M:%S' "$f")"
-  echo ""
-  echo "HEAD (first 120 lines):"
-  nl -ba "$f" | sed -n '1,120p'
-  echo ""
-  echo "TAIL (last 120 lines):"
-  local L
-  L="$(wc -l < "$f" | tr -d ' ')"
-  local start=$(( L>120 ? L-119 : 1 ))
-  nl -ba "$f" | sed -n "${start},${L}p"
-  echo ""
-  echo "KEY LINES (router/routes/module/load/export/hash):"
-  grep -nE 'route|routes|router|hashchange|location\.hash|navigate|render|moduleLoader|loadModule|export ' "$f" | head -200 || true
-}
-
-show_file "$APP/router.ts"
-show_file "$APP/runtime/router.ts"
-show_file "$APP/moduleLoader.ts"
-show_file "$APP/main.ts"
-
-echo ""
-echo "=== NEXT: Paste me the KEY LINES section for app/src/router.ts (and runtime/router.ts if relevant) ==="
diff --git a/scripts/smoke-local-web.sh b/scripts/smoke-local-web.sh
index 2b204fe..59171e1 100755
--- a/scripts/smoke-local-web.sh
+++ b/scripts/smoke-local-web.sh
@@ -52,9 +52,11 @@ retry_expect_oneof() {
   return 1
 }
 
-# Surfaces (no trailing slash): allow redirect or ok
-retry_expect_oneof "$BASE/app" 200 302
-retry_expect_oneof "$BASE/cp" 200 302
+# Surfaces: no slash must redirect; slash must return 200
+retry_expect_oneof "$BASE/app" 302
+retry_expect_oneof "$BASE/app/" 200
+retry_expect_oneof "$BASE/cp" 302
+retry_expect_oneof "$BASE/cp/" 200
 
 # APIs must be 200
 retry_expect_oneof "$BASE/app/api/runtime-config" 200
diff --git a/server/runtime-config-server.js b/server/runtime-config-server.js
index bb6ebe8..2fe1c42 100755
--- a/server/runtime-config-server.js
+++ b/server/runtime-config-server.js
@@ -7,9 +7,16 @@ const HOST = process.env.ICONTROL_LOCAL_HOST || "127.0.0.1";
 const PORT = Number(process.env.ICONTROL_LOCAL_PORT || "4176");
 
 const ROOT = path.resolve(__dirname, "..");
-const distRoot = path.resolve(ROOT, "dist");
-const appDist = path.resolve(distRoot, "app");
-const cpDist = path.resolve(distRoot, "cp");
+// Le build cr√©e dist/ dans app/dist/ (√† cause de npm --prefix app)
+// V√©rifier les deux emplacements possibles
+const distRootApp = path.resolve(ROOT, "app", "dist");
+const distRootRoot = path.resolve(ROOT, "dist");
+const appDist = fs.existsSync(path.resolve(distRootApp, "app")) 
+  ? path.resolve(distRootApp, "app")
+  : path.resolve(distRootRoot, "app");
+const cpDist = fs.existsSync(path.resolve(distRootApp, "cp"))
+  ? path.resolve(distRootApp, "cp")
+  : path.resolve(distRootRoot, "cp");
 
 function send(res, code, headers, body) {
   res.statusCode = code;
@@ -43,64 +50,211 @@ function serveRuntimeConfig(req, res, requestedBase) {
     res.end("Method Not Allowed");
     return;
   }
-  sendJson(res, 200, {
-    app_base_path: "/app",
-    cp_base_path: "/cp",
-    requested_base: requestedBase,
-    env: "local",
-  });
+  
+  // ICONTROL_PRODUCTION_CONFIG_V1: Support variables d'environnement
+  const config = (() => {
+    try {
+      // Essayer de charger config.production.js si en production
+      if (process.env.NODE_ENV === "production") {
+        try {
+          const prodConfig = require("./config.production.js");
+          return prodConfig.getRuntimeConfig(req);
+        } catch {
+          // Fallback si fichier non trouv√©
+        }
+      }
+    } catch {}
+    
+    // Configuration par d√©faut (local/dev)
+    const host = (req.headers.host || "127.0.0.1").toString();
+    const proto = (req.headers["x-forwarded-proto"] || "http").toString();
+    const origin = `${proto}://${host}`;
+    
+    const appBase = process.env.ICONTROL_APP_BASE_URL || "/app";
+    const cpBase = process.env.ICONTROL_CP_BASE_URL || "/cp";
+    const apiBase = process.env.ICONTROL_API_BASE_URL || "/api";
+    const assetsBase = process.env.ICONTROL_ASSETS_BASE_URL || "/assets";
+    
+    return {
+      tenant_id: process.env.ICONTROL_TENANT_ID || "local-dev",
+      app_base_path: appBase,
+      cp_base_path: cpBase,
+      api_base_url: new URL(apiBase, origin).toString(),
+      assets_base_url: new URL(assetsBase, origin).toString(),
+      requested_base: requestedBase,
+      env: process.env.NODE_ENV || "local",
+      version: 1,
+    };
+  })();
+  
+  sendJson(res, 200, config);
 }
 
-function serveStatic(req, res, distDir, basePrefix) {
-  const url = new URL(
-    req.url || "/",
-    `http://${req.headers.host || "127.0.0.1"}`,
-  );
-  const raw = normalizePathname(url.pathname);
+// ICONTROL_MIME_TYPES_V1: Types MIME pour les fichiers statiques
+const MIME_TYPES = {
+  ".html": "text/html; charset=utf-8",
+  ".js": "text/javascript; charset=utf-8",
+  ".mjs": "text/javascript; charset=utf-8",
+  ".json": "application/json; charset=utf-8",
+  ".css": "text/css; charset=utf-8",
+  ".png": "image/png",
+  ".jpg": "image/jpeg",
+  ".jpeg": "image/jpeg",
+  ".gif": "image/gif",
+  ".svg": "image/svg+xml",
+  ".webp": "image/webp",
+  ".woff": "font/woff",
+  ".woff2": "font/woff2",
+  ".ttf": "font/ttf",
+  ".eot": "application/vnd.ms-fontobject",
+  ".otf": "font/otf",
+  ".ico": "image/x-icon",
+  ".xml": "text/xml; charset=utf-8",
+  ".txt": "text/plain; charset=utf-8",
+};
 
-  if (raw === basePrefix) {
-    res.statusCode = 302;
-    res.setHeader("location", `${basePrefix}/`);
-    res.end();
-    return;
-  }
+function getContentType(filePath) {
+  const ext = path.extname(filePath).toLowerCase();
+  return MIME_TYPES[ext] || "application/octet-stream";
+}
 
-  let rel = raw.startsWith(basePrefix + "/")
-    ? raw.slice(basePrefix.length + 1)
-    : "";
-  if (!rel) rel = "index.html";
+function serveStatic(req, res, distDir, basePrefix, rawPath) {
+  const method = req && req.method ? req.method : "GET";
+  const p = typeof rawPath === "string" ? rawPath : "/";
 
+  let rel = "index.html";
+  if (p === basePrefix || p === `${basePrefix}/`) {
+    rel = "index.html";
+  } else if (p.startsWith(`${basePrefix}/`)) {
+    rel = p.slice(basePrefix.length + 1);
+    if (!rel || rel.endsWith("/")) rel = "index.html";
+  }
+
+  try {
+    rel = decodeURIComponent(rel);
+  } catch {
+    // ignore
+  }
   rel = rel.replace(/^\/+/, "");
-  const filePath = path.resolve(distDir, rel);
-  if (!filePath.startsWith(distDir)) return send(res, 400, {}, "Bad request");
-
-  if (!fs.existsSync(filePath) || fs.statSync(filePath).isDirectory()) {
-    // SPA fallback
-    const idx = path.resolve(distDir, "index.html");
-    if (fs.existsSync(idx)) {
-      res.setHeader("content-type", "text/html; charset=utf-8");
-      res.setHeader("cache-control", "no-store");
-      res.end(fs.readFileSync(idx));
+  rel = rel.replace(/\\/g, "/");
+  if (rel.includes("..")) rel = "index.html";
+
+  const indexPath = path.join(distDir, "index.html");
+  const filePath = path.join(distDir, rel);
+
+  // ICONTROL_ASSET_ROUTING_V1: Servir les assets AVANT le fallback SPA
+  // Emp√™cher de servir HTML pour les fichiers JS/CSS/etc.
+  const isAsset = rel.startsWith("assets/") || 
+                  rel.endsWith(".js") || 
+                  rel.endsWith(".mjs") || 
+                  rel.endsWith(".css") || 
+                  rel.endsWith(".json") || 
+                  rel.endsWith(".map") ||
+                  rel.endsWith(".png") ||
+                  rel.endsWith(".jpg") ||
+                  rel.endsWith(".svg") ||
+                  rel.endsWith(".woff") ||
+                  rel.endsWith(".woff2");
+
+  const serveFile = (fp, contentType) => {
+    const ct = contentType || getContentType(fp);
+    // ICONTROL_MIME_ENFORCEMENT_V1: Forcer le bon Content-Type
+    if (fp.endsWith(".js") || fp.endsWith(".mjs")) {
+      res.setHeader("content-type", "text/javascript; charset=utf-8");
+    } else if (fp.endsWith(".css")) {
+      res.setHeader("content-type", "text/css; charset=utf-8");
+    } else {
+      res.setHeader("content-type", ct);
+    }
+    res.setHeader("cache-control", "no-store");
+    res.statusCode = 200;
+    if (method === "HEAD") {
+      res.end();
       return;
     }
-    return send(res, 404, {}, "Not found");
+    fs.createReadStream(fp).pipe(res);
+  };
+
+  // Si c'est un asset et qu'il existe, le servir directement
+  if (isAsset && fs.existsSync(filePath)) {
+    const st = fs.statSync(filePath);
+    if (st.isFile()) {
+      return serveFile(filePath);
+    }
   }
 
-  const ext = path.extname(filePath).toLowerCase();
-  const ctype =
-    ext === ".html"
-      ? "text/html; charset=utf-8"
-      : ext === ".js"
-        ? "application/javascript; charset=utf-8"
-        : ext === ".css"
-          ? "text/css; charset=utf-8"
-          : ext === ".json"
-            ? "application/json; charset=utf-8"
-            : "application/octet-stream";
-
-  res.setHeader("content-type", ctype);
+  // Pour les assets qui n'existent pas, retourner 404 (pas de fallback HTML)
+  if (isAsset) {
+    res.statusCode = 404;
+    res.setHeader("content-type", "text/plain; charset=utf-8");
+    res.setHeader("cache-control", "no-store");
+    res.end("Asset Not Found");
+    return;
+  }
+
+  // Pour les routes applicatives, servir index.html (fallback SPA)
+  if ((method === "GET" || method === "HEAD") && fs.existsSync(indexPath)) {
+    return serveFile(indexPath, "text/html; charset=utf-8");
+  }
+
+  res.statusCode = 404;
   res.setHeader("cache-control", "no-store");
-  res.end(fs.readFileSync(filePath));
+  res.end("Not Found");
+}
+
+function serveMetaRelease(req, res) {
+  if ((req.method || "GET") !== "GET") {
+    res.statusCode = 405;
+    res.setHeader("cache-control", "no-store");
+    res.end("Method Not Allowed");
+    return;
+  }
+
+  // ICONTROL_VERSION_GATE_V1: Endpoint /meta/release pour version gating
+  const clientVersion = req.headers["x-client-version"] || "0.0.0";
+  
+  // En production, cela devrait charger depuis une base de donn√©es ou un fichier de config
+  // Pour l'instant, on utilise des valeurs par d√©faut
+  const latestVersion = process.env.ICONTROL_LATEST_VERSION || "0.2.0";
+  const minSupportedVersion = process.env.ICONTROL_MIN_SUPPORTED_VERSION || "0.2.0";
+  
+  // Comparaison simple de versions (format X.Y.Z)
+  function compareVersions(v1, v2) {
+    const parts1 = v1.split(".").map(Number);
+    const parts2 = v2.split(".").map(Number);
+    for (let i = 0; i < Math.max(parts1.length, parts2.length); i++) {
+      const p1 = parts1[i] || 0;
+      const p2 = parts2[i] || 0;
+      if (p1 < p2) return -1;
+      if (p1 > p2) return 1;
+    }
+    return 0;
+  }
+  
+  const requiresUpdate = compareVersions(clientVersion, minSupportedVersion) < 0;
+  
+  if (requiresUpdate) {
+    // HTTP 426 Upgrade Required
+    res.statusCode = 426;
+    res.setHeader("cache-control", "no-store");
+    sendJson(res, 426, {
+      latest: latestVersion,
+      minSupported: minSupportedVersion,
+      message: `Une nouvelle version est disponible (${latestVersion}). Veuillez mettre √† jour pour continuer.`,
+      url: `${req.headers["x-forwarded-proto"] || "http"}://${req.headers.host || "127.0.0.1"}/app/`,
+      requiresUpdate: true
+    });
+    return;
+  }
+  
+  // Version OK
+  sendJson(res, 200, {
+    latest: latestVersion,
+    minSupported: minSupportedVersion,
+    message: "",
+    url: "",
+    requiresUpdate: false
+  });
 }
 
 function handleRuntimeConfigRequest(req, res) {
@@ -109,9 +263,15 @@ function handleRuntimeConfigRequest(req, res) {
       req.url || "/",
       `http://${req.headers.host || "127.0.0.1"}`,
     );
-    const pathname = normalizePathname(u.pathname);
+    const rawPath = u.pathname || "/";
+    const pathname = normalizePathname(rawPath);
 
-    // 1) SSOT endpoints first
+    // 1) Meta endpoints (version gating)
+    if (pathname === "/meta/release") {
+      return serveMetaRelease(req, res);
+    }
+
+    // 2) API (normalized only)
     if (pathname === "/app/api/runtime-config")
       return serveRuntimeConfig(req, res, "/app");
     if (pathname === "/cp/api/runtime-config")
@@ -125,11 +285,23 @@ function handleRuntimeConfigRequest(req, res) {
       return;
     }
 
-    // 3) static surfaces
-    if (pathname === "/app" || pathname.startsWith("/app/"))
-      return serveStatic(req, res, appDist, "/app");
-    if (pathname === "/cp" || pathname.startsWith("/cp/"))
-      return serveStatic(req, res, cpDist, "/cp");
+    // 3) missing-slash redirects (rawPath only)
+    if (rawPath === "/app") {
+      res.writeHead(302, { Location: "/app/" });
+      res.end();
+      return;
+    }
+    if (rawPath === "/cp") {
+      res.writeHead(302, { Location: "/cp/" });
+      res.end();
+      return;
+    }
+
+    // 4) static surfaces (rawPath only)
+    if (rawPath === "/app/" || rawPath.startsWith("/app/"))
+      return serveStatic(req, res, appDist, "/app", rawPath);
+    if (rawPath === "/cp/" || rawPath.startsWith("/cp/"))
+      return serveStatic(req, res, cpDist, "/cp", rawPath);
 
     return send(res, 404, {}, "Not found");
   } catch (err) {
