:root{
  --bg:#0f1112; --panel:#1a1d1f; --panel2:#202427; --line:#2b3136;
  --text:#e7ecef; --muted:#a7b0b7;
  --accent:#7b2cff; /* mauve sombre visible */
  --btn:#262b2f; --btn2:#2e353b;
  --radius:18px;
  --shadow: 0 12px 40px rgba(0,0,0,.35);
  --font: -apple-system, BlinkMacSystemFont, "SF Pro Display","SF Pro Text", Segoe UI, Roboto, Helvetica, Arial, sans-serif;
  /* ICONTROL_VAR_ALIAS_V1: Alias pour compatibilité avec les pages */
  --ic-card:var(--panel);
  --ic-border:var(--line);
  --ic-text:var(--text);
  --ic-mutedText:var(--muted);
  --ic-panel:var(--panel);
  --ic-accent:var(--accent);
  --ic-accent2:#7c3aed;
  --ic-bg:var(--bg);
}
*{box-sizing:border-box; max-width:100%}
html, body{overflow-x:hidden; width:100%; max-width:100vw; margin:0; padding:0}
body{background:radial-gradient(1200px 800px at 20% 0%, #1a1f23 0%, var(--bg) 55%) fixed;color:var(--text);font-family:var(--font)}
img, video, iframe, table{max-width:100%; height:auto}
[style*="grid-template-columns"]{width:100%; max-width:100%}

/* ICONTROL_FULL_WIDTH_LAYOUT_V1: Largeur pleine écran qui s'ajuste automatiquement */
/* Sur desktop (≥768px), toutes les pages utilisent la largeur pleine écran */
@media (min-width: 768px) {
  body {
    min-width: 768px;
  }
  
  /* Header avec largeur pleine */
  .cxHeader {
    width: 100%;
    max-width: 100%;
  }
  
  /* Les cartes et contenus utilisent la largeur disponible */
  .cxCard {
    max-width: 100%;
    width: 100%;
  }
  
  /* Tableaux et composantes utilisent toute la largeur */
  table {
    width: 100%;
    max-width: 100%;
  }
  
  /* Tous les contenants prennent la largeur complète */
  [style*="max-width"]:not([style*="max-width:100%"]) {
    max-width: 100% !important;
  }
}
.cxHeader{
  position:sticky; top:0; z-index:50;
  height:60px; display:flex; align-items:center; justify-content:space-between;
  gap:12px; padding:0 20px;
  background:rgba(20,22,24,.88); backdrop-filter: blur(10px);
  border-bottom:1px solid var(--line);
  max-width:100%;
  box-sizing:border-box;
}

/* ICONTROL_FIXED_HEADER_V1: Header avec largeur fixe centrée */
@media (min-width: 768px) {
  .cxHeader {
    padding: 0 20px;
  }
}
.cxHeaderContext{
  display:flex; align-items:center; gap:8px; margin-left:auto;
}
.cxContextTag{
  padding:4px 10px; border-radius:6px; font-size:11px; font-weight:600;
  border:1px solid transparent;
}
.cxContextTag.env{background:rgba(123,44,255,0.15); color:#7b2cff; border-color:#7b2cff40;}
.cxContextTag.safemode{background:rgba(220,220,170,0.15); color:#dcdcaa; border-color:#dcdcaa40;}
.cxContextTag.safemode.strict{background:rgba(244,135,113,0.15); color:#f48771; border-color:#f4877140;}
.cxContextTag.role{background:rgba(78,201,176,0.15); color:#4ec9b0; border-color:#4ec9b040;}
.cxBrand{
  display: flex;
  align-items: center;
  gap: 8px;
  display:flex; align-items:center; gap:10px;
  font-weight:800; letter-spacing:.2px;
}
.cxBrandDot{
  width:12px;height:12px;border-radius:99px;background:var(--accent);
  box-shadow:0 0 0 4px rgba(123,44,255,.14);
}
.cxBurger{
  width:44px;height:44px;border-radius:12px;
  background:var(--btn); border:1px solid var(--line);
  display:grid; place-items:center; cursor:pointer;
}
.cxBurger:hover{background:var(--btn2)}
.cxBurger:focus-visible{
  outline:2px solid var(--accent);
  outline-offset:2px;
}
.cxMain{
  padding: clamp(16px, 2vw, 32px); 
  width:100%; 
  margin:0;
  min-height:calc(100vh - 50px);
  background:var(--ic-bg, var(--bg)); /* ICONTROL_SHELL_MAIN_TRANSPARENT_V1: Fond avec couleur de base */
  overflow-x:hidden;
  box-sizing:border-box;
  display:flex;
  flex-direction:column;
}

/* ICONTROL_FULL_WIDTH_RESPONSIVE_V1: Largeur pleine écran qui s'ajuste automatiquement */
/* Desktop: padding responsive, largeur pleine écran */
@media (min-width: 768px) {
  .cxMain {
    padding: clamp(20px, 2.5vw, 32px);
    width: 100%;
    margin: 0;
  }
}

/* Sur très grands écrans, padding plus généreux mais largeur pleine */
@media (min-width: 1920px) {
  .cxMain {
    padding: clamp(24px, 3vw, 40px);
    width: 100%;
    margin: 0;
  }
}
.cxDrawerOverlay{
  position:fixed; inset:0; background:rgba(0,0,0,.45);
  z-index:80; display:none;
}
.cxDrawer{
  position:fixed; top:0; left:0; height:100vh;
  width:280px; max-width:90vw;
  background:var(--ic-panel, var(--panel2));
  border-right:1px solid var(--ic-border, var(--line));
  box-shadow: var(--shadow);
  z-index:90; transform: translateX(-100%);
  transition: transform .18s ease;
  padding:12px;
  display:flex;
  flex-direction:column;
  overflow-y: auto;
}
.cxDrawer.open{ transform: translateX(0); }
.cxDrawerOverlay.open{ display:block; }

/* ICONTROL_RESPONSIVE_DRAWER_V1: Règles supprimées, remplacées par ICONTROL_OVERLAY_DRAWER_V1 */
.cxDrawerBottom a:hover{ background:rgba(255,255,255,0.05); }
#cxUserAvatar:hover{ opacity:0.9; transform:scale(1.05); transition:transform 0.2s; }
.cxDrawerTop{
  display:flex; flex-direction:column; align-items:stretch;
  margin-bottom:12px;
  position:relative;
}
.cxDrawerTop > button.cxClose{
  position:absolute; top:0; right:0;
}
.cxDrawerTitle{
  font-weight:900; letter-spacing:.3px;
}
.cxDrawerLogo{
  display:flex; align-items:center; justify-content:center;
  padding:12px 0;
}
.cxClose{
  width:40px;height:40px;border-radius:12px;
  background:transparent; border:1px solid var(--line);
  color:var(--text); cursor:pointer;
}
.cxClose:hover{background:rgba(255,255,255,.06)}
.cxClose:focus-visible{
  outline:2px solid var(--accent);
  outline-offset:2px;
}
.cxNav{
  display:flex; flex-direction:column; gap:8px; margin-top:10px;
}
.cxNav a{
  text-decoration:none; color:var(--text);
  padding:12px 12px; border-radius:14px;
  background:rgba(255,255,255,.03);
  border:1px solid rgba(255,255,255,.06);
}
.cxNav a:hover{background:rgba(255,255,255,.06)}
.cxNav a:focus-visible{
  outline:2px solid var(--accent);
  outline-offset:2px;
}
.cxNav a.active{
  border-color: rgba(123,44,255,.55);
  background: rgba(123,44,255,.10);
}
.cxNav small{color:var(--muted)}

/* ICONTROL_OVERLAY_DRAWER_V1
   Desktop et Mobile: drawer s'ouvre par-dessus la page (overlay)
   Header et page active prennent toute la largeur
*/
@media (min-width: 768px){
  /* Pas de grid layout, header et main prennent toute la largeur */
  body > div:first-child,
  #app > div:first-child {
    display: flex !important;
    flex-direction: column !important;
    min-height: 100vh;
    width: 100%;
    max-width: 100%;
    margin: 0;
    padding: 0;
  }
  
  /* Header pleine largeur */
  .cxHeader {
    width: 100%;
    position: sticky;
    top: 0;
    z-index: 50;
    flex-shrink: 0;
  }
  
  /* Main pleine largeur */
  .cxMain{
    flex: 1;
    width: 100%;
    max-width: 100%;
    margin: 0;
    padding: clamp(20px, 2.5vw, 32px);
    min-width: 0;
    overflow-y: auto;
    overflow-x: hidden;
  }
  
  /* Drawer reste en position fixed, s'ouvre par-dessus */
  .cxDrawer{
    position: fixed !important;
    top: 0;
    left: 0;
    height: 100vh;
    width: 280px;
    max-width: 280px;
    min-width: 280px;
    transform: translateX(-100%);
    z-index: 90;
    border-right: 1px solid var(--line);
    box-shadow: 4px 0 12px rgba(0, 0, 0, 0.3);
  }
  
  .cxDrawer.open {
    transform: translateX(0);
  }
  
  /* Overlay visible quand drawer ouvert */
  .cxDrawerOverlay.open {
    display: block;
    z-index: 85;
  }
  
  /* Cacher burger sur desktop */
  @media (min-width: 1024px) {
    .cxBurger {
      display: none;
    }
    
    .cxDrawer {
      width: 320px;
      max-width: 320px;
      min-width: 320px;
    }
    
    .cxMain {
      padding: clamp(24px, 3vw, 36px);
    }
  }
  
  @media (min-width: 1920px) {
    .cxDrawer {
      width: 340px;
      max-width: 340px;
      min-width: 340px;
    }
    
    .cxMain {
      padding: clamp(24px, 3vw, 40px);
    }
  }
}
