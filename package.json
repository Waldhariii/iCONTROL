{
  "name": "icontrol-monorepo",
  "private": true,
  "version": "0.2.0+dev.1",
  "workspaces": [
    "app",
    "app-desktop-*",
    "langs/frontend-ts",
    "modules/*",
    "modules/**/ui/frontend-ts",
    "modules/*/ui/frontend-ts",
    "runtime",
    "server",
    "shared/*"
  ],
  "scripts": {
    "lint": "eslint . --ext .ts,.tsx --max-warnings 0",
    "lint:fix": "eslint . --ext .ts,.tsx --fix",
    "test": "npm run test:app",
    "test:app": "bash ./scripts/vitest-app.sh",
    "test:cp": "bash ./scripts/vitest-cp.sh",
    "test:matrix": "npm run test:app && npm run test:cp",
    "hooks:install": "bash ./scripts/dev/install-githooks.sh",
    "desktop:app": "bash -lc 'cd app-desktop-client/src-tauri && cargo tauri build'",
    "desktop:cp": "bash -lc 'cd app-desktop-control/src-tauri && cargo tauri build'",
    "desktop:build": "npm run desktop:app && npm run desktop:cp",
    "format:check": "bash -lc '\nset -euo pipefail\nBASE=\"origin/main...HEAD\"\n\n# 1) Fichiers committes dans la plage\nA=$(git diff --name-only \"$BASE\" --diff-filter=ACMRTUXB || true)\n\n# 2) Fichiers staged\nB=$(git diff --name-only --cached --diff-filter=ACMRTUXB || true)\n\n# 3) Fichiers unstaged\nC=$(git diff --name-only --diff-filter=ACMRTUXB || true)\n\nFILES=$(printf \"%s\n%s\n%s\n\" \"$A\" \"$B\" \"$C\" | sed \"/^$/d\" | sort -u)\n\nif [ -z \"$FILES\" ]; then\n  echo \"OK: no files to format\"\n  exit 0\nfi\n\necho \"Prettier check files:\"\necho \"$FILES\" | sed \"s/^/ - /\"\n\nprettier --check --ignore-unknown $FILES\n'",
    "format:check:all": "prettier --check .",
    "dev:reset": "bash ./scripts/dev-reset.sh",
    "dev:app": "VITE_APP_KIND=APP npm --prefix app run dev -- --host 127.0.0.1 --port 5176 --strictPort --base /app/",
    "dev:cp": "VITE_APP_KIND=CONTROL_PLANE npm --prefix app run dev -- --host 127.0.0.1 --port 5177 --strictPort --base /cp/",
    "dev:both": "bash -lc 'npm run dev:reset && (npm run dev:app & npm run dev:cp & wait)'",
    "desktop:dev:app": "bash -lc 'cd app-desktop-client/src-tauri && cargo tauri dev'",
    "desktop:dev:cp": "bash -lc 'cd app-desktop-control/src-tauri && cargo tauri dev'",
    "desktop:dev:both": "bash -lc '(npm run desktop:dev:app & npm run desktop:dev:cp & wait)'",
    "where:home": "node -e \"console.log('APP  : http://127.0.0.1:5176/app/#/home-app'); console.log('CP   : http://127.0.0.1:5177/cp/#/home-cp');\"",
    "build:app": "cd app && vite build --config vite.config.ts --outDir _artifacts/dist/app --emptyOutDir",
    "build:cp": "cd app && VITE_APP_KIND=CONTROL_PLANE vite build --config vite.config.ts --outDir _artifacts/dist/cp --emptyOutDir",
    "build": "echo 'ERR: Use build:app, build:cp, or build:ssot instead of build' && exit 1 --outDir _artifacts/dist/app --emptyOutDir",
    "build:ssot": "npm run build:app && npm run build:cp",
    "server:build": "node server/build.mjs",
    "server:dev": "node server/build.mjs --watch --run",
    "server:prod": "node server/dist/runtime-config-server.mjs",
    "local:web:build": "bash scripts/local-web-build.sh",
    "local:web:serve": "bash -lc 'node ./server/runtime-config-server.js --host ${ICONTROL_LOCAL_HOST:-127.0.0.1} --port ${ICONTROL_LOCAL_PORT:-4176} --dist ./dist'",
    "start": "bash scripts/rebuild-and-serve.sh",
    "local:web": "bash ./scripts/local-web.sh",
    "ui:preview": "node scripts/ui-preview.mjs",
    "ui:inventory": "node scripts/ui-inventory.mjs",
    "ui:catalog": "node scripts/ui-catalog.mjs",
    "ui:snap": "node scripts/ui-catalog-snap.mjs",
    "ui:cp-snap": "node scripts/cp-visual-snap.mjs",
    "proofs:logs": "node scripts/check-logs-route.js",
    "release:manifest": "node scripts/gates/generate-release-manifest.js",
    "gate:check-dist": "bash scripts/gates/check-dist-not-tracked.sh",
    "gate:check-versions": "bash scripts/gates/check-versions-sync.sh",
    "gate:check-builds": "bash scripts/gates/check-builds-compatible.sh",
    "gate:check-cross-imports": "node scripts/gates/check-cp-app-cross-imports.mjs",
    "gate:ui-drift": "zsh ./scripts/gates/run_ui_drift_gate.sh .",
    "gate:route-catalog": "node scripts/gates/check-route-catalog.mjs",
    "gate:tenant-matrix": "node scripts/gates/check-tenant-feature-matrix.mjs",
    "gate:design-tokens": "node scripts/gates/check-design-tokens.mjs",
    "generate:design-tokens": "node scripts/gates/generate-design-tokens-css.mjs",
    "gate:capability-status": "node scripts/gates/check-capability-status.mjs",
    "gate:admin-components-registry": "node scripts/gates/check-admin-components-registry.mjs",
    "gate:route-drift": "node scripts/gates/check-route-drift.mjs",
    "generate:route-drift": "node scripts/gates/generate-route-drift-report.mjs",
    "gate:ssot": "npm run -s gate:python3-only && npm run gate:ui-drift && npm run gate:route-catalog && npm run gate:route-drift && npm run gate:tenant-matrix && npm run gate:design-tokens && npm run gate:capability-status && npm run gate:admin-components-registry && npm run gate:check-cross-imports",
    "gate:check-duplication": "bash scripts/gates/check-no-page-duplication.sh",
    "gate:check-manifest": "bash scripts/gates/check-release-manifest.sh",
    "gate:check-tauri-config": "bash scripts/gates/check-tauri-config-shared.sh",
    "gate:all": "npm run gate:check-dist && npm run gate:check-versions && npm run gate:check-builds && npm run gate:check-duplication && npm run gate:check-manifest && npm run gate:check-tauri-config && npm run gate:route-catalog && npm run gate:tenant-matrix && npm run gate:design-tokens && npm run gate:capability-status",
    "gate:pre-commit": "npm run gate:check-dist && npm run gate:check-versions && npm run gate:check-duplication && npm run gate:route-catalog && npm run gate:tenant-matrix && npm run gate:design-tokens && npm run gate:capability-status",
    "tauri:generate-configs": "node scripts/gates/generate-tauri-configs.js",
    "desktop:create-launchers": "bash scripts/mac/create-all-launchers.sh",
    "desktop:create-launchers-web": "bash scripts/mac/create-web-launchers.sh",
    "gate:ui-inline-drift": "bash scripts/gates/gate-ui-inline-drift.sh",
    "gate:ui-component-registry": "node scripts/gates/gate-ui-component-registry.mjs",
    "gate:ui-contracts": "node scripts/gates/gate-ui-contracts.mjs",
    "gate:write-gateway-coverage": "node scripts/gates/gate-write-gateway-coverage.mjs",
    "gate:write-surface-map": "node scripts/gates/gate-write-surface-map.mjs",
    "gate:ssot:paths": "node ./scripts/gates/gate-ssot-paths.mjs",
    "gate:routing:ssot": "node scripts/gates/gate-routing-ssot.mjs",
    "gate:routing:ssot:report": "node scripts/gates/gate-routing-ssot.mjs || true",
    "gate:gates:sanity": "node scripts/gates/gate-gates-sanity.mjs",
    "gate:rg-n-safety": "node ./scripts/gates/gate-rg-n-safety.mjs",
    "gate:rg-n-safety:triage": "node scripts/gates/gate-rg-n-safety-triage.mjs",
    "gate:write-surface-triage": "node scripts/gates/gate-write-surface-triage.mjs",
    "gate:python3-only": "python3 --version >/dev/null",
    "build:shared-assets": "node scripts/perf/dist-shared-assets.mjs",
    "build:prod": "npm run -s build:app && npm run -s build:cp && npm run -s build:shared-assets",
    "assets:manifest": "node scripts/gates/generate-assets-manifest.mjs",
    "gate:assets-routing": "node scripts/gates/check-assets-routing.mjs",
    "verify:prod:assets": "npm run -s gate:assets-routing && npm run -s assets:manifest",
    "gate:pre-release:prod": "./scripts/gates/pre-release-prod-check.sh && npm run -s gate:release:index",
    "gate:release-bundle": "./scripts/gates/release-bundle-check.sh",
    "release:notes": "node scripts/gates/generate-release-notes.mjs",
    "gate:preflight:release": "./scripts/gates/preflight-release-check.sh",
    "release:bundle": "node scripts/gates/generate-release-bundle.mjs",
    "release:index": "node scripts/gates/generate-release-index.mjs",
    "gate:release:index": "./scripts/gates/check-release-index.sh",
    "release:consistency": "node scripts/gates/check-release-consistency.mjs",
    "gate:release:consistency": "npm run -s release:consistency",
    "gate:no-tenant-sample-data": "bash scripts/gates/no-tenant-sample-data.sh",
    "verify:prod:fast": "npm run -s gate:core-lts-freeze && npm run -s gate:no-tenant-sample-data && npm run -s gate:no-cross-surface-imports && npm run -s gate:pages-whitelist && npm run -s gate:no-mockups-imports-in-surfaces && npm run -s gate:no-legacy-pages-dir && npm run -s gate:no-pages-imports-in-appsrc && npm run -s gate:no-legacy-imports-in-tests && npm run -s gate:no-src-pages-deps && npm run -s gate:core-harden && npm run -s gate:core-kernel && npm run -s gate:runtime-config && npm run -s gate:no-node-in-browser && npm run -s gate:runtime-config-example-ssot && npm run -s gate:entitlements-kernel && npm run -s gate:no-raw-console && npm run -s gate:root-clean && npm run -s gate:control-plane-activation && npm run -s gate:core-freeze-lts && npm run -s gate:boundaries-map && npm run -s gate:no-hardcoded-colors-warn && npm run -s gate:tenant-overrides-no-node && npm run -s gate:cp-tenant-overrides-writer-warn && npm run -s gate:safe-mode-writer-warn && npm run -s gate:safe-mode-cp-only-warn && npm run -s gate:diagnostics-artifacts && npm run -s gate:workspaces-boundaries && npm run -s gate:no-hardcoded-cp-nav && npm run -s gate:modules-no-app-imports && npm run -s gate:hardcoded-colors-budget && npm run -s gate:no-raw-console-budget && npm run -s gate:safe-mode-cp-only-budget && npm run -s gate:release-artifacts-location && npm run -s gate:tag-integrity && npm run -s gate:canonical-structure && npm run -s gate:kernel-lock && npm run -s gate:root-canonical && npm run -s gate:generated-only && npm run -s gate:pressure-layer && npm run -s gate:pressure-layer-budget0 && npm run -s gate:observability-budget0 && npm run -s gate:release-rollback-sim && npm run -s gate:architecture-freeze && npm run -s gate:module-manifests && npm run -s gate:schema-drift && npm run -s gate:ssot-catalog && npm run -s gate:policy-layer && npm run -s gate:region-layer && npm run -s gate:extension-economy && npm run -s gate:ai-layer && npm run -s gate:module-contract-v1 && npm run -s gate:event-backbone",
    "gate:no-cross-surface-imports": "bash scripts/gates/no-cross-surface-imports.sh",
    "gate:pages-whitelist": "bash scripts/gates/pages-whitelist.sh",
    "gate:no-mockups-imports-in-surfaces": "bash scripts/gates/no-mockups-imports-in-surfaces.sh",
    "gate:no-legacy-pages-dir": "bash scripts/gates/no-legacy-pages-dir.sh",
    "gate:no-pages-imports-in-appsrc": "bash scripts/gates/no-pages-imports-in-appsrc.sh",
    "gate:no-legacy-imports-in-tests": "bash scripts/gates/no-legacy-imports-in-tests.sh",
    "test:watch": "vitest",
    "test:ci": "vitest run --reporter=default",
    "gate:no-src-pages-deps": "bash scripts/gates/no-src-pages-deps.sh",
    "gate:preflight:prod": "bash scripts/gates/preflight-prod.sh && npm run -s gate:runtime-config && npm run -s gate:no-node-in-browser && npm run -s gate:runtime-config-example-ssot && npm run -s gate:entitlements-kernel && npm run -s gate:no-raw-console && npm run -s gate:root-clean && npm run -s gate:boundaries-map && npm run -s gate:no-hardcoded-colors-warn && npm run -s gate:tenant-overrides-no-node && npm run -s gate:cp-tenant-overrides-writer-warn && npm run -s gate:safe-mode-writer-warn && npm run -s gate:safe-mode-cp-only-warn && npm run -s gate:diagnostics-artifacts && npm run -s gate:workspaces-boundaries && npm run -s gate:modules-no-app-imports && npm run -s gate:hardcoded-colors-budget && npm run -s gate:no-raw-console-budget && npm run -s gate:safe-mode-cp-only-budget && npm run -s gate:release-artifacts-location && npm run -s gate:tag-integrity",
    "verify:prod": "npm run -s gate:preflight:prod",
    "gate:core-harden": "bash scripts/gates/no-src-pages-allowed.sh && bash scripts/gates/no-cross-surface-imports.sh",
    "gate:no-direct-storage-writes": "bash scripts/gates/no-direct-storage-writes.sh",
    "gate:core-kernel": "npm run -s gate:no-direct-storage-writes",
    "release:baseline": "bash scripts/release/tag-prod-baseline.sh",
    "gate:runtime-config": "node scripts/gates/gate-runtime-config.js",
    "gate:no-node-in-browser": "node scripts/gates/gate-no-node-in-browser.js",
    "gate:runtime-config-example-ssot": "node scripts/gates/gate-runtime-config-ssot-example.js",
    "gate:entitlements-kernel": "node scripts/gates/gate-entitlements-kernel.js",
    "gate:no-raw-console": "node scripts/gates/gate-no-raw-console.js",
    "gate:root-clean": "node scripts/gates/gate-root-clean.js",
    "gate:boundaries-map": "node scripts/gates/gate-boundaries-map.js",
    "gate:no-hardcoded-colors-warn": "node scripts/gates/gate-no-hardcoded-colors-warn.js",
    "gate:tenant-overrides-no-node": "node scripts/gates/gate-tenant-overrides-no-node.js",
    "gate:cp-tenant-overrides-writer-warn": "node scripts/gates/gate-cp-tenant-overrides-writer-warn.js",
    "gate:safe-mode-writer-warn": "node scripts/gates/gate-safe-mode-writer-warn.js",
    "gate:safe-mode-cp-only-warn": "node scripts/gates/gate-safe-mode-cp-only-warn.js",
    "diag:tenant": "bash -lc 'cd app && npx vitest run -t \"diagnostic export tenant runtime\" src/__tests__/diagnostic.export-tenant-runtime.evidence.test.ts'",
    "gate:diagnostics-artifacts": "node scripts/gates/gate-diagnostics-artifacts.js",
    "gate:workspaces-boundaries": "node scripts/gates/gate-workspaces-boundaries.js",
    "ws:app:test": "bash -lc 'cd app && npm run -s test'",
    "ws:app:ssot": "bash -lc 'cd app && npm run -s verify:ssot:fast'",
    "ws:app:build:prod": "bash -lc 'cd app && npm run -s build:prod'",
    "ws:server:test": "bash -lc 'cd server && npm run -s test' || true",
    "ws:preflight": "npm run -s gate:preflight:prod",
    "gate:modules-no-app-imports": "node scripts/gates/gate-modules-no-app-imports.js",
    "gate:hardcoded-colors-budget": "node scripts/gates/gate-hardcoded-colors-budget.mjs",
    "gate:no-raw-console-budget": "node scripts/gates/gate-no-raw-console-budget.mjs",
    "gate:safe-mode-cp-only-budget": "node scripts/gates/gate-safe-mode-cp-only-budget.mjs",
    "gate:release-rc-artifacts": "node scripts/gates/gate-release-rc-artifacts.js",
    "release:rc": "bash scripts/release/release-prod-candidate.sh",
    "gate:release-artifacts-location": "node scripts/gates/gate-release-artifacts-location.js",
    "gate:tag-integrity": "node scripts/gates/gate-tag-integrity.js",
    "gate:canonical-structure": "bash scripts/gates/gate-canonical-structure.sh",
    "gate:kernel-lock": "bash scripts/gates/gate-kernel-lock.sh",
    "gate:root-canonical": "bash scripts/gates/gate-root-canonical.sh",
    "gate:generated-only": "bash scripts/gates/gate-generated-only.sh",
    "release:train": "bash scripts/release/release-train.sh",
    "release:train:vnext": "bash scripts/release/release-train-vnext.sh",
    "gate:pressure-layer": "bash scripts/gates/gate-pressure-layer.sh",
    "gate:pressure-layer-budget0": "bash scripts/gates/gate-pressure-layer-budget0.sh",
    "gate:observability-budget0": "bash scripts/gates/gate-observability-budget0.sh",
    "gate:release-rollback-sim": "bash scripts/gates/gate-release-rollback-sim.sh",
    "gate:architecture-freeze": "bash scripts/gates/gate-architecture-freeze.sh",
    "gate:module-manifests": "bash scripts/gates/gate-module-manifests.sh",
    "gate:schema-drift": "bash scripts/gates/gate-schema-drift.sh",
    "gate:titan-sanity": "bash scripts/gates/gate-titan-sanity.sh",
    "gate:ssot-catalog": "bash scripts/gates/gate-ssot-catalog.sh",
    "gate:policy-layer": "bash scripts/gates/gate-policy-layer.sh",
    "gate:region-layer": "bash scripts/gates/gate-region-layer.sh",
    "gate:extension-economy": "bash scripts/gates/gate-extension-economy.sh",
    "gate:ai-layer": "bash scripts/gates/gate-ai-layer.sh",
    "gate:core-freeze-lts": "bash scripts/gates/gate-core-freeze-lts.sh",
    "gate:module-contract-v1": "bash scripts/gates/gate-module-contract-v1.sh",
    "gate:core-lts-freeze": "bash scripts/gates/gate-core-lts-freeze.sh",
    "gate:control-plane-activation": "bash scripts/gates/gate-control-plane-activation.sh",
    "gate:event-backbone": "bash scripts/gates/gate-event-backbone.sh",
    "gate:module-catalog": "bash ./scripts/gates/gate-module-catalog.sh",
    "gate:no-hardcoded-cp-nav": "CP_NAV_ALLOWLIST=app/src/core/nav/cpNav.catalog.ts,app/src/core/ports/cpSurfaceRegistry.catalog.ts bash ./scripts/gates/gate-no-hardcoded-cp-nav.sh",
    "gate:generated-only:audit-untracked": "bash ./scripts/gates/gate-no-audit-tracking.sh",
    "gate:releaseops-invariants": "bash ./scripts/gates/gate-releaseops-invariants.sh .",
    "gate:ssot-surface-route-map": "bash ./scripts/gates/gate-ssot-surface-route-map.sh .",
    "gen:releaseops-checklist": "node ./scripts/gates/gen-releaseops-checklist.mjs"
  },
  "devDependencies": {
    "@types/react": "^19.2.10",
    "@types/react-dom": "^19.2.3",
    "@typescript-eslint/eslint-plugin": "^7.0.0",
    "@typescript-eslint/parser": "^7.0.0",
    "@vitejs/plugin-react": "^5.1.2",
    "esbuild": "^0.21.5",
    "eslint": "^8.56.0",
    "playwright": "^1.57.0",
    "prettier": "^3.8.0"
  },
  "dependencies": {
    "react": "^19.2.4",
    "react-dom": "^19.2.4"
  }
}
