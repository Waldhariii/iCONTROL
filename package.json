{
  "name": "icontrol-monorepo",
  "private": true,
  "version": "0.2.0+dev.1",
  "workspaces": [
    "langs/frontend-ts",
    "modulesui/frontend-ts"
  ],
  "scripts": {
    "lint": "echo \"lint placeholder\"",
    "test": "npm run test:app",
    "test:app": "bash ./scripts/vitest-app.sh",
    "desktop:app": "bash -lc 'cd app-desktop-client/src-tauri && cargo tauri build'",
    "desktop:cp": "bash -lc 'cd app-desktop-control/src-tauri && cargo tauri build'",
    "desktop:build": "npm run desktop:app && npm run desktop:cp",
    "format:check": "bash -lc '\nset -euo pipefail\nBASE=\"origin/main...HEAD\"\n\n# 1) Fichiers committes dans la plage\nA=$(git diff --name-only \"$BASE\" --diff-filter=ACMRTUXB || true)\n\n# 2) Fichiers staged\nB=$(git diff --name-only --cached --diff-filter=ACMRTUXB || true)\n\n# 3) Fichiers unstaged\nC=$(git diff --name-only --diff-filter=ACMRTUXB || true)\n\nFILES=$(printf \"%s\n%s\n%s\n\" \"$A\" \"$B\" \"$C\" | sed \"/^$/d\" | sort -u)\n\nif [ -z \"$FILES\" ]; then\n  echo \"OK: no files to format\"\n  exit 0\nfi\n\necho \"Prettier check files:\"\necho \"$FILES\" | sed \"s/^/ - /\"\n\nprettier --check --ignore-unknown $FILES\n'",
    "format:check:all": "prettier --check .",
    "dev:reset": "bash ./scripts/dev-reset.sh",
    "dev:app": "npm --prefix app run dev -- --host 127.0.0.1 --port 5176 --strictPort --base /app/",
    "dev:cp": "npm --prefix app run dev -- --host 127.0.0.1 --port 5177 --strictPort --base /cp/",
    "dev:both": "bash -lc 'npm run dev:reset && (npm run dev:app & npm run dev:cp & wait)'",
    "desktop:dev:app": "bash -lc 'cd app-desktop-client/src-tauri && cargo tauri dev'",
    "desktop:dev:cp": "bash -lc 'cd app-desktop-control/src-tauri && cargo tauri dev'",
    "desktop:dev:both": "bash -lc '(npm run desktop:dev:app & npm run desktop:dev:cp & wait)'",
    "where:login": "node -e \"console.log('APP  : http://127.0.0.1:5176/app/#/login'); console.log('CP   : http://127.0.0.1:5177/cp/#/login');\"",
    "build:app": "npm --prefix app run build -- --base /app/ --outDir dist/app",
    "build:cp": "VITE_APP_KIND=CONTROL_PLANE npm --prefix app run build -- --base /cp/ --outDir dist/cp",
    "build:ssot": "npm run build:app && npm run build:cp",
    "server:build": "node server/build.mjs",
    "server:dev": "node server/build.mjs --watch --run",
    "server:prod": "node server/dist/runtime-config-server.mjs",
    "local:web:build": "VITE_APP_KIND=CLIENT_APP npm --prefix app run build -- --base /app/ --outDir dist/app && VITE_APP_KIND=CONTROL_PLANE npm --prefix app run build -- --base /cp/ --outDir dist/cp",
    "local:web:serve": "bash -lc 'node ./server/runtime-config-server.js --host ${ICONTROL_LOCAL_HOST:-127.0.0.1} --port ${ICONTROL_LOCAL_PORT:-4176} --dist ./dist'",
    "start": "bash scripts/rebuild-and-serve.sh",
    "local:web": "bash ./scripts/local-web.sh",
    "proofs:logs": "node scripts/check-logs-route.js",
    "proofs:system": "node scripts/check-system-route.js",
    "proofs:api": "node scripts/check-api-route.js",
    "proofs:network": "node scripts/check-network-route.js",
    "proofs:account": "node scripts/check-account-route.js",
    "proofs:developer": "node scripts/check-developer-route.js",
    "proofs:developer:entitlements": "node scripts/check-developer-entitlements-route.js",
    "proofs:verification": "node scripts/check-verification-route.js",
    "proofs:dashboard": "node scripts/check-dashboard-route.js",
    "proofs:all": "npm run -s proofs:logs && npm run -s proofs:system && npm run -s proofs:api && npm run -s proofs:network && npm run -s proofs:account && npm run -s proofs:developer && npm run -s proofs:developer:entitlements && npm run -s proofs:verification && npm run -s proofs:dashboard && npm run -s check:created-at && npm run -s prove:plugins && npm run -s check:paid-killswitch && npm run -s proofs:placeholders:normalize && npm run -s check:runtime-config-contract && npm run -s check:safe-mode && npm run -s check:governance-score && npm run -s check:safe-mode-enforcement && npm run -s check:governance-layer && npm run -s check:system-configuration && npm run -s check:governance-state && npm run -s check:governance-activation-gate",
    "proofs:runtime:config": "node scripts/check-runtime-config.js",
    "check:created-at": "node scripts/check-created-at-governance.js",
    "prove:plugins": "bash scripts/prove-plugins-governance.sh",
    "check:paid-killswitch": "node scripts/check-paid-killswitch.cjs",
    "proofs:placeholders:normalize": "node scripts/normalize-proofs-placeholders.cjs",
    "check:runtime-config-contract": "node scripts/check-runtime-config-contract.cjs",
    "check:safe-mode": "node scripts/check-safe-mode.cjs",
    "check:governance-score": "node scripts/check-governance-score.cjs",
    "check:safe-mode-enforcement": "node scripts/enforce-safe-mode.cjs",
    "check:governance-layer": "node scripts/governance/check-governance-layer.cjs",
    "pack:governance": "node scripts/governance/pack-governance.cjs",
    "check:system-configuration": "node scripts/governance/check-system-configuration.cjs",
    "gov:activate": "node scripts/governance/activate.cjs",
    "gov:deactivate": "node scripts/governance/deactivate.cjs",
    "check:governance-state": "node scripts/governance/check-governance-state.cjs",
    "check:governance-activation-gate": "node scripts/governance/check-governance-activation-gate.cjs",
    "proofs:strict": "node scripts/governance/run-strict.cjs proofs:all",
    "check:governance-activation-gate:strict": "node scripts/governance/run-strict.cjs check:governance-activation-gate"
  },
  "devDependencies": {
    "esbuild": "^0.21.5",
    "prettier": "^3.8.0"
  }
}
